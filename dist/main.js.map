{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/answer/answer.component.css","webpack:///./src/app/components/answer/answer.component.html","webpack:///./src/app/components/answer/answer.component.ts","webpack:///./src/app/components/authentication/authentication.component.css","webpack:///./src/app/components/authentication/authentication.component.html","webpack:///./src/app/components/authentication/authentication.component.ts","webpack:///./src/app/components/contacts/contacts.component.css","webpack:///./src/app/components/contacts/contacts.component.html","webpack:///./src/app/components/contacts/contacts.component.ts","webpack:///./src/app/components/conversation/conversation.component.css","webpack:///./src/app/components/conversation/conversation.component.html","webpack:///./src/app/components/conversation/conversation.component.ts","webpack:///./src/app/components/home/home.component.css","webpack:///./src/app/components/home/home.component.html","webpack:///./src/app/components/home/home.component.ts","webpack:///./src/app/components/info-conversation/info-conversation.component.css","webpack:///./src/app/components/info-conversation/info-conversation.component.html","webpack:///./src/app/components/info-conversation/info-conversation.component.ts","webpack:///./src/app/components/input/input.component.css","webpack:///./src/app/components/input/input.component.html","webpack:///./src/app/components/input/input.component.ts","webpack:///./src/app/components/lastmessage/lastmessage.component.css","webpack:///./src/app/components/lastmessage/lastmessage.component.html","webpack:///./src/app/components/lastmessage/lastmessage.component.ts","webpack:///./src/app/components/message/message.component.css","webpack:///./src/app/components/message/message.component.html","webpack:///./src/app/components/message/message.component.ts","webpack:///./src/app/components/navbar/navbar.component.css","webpack:///./src/app/components/navbar/navbar.component.html","webpack:///./src/app/components/navbar/navbar.component.ts","webpack:///./src/app/components/new-message/new-message.component.css","webpack:///./src/app/components/new-message/new-message.component.html","webpack:///./src/app/components/new-message/new-message.component.ts","webpack:///./src/app/components/profile/profile.component.css","webpack:///./src/app/components/profile/profile.component.html","webpack:///./src/app/components/profile/profile.component.ts","webpack:///./src/app/components/roomchat/roomchat.component.css","webpack:///./src/app/components/roomchat/roomchat.component.html","webpack:///./src/app/components/roomchat/roomchat.component.ts","webpack:///./src/app/components/services/services.component.css","webpack:///./src/app/components/services/services.component.html","webpack:///./src/app/components/services/services.component.ts","webpack:///./src/app/guard/auth.guard.ts","webpack:///./src/app/search-contacts.pipe.ts","webpack:///./src/app/search-roomchat.pipe.ts","webpack:///./src/app/services/authentication.service.ts","webpack:///./src/app/services/component-communication.service.ts","webpack:///./src/app/services/friend.service.ts","webpack:///./src/app/services/message.service.ts","webpack:///./src/app/services/notification.service.ts","webpack:///./src/app/services/roomchat-user.service.ts","webpack:///./src/app/services/roomchat.service.ts","webpack:///./src/app/services/socket.service.ts","webpack:///./src/app/services/upload.service.ts","webpack:///./src/app/services/user.service.ts","webpack:///./src/app/time-ago.pipe.ts","webpack:///./src/app/timeago.pipe.ts","webpack:///./src/domain.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///ws (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"@media screen and (max-width:420px) {}\\r\\n\\r\\n@media screen and (max-width:910px) {\\r\\n  .roomchat-header-label {\\r\\n    background-color: red\\r\\n  }\\r\\n}\\r\\n\\r\\n.custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  background-color: rgb(0, 0, 0);\\r\\n  /* Fallback color */\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.modal-options-content {\\r\\n  height: 70px;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n}\\r\\n\"","module.exports = \"<app-navbar></app-navbar>\\n<router-outlet>\\n  <template ngbModalContainer></template>\\n</router-outlet>\\n\\n<div *ngIf=\\\"showCallAccept\\\" id=\\\"call-accept-modal\\\" class=\\\"custom-modal\\\">\\n  <div class=\\\"custom-modal-content\\\" style=\\\"height: 190px\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        {{callUsername}} đang gọi bạn !\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-content\\\">\\n      <div style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;margin-top:5px;display: flex;justify-content: center;align-items: center\\\">\\n        <button (click)=\\\"acceptCall()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:left;width:80px;height: 40px;margin:10px\\\">\\n          Đồng ý\\n        </button>\\n        <button (click)=\\\"rejectCall()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:left;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\n          Từ chối\\n        </button>\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n    </div>\\n  </div>\\n</div>\\n\"","import {\r\n  Component,\r\n  HostListener,\r\n  OnInit,\r\n  DoCheck,\r\n  KeyValueDiffers,\r\n  KeyValueDiffer\r\n} from \"@angular/core\";\r\nimport { ComponentCommunicationService } from \"./services/component-communication.service\";\r\nimport { SocketService } from \"./services/socket.service\";\r\nimport { FriendService } from \"./services/friend.service\";\r\nimport { UserService } from \"./services/user.service\";\r\nimport { Router, ActivatedRoute, RouterStateSnapshot } from \"@angular/router\";\r\nimport { AuthenticationService } from \"./services/authentication.service\";\r\nimport { NotificationService } from \"./services/notification.service\";\r\nimport * as Peer from \"peerjs\";\r\n\r\n@Component({\r\n  selector: \"app-root\",\r\n  templateUrl: \"./app.component.html\",\r\n  styleUrls: [\"./app.component.css\"]\r\n})\r\nexport class AppComponent implements OnInit {\r\n  myID: string = \"\";\r\n  myProfile: any = {};\r\n  timeActive: number = Date.now();\r\n  moveMouseTime: number = Date.now();\r\n  idle: boolean = false;\r\n  callUsername: string = \"\";\r\n  showCallAccept: boolean = false;\r\n  calledUserIDs: Array<string> = [];\r\n  connectedUserCall: Array<string> = [];\r\n  callRoomchatID: string = \"\";\r\n  dataTimeActive = [];\r\n  peer: Peer;\r\n  peerID: string = \"\";\r\n  constructor(\r\n    private componentCommunicationService: ComponentCommunicationService,\r\n    private notificationService: NotificationService,\r\n    private router: Router,\r\n    private socketService: SocketService,\r\n    private friendService: FriendService,\r\n    private userService: UserService,\r\n    private authService: AuthenticationService\r\n  ) {}\r\n\r\n  @HostListener(\"mousemove\", [\"$event\"])\r\n  onMousemove(event: MouseEvent) {\r\n    this.moveMouseTime = Date.now();\r\n    if (this.idle) {\r\n      if (this.myID !== \"\") {\r\n        this.socketService.reActive(this.myID + \"_user\", this.myID);\r\n        this.idle = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.authService.getTokenStatus().subscribe(data => {\r\n      if (data) {\r\n        if (data.isAdded === true) {\r\n          this.friendService.getFriends(\"true\").subscribe(data => {\r\n            if (data && data.success) {\r\n              for (let friend of data.friends) {\r\n                this.socketService.joinRoomchat(friend + \"_user\");\r\n              }\r\n              this.myID = data.myID;\r\n              this.socketService.receiveConfirmConnect().subscribe(data => {\r\n                if (data && data.success) {\r\n                  this.socketService.sendUserID(this.myID, this.myID + \"_user\");\r\n                  setInterval(() => {\r\n                    this.socketService.sendUserID(\r\n                      this.myID,\r\n                      this.myID + \"_user\"\r\n                    );\r\n                  }, 2000);\r\n                }\r\n              });\r\n            }\r\n          });\r\n          this.socketService.joinRoomchat(\"world\");\r\n        }\r\n      }\r\n    });\r\n\r\n    this.componentCommunicationService.getData().subscribe(data => {\r\n      if (!data) return;\r\n      if (data.type === \"confirm-init\") {\r\n        this.userService.getUsers(\"none\").subscribe(data => {\r\n          if (data && data.success) {\r\n            this.dataTimeActive = data.users.map(el => {\r\n              return {\r\n                _id: el._id,\r\n                timeActive: el.timeActive\r\n              };\r\n            });\r\n            this.componentCommunicationService.setData({\r\n              fromComponent: \"app\",\r\n              type: \"timestamp-on-init\",\r\n              dataTimeActive: this.dataTimeActive\r\n            });\r\n          }\r\n        });\r\n      } else if (\r\n        data.fromComponent === \"input\" &&\r\n        data.type === \"confirm-seen-message\"\r\n      ) {\r\n        this.componentCommunicationService.setData({\r\n          fromComponent: \"app\",\r\n          toComponent: \"conversation\",\r\n          type: \"check-valid-seen\",\r\n          data: data\r\n        });\r\n      } else if (\r\n        data.fromComponent === \"conversation\" &&\r\n        data.type === \"is-valid-seen\"\r\n      ) {\r\n        this.socketService.emitSeenMessage(data.roomchatID, data.userID);\r\n      } else if (\r\n        data.fromComponent === \"conversation\" &&\r\n        data.type === \"call-video\"\r\n      ) {\r\n        this.calledUserIDs = data.usersInRoomchat;\r\n        this.socketService.emitCall(\r\n          this.myProfile.username,\r\n          this.myProfile._id,\r\n          data.roomchatID\r\n        );\r\n      }\r\n    });\r\n\r\n    this.socketService.receiveCreateRoomchat().subscribe(data => {\r\n      if (!data) return;\r\n      this.socketService.joinRoomchat(data.roomchatID);\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"roomchat\",\r\n        type: \"create-roomchat\",\r\n        roomchatID: data.roomchatID\r\n      });\r\n    });\r\n\r\n    this.socketService.receiveFriendRequest().subscribe(data => {\r\n      if(!data) return;\r\n      if(this.myID + '' !== data.destUserID) return;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"navbar\",\r\n        type: \"friend-request\",\r\n        data: data\r\n      });\r\n    })\r\n\r\n    this.socketService.receiveMessage(data => {\r\n      if (!data) return;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        type: \"receive-message\",\r\n        data: data\r\n      });\r\n      if (data.type === \"message\") {\r\n        this.socketService.emitReceiveMessage(data.roomchatID);\r\n      }\r\n    });\r\n\r\n    this.socketService.receiveCallRequest().subscribe(data => {\r\n      if (!data) return;\r\n      this.callUsername = data.username;\r\n      this.showCallAccept = true;\r\n      this.callRoomchatID = data.roomchatID;\r\n      console.log(\"call request\", data);\r\n    });\r\n\r\n    this.socketService.receiveNotification().subscribe(data => {\r\n      if (!data) return;\r\n      let notificationObject = data.notification;\r\n      let fromRoomchatID = data.fromRoomchatID;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"navbar\",\r\n        type: \"receive-notification\",\r\n        notification: notificationObject\r\n      });\r\n    });\r\n\r\n    this.socketService.confirmReceiveMessage().subscribe(data => {\r\n      if (!data) return;\r\n      console.log(\"da nhan tin nhan!!!!\");\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"conversation\",\r\n        type: \"confirm-received-message\",\r\n        data: data\r\n      });\r\n    });\r\n\r\n    this.socketService.confirmSeenMessage().subscribe(data => {\r\n      console.log(\"DMMM\");\r\n      if (!data) return;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"conversation\",\r\n        type: \"confirm-seen-message\",\r\n        data: data\r\n      });\r\n    });\r\n\r\n    this.socketService.receiveTyping(data => {\r\n      if (!data) return;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        type: \"typing\",\r\n        data: data\r\n      });\r\n    });\r\n\r\n    this.socketService.receiveTimestamp().subscribe(data => {\r\n      if (!data) return;\r\n      this.timeActive = data.time;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        type: \"timestamp\",\r\n        fromUserID: data.userID,\r\n        time: data.time\r\n      });\r\n    });\r\n\r\n    setInterval(() => {\r\n      if (Math.abs(Date.now() - this.moveMouseTime) > 1000 * 60) {\r\n        // lon hon 1phut thi idle\r\n        if (this.myID !== \"\") {\r\n          this.idle = true;\r\n          this.socketService.emitIdle(this.myID + \"_user\", this.myID);\r\n        }\r\n      }\r\n    }, 2000);\r\n\r\n    this.socketService.receiveIdle().subscribe(data => {\r\n      if (!data) return;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        fromUserID: data.userID,\r\n        type: \"idle\"\r\n      });\r\n    });\r\n\r\n    this.socketService.receiveReactive().subscribe(data => {\r\n      if (!data) return;\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        fromUserID: data.userID,\r\n        type: \"reactive\"\r\n      });\r\n    });\r\n\r\n    this.socketService.receivePeerID().subscribe(data => {\r\n      if (!data) return;\r\n      if (data.userID === this.myID) return;\r\n      let destUserID = data.userID;\r\n      if (this.calledUserIDs.includes(destUserID + \"\")) {\r\n        //xac nhan lai nguoi dc goi\r\n        this.connectedUserCall.push(destUserID);\r\n      }\r\n      if (this.connectedUserCall.length === 1) {\r\n        this.calledUserIDs = [];\r\n        return window.open(\r\n          \"services/\" + data.roomchatID + \"?userid=\" + this.myID\r\n        );\r\n      }\r\n    });\r\n\r\n    this.socketService.receiveAddUsersToGroup().subscribe(data => {\r\n      if (!data) return;\r\n      if (data.addedUserID.includes(this.myID + \"\")) {\r\n        this.socketService.joinRoomchat(data.roomchatID);\r\n      }\r\n      return this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"info-conversation\",\r\n        roomchatID: data.roomchatID,\r\n        type: \"add-users-to-roomchat\"\r\n      });\r\n    });\r\n\r\n    this.socketService.receiveDeleteUsersFromGroup().subscribe(data => {\r\n      if (!data) return;\r\n      if (this.myID + \"\" === data.deletedUserID + \"\") {\r\n        this.socketService.leaveRoomchat(data.roomchatID);\r\n      }\r\n    });\r\n\r\n    this.socketService.receiveArrangeRoomchats().subscribe(data => {\r\n      if (!data) return;\r\n      return this.componentCommunicationService.setData({\r\n        fromComponent: \"app\",\r\n        toComponent: \"roomchat\",\r\n        type: \"arrange-roomchat\",\r\n        arrangedRoomchat: data\r\n      });\r\n    });\r\n\r\n    // this.componentCommunicationService.getData().subscribe(data => {\r\n    //   if (!data) return;\r\n    //   if (data.type === 'resend-timestamp-oninit') {\r\n    //     if(this.dataTimeActive.length === 0) return;\r\n    //     this.componentCommunicationService.setData({\r\n    //       fromComponent: 'app',\r\n    //       type: 'timestamp-on-init',\r\n    //       dataTimeActive: this.dataTimeActive\r\n    //     });\r\n    //   }\r\n    // })\r\n  }\r\n\r\n  openStream() {\r\n    const config = {\r\n      audio: false,\r\n      video: true\r\n    };\r\n    return navigator.mediaDevices.getUserMedia(config);\r\n  }\r\n\r\n  acceptCall() {\r\n    return window.open(\r\n      \"answer/\" + this.callRoomchatID + \"?userid=\" + this.myID\r\n    );\r\n  }\r\n\r\n  rejectCall() {}\r\n\r\n  isCallOrAnswerRoute() {\r\n    let url = this.router.routerState.snapshot.url.split(\"/\");\r\n    let el = url[1];\r\n    console.log(\"iscall::\", url);\r\n    if (el === \"services\" || el === \"answer\") {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  isInRoomchatID(roomchatID) {\r\n    let url = this.router.routerState.snapshot.url;\r\n    return (\r\n      url === \"/home/conversation/\" + roomchatID ||\r\n      url === \"/conversation/\" + roomchatID\r\n    );\r\n  }\r\n}\r\n","import { BrowserModule } from \"@angular/platform-browser\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { RouterModule, Routes, RouteReuseStrategy } from \"@angular/router\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\nimport { HttpModule, RequestOptions, Http } from \"@angular/http\";\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\nimport { AppComponent } from \"./app.component\";\r\nimport { NavbarComponent } from \"./components/navbar/navbar.component\";\r\nimport { MatButtonModule, MatCheckboxModule } from \"@angular/material\";\r\nimport { AuthenticationComponent } from \"./components/authentication/authentication.component\";\r\nimport { AuthenticationService } from \"./services/authentication.service\";\r\nimport { SocketService } from \"./services/socket.service\";\r\nimport { AuthHttp, AuthConfig } from \"angular2-jwt\";\r\nimport { HttpClientModule } from \"@angular/common/http\";\r\nimport { ContactsComponent } from \"./components/contacts/contacts.component\";\r\nimport { HomeComponent } from \"./components/home/home.component\";\r\nimport { RoomchatComponent } from \"./components/roomchat/roomchat.component\";\r\nimport { ConversationComponent } from \"./components/conversation/conversation.component\";\r\nimport { LastmessageComponent } from \"./components/lastmessage/lastmessage.component\";\r\nimport { ComponentCommunicationService } from \"./services/component-communication.service\";\r\nimport { SearchRoomchatPipe } from \"./search-roomchat.pipe\";\r\nimport { SearchContactsPipe } from \"./search-contacts.pipe\";\r\nimport { MessageComponent } from \"./components/message/message.component\";\r\nimport { TextareaAutosizeModule } from \"ngx-textarea-autosize\";\r\n\r\nimport { TimeAgoPipe } from \"./time-ago.pipe\";\r\n\r\nimport { NgbModule } from \"@ng-bootstrap/ng-bootstrap\";\r\nimport { InputComponent } from \"./components//input/input.component\";\r\nimport { TimeagoPipe } from \"./timeago.pipe\";\r\nimport { ServiceWorkerModule } from \"@angular/service-worker\";\r\nimport { environment } from \"../environments/environment\";\r\nimport { NewMessageComponent } from \"./components/new-message/new-message.component\";\r\nimport { CustomReuseStrategy } from \"./CustomRouteReuseStategy\";\r\nimport { ClickOutsideModule } from \"ng4-click-outside\";\r\nimport { InfoConversationComponent } from \"./components/info-conversation/info-conversation.component\";\r\nimport { ServicesComponent } from \"./components/services/services.component\";\r\nimport { AnswerComponent } from \"./components/answer/answer.component\";\r\nimport { AuthGuard } from \"./guard/auth.guard\";\r\nimport { ProfileComponent } from \"./components/profile/profile.component\";\r\n\r\nconst appRoutes: Routes = [\r\n  { path: \"\", redirectTo: \"/home\", pathMatch: 'full' },\r\n  { path: \"authenticate\", component: AuthenticationComponent },\r\n  {\r\n    path: \"contacts\",\r\n    component: ContactsComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  {\r\n    path: \"home\",\r\n    component: HomeComponent,\r\n    canActivate: [AuthGuard],\r\n    data: { key: \"homee\" },\r\n    children: [\r\n      {\r\n        path: \"conversation/:roomchatid\",\r\n        component: ConversationComponent,\r\n        canActivate: [AuthGuard],\r\n        data: { key: \"home-conversation\" }\r\n      },\r\n      {\r\n        path: \"newmessage\",\r\n        component: NewMessageComponent,\r\n        canActivate: [AuthGuard],\r\n        data: { key: \"home-newmessage\" }\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    path: \"conversation/:roomchatid\",\r\n    component: ConversationComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  { path: \"roomchats\", component: RoomchatComponent, canActivate: [AuthGuard] },\r\n  {\r\n    path: \"conversation/:roomchatid\",\r\n    component: ConversationComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  {\r\n    path: \"infoconversation/:roomchatid\",\r\n    component: InfoConversationComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  {\r\n    path: \"newmessage\",\r\n    component: NewMessageComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  {\r\n    path: \"services/:id\",\r\n    component: ServicesComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  { path: \"answer/:id\", component: AnswerComponent, canActivate: [AuthGuard] },\r\n  { path: \"profile\", component: ProfileComponent, canActivate: [AuthGuard] }\r\n  // {\r\n  //   path: 'profile/:id', component: ProfileComponent, canActivate: [AuthGuard],children: [{ path: 'post/:postID', component: PostComponent }]\r\n  // }\r\n  // { path: 'profile/:id', component: ProfileComponent, canActivate: [AuthGuard]},\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    NavbarComponent,\r\n    AuthenticationComponent,\r\n    ContactsComponent,\r\n    HomeComponent,\r\n    RoomchatComponent,\r\n    ConversationComponent,\r\n    LastmessageComponent,\r\n    SearchRoomchatPipe,\r\n    SearchContactsPipe,\r\n    MessageComponent,\r\n    InputComponent,\r\n    TimeAgoPipe,\r\n    TimeagoPipe,\r\n    NewMessageComponent,\r\n    InfoConversationComponent,\r\n    ServicesComponent,\r\n    AnswerComponent,\r\n    ProfileComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    MatButtonModule,\r\n    MatCheckboxModule,\r\n    TextareaAutosizeModule,\r\n    FormsModule,\r\n    HttpClientModule,\r\n    NgbModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ClickOutsideModule,\r\n    RouterModule.forRoot(appRoutes),\r\n    HttpModule,\r\n    ReactiveFormsModule.withConfig({ warnOnNgModelWithFormControl: \"never\" }),\r\n    ServiceWorkerModule.register(\"ngsw-worker.js\", {\r\n      enabled: environment.production\r\n    })\r\n  ],\r\n  exports: [RouterModule],\r\n  providers: [\r\n    AuthenticationService,\r\n    ComponentCommunicationService,\r\n    // { provide: RouteReuseStrategy, useClass: CustomReuseStrategy },\r\n    SocketService,\r\n    {\r\n      provide: AuthHttp,\r\n      useFactory: authHttpServiceFactory,\r\n      deps: [Http, RequestOptions]\r\n    }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {}\r\n\r\nexport function authHttpServiceFactory(http: Http, options: RequestOptions) {\r\n  return new AuthHttp(new AuthConfig(), http, options);\r\n}\r\n","module.exports = \"\"","module.exports = \"<div style=\\\"width:100%;display: flex;justify-content: center;align-items: center\\\">\\n  <video id=\\\"big-stream\\\" controls></video>\\n</div>\\n<div style=\\\"width:25%;height:300px;position: fixed;bottom:100px\\\">\\n  <video id=\\\"small-stream\\\" width=\\\"100%\\\" controls></video>\\n</div>\\n<div (click)='close()' style=\\\"position:fixed;bottom:20px;width:100%;height:100px;display: flex;justify-content: center;align-items: center\\\">\\n  <i class=\\\"fas fa-phone\\\" style=\\\"font-size: 40px;color:red\\\"></i>\\n</div>\"","import { Component, OnInit,AfterViewInit } from '@angular/core';\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\nimport { Subscription } from 'rxjs';\nimport { Router, ActivatedRoute, RouterStateSnapshot } from '@angular/router';\nimport * as Peer from 'peerjs';\nimport { UserService } from 'src/app/services/user.service';\nimport { SocketService } from '../../services/socket.service';\nimport { RoomchatUserService } from '../../services/roomchat-user.service';\n\n@Component({\n  selector: 'app-answer',\n  templateUrl: './answer.component.html',\n  styleUrls: ['./answer.component.css']\n})\nexport class AnswerComponent implements OnInit, AfterViewInit {\n  getDataSub: Subscription;\n  getUsersInRoomchatSub: Subscription;\n  updatePeerIDSub: Subscription;\n  peer: Peer;\n  userID: string = '';\n  roomchatID: string = '';\n  peerID: string = '';\n  constructor(private communicationComponentService: ComponentCommunicationService,\n    private userService: UserService,\n    private socketService: SocketService,\n    private roomchatUserService: RoomchatUserService,\n    private router: Router) { }\n\n  ngOnInit() {\n    \n    this.peer = new Peer({\n      path: '/peerjs',\n      host: 'hustmess-peer-server.herokuapp.com',\n      port: 443,\n      secure: true\n    });\n    let bigStream = <HTMLVideoElement>document.getElementById('big-stream');\n    bigStream.height = window.innerHeight ;\n    let bigVideoWidth = bigStream.clientWidth;\n    this.roomchatID = this.getParams().params;\n\n    this.userID = this.getParams().query;\n    this.peer.on('open', id => {\n      this.updatePeerIDSub = this.userService.updatePeerIDUser(id).subscribe(data => {\n        console.log(\"id peer: \",data)\n        if(data && data.success){\n          this.socketService.emitAcceptCallStatus(true,this.roomchatID,this.userID);\n        } else {\n          this.socketService.emitAcceptCallStatus(false,this.roomchatID,this.userID);\n        }\n      })\n    });\n    this.peer.on('call', call => {\n      console.log(\"answer co cuoc goi!!!\",call.metadata)\n      this.openStream().then(stream => {\n          call.answer(stream);\n          \n          call.on('stream', remoteStream => {\n            console.log('check strea: ',remoteStream)\n            let bigVideo = <HTMLVideoElement>document.getElementById('big-stream');\n            let smallVideo = <HTMLVideoElement>document.getElementById('small-stream');\n            bigVideo.srcObject = remoteStream;\n            smallVideo.srcObject = stream;\n            smallVideo.play();\n            bigVideo.play();\n          });\n      });\n  });\n  }\n\n  ngAfterViewInit(){\n    this.communicationComponentService.setData({\n      fromComponent: 'answer',\n      toComponent: 'navbar',\n      type: 'hide-navbar'\n    })\n  }\n\n  openStream() {\n    const config = {\n      audio: true,\n      video: true\n    };\n    return navigator.mediaDevices.getUserMedia(config);\n  }\n\n  close(){\n    window.close();\n  }\n\n  getParams() {\n    let url = this.router.routerState.snapshot.url.split('?');\n    let tempLength = url[0].split('/').length;\n    return {\n      params: url[0].split('/')[tempLength - 1] + '',\n      query: url[1].replace('userid=', '')\n    }\n  }\n\n}\n","module.exports = \"hr {\\r\\n    background-color: dimgrey;\\r\\n    color: dimgrey;\\r\\n    border: solid 1px dimgrey;\\r\\n}\\r\\n\\r\\n#iphone-image {\\r\\n    -webkit-animation: fadein 3s;\\r\\n    /* Safari, Chrome and Opera > 12.1 */\\r\\n    /* Firefox < 16 */\\r\\n    /* Internet Explorer */\\r\\n    /* Opera < 12.1 */\\r\\n    animation: fadein 3s;\\r\\n}\\r\\n\\r\\n.loginUI {\\r\\n    border-style: solid;\\r\\n    border: none;\\r\\n    width: 350px;\\r\\n    border-color: rgb(111, 116, 124);\\r\\n    /* left: 79px; */\\r\\n    position: absolute;\\r\\n    top: 80px;\\r\\n    background: rgb(230, 232, 237);\\r\\n    border-radius: 15px;\\r\\n    box-shadow:  0px 3px 5px 6px rgb(230, 232, 237);\\r\\n}\\r\\n\\r\\n.authenticate-get-the-app {\\r\\n    position: absolute;\\r\\n    bottom: 54px;\\r\\n    width: 100%;\\r\\n    text-align: center\\r\\n}\\r\\n\\r\\n.authenticate-download-the-app {\\r\\n    width: 100%;\\r\\n    bottom: 0px;\\r\\n    position: absolute;\\r\\n    cursor: pointer;\\r\\n    text-align: center\\r\\n}\\r\\n\\r\\n.authenticateUI {\\r\\n    position: relative;\\r\\n    padding: 0px;\\r\\n    height: 730px;\\r\\n    width: 350px;\\r\\n}\\r\\n\\r\\n.registerUI {\\r\\n    border-style: solid;\\r\\n    border: none;\\r\\n    width: 350px;\\r\\n    border-color: rgb(111, 116, 124);\\r\\n    /* left: 79px; */\\r\\n    position: absolute;\\r\\n    top: 80px;\\r\\n    background: rgb(230, 232, 237);\\r\\n    border-radius: 15px;\\r\\n    box-shadow:  0px 3px 5px 6px rgb(230, 232, 237);\\r\\n}\\r\\n\\r\\n@-webkit-keyframes fadein {\\r\\n    from {\\r\\n        opacity: 0\\r\\n    }\\r\\n    to {\\r\\n        opacity: 1\\r\\n    }\\r\\n}\\r\\n\\r\\n@keyframes fadein {\\r\\n    from {\\r\\n        opacity: 0\\r\\n    }\\r\\n    to {\\r\\n        opacity: 1\\r\\n    }\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 768px) {\\r\\n    #login-image-1 {\\r\\n        display: none\\r\\n    };\\r\\n    .authenticateUI {\\r\\n        text-align: center\\r\\n    }\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 451px) and (max-width: 768px) {\\r\\n    /* .loginUI {\\r\\n        left: 25%;\\r\\n    } */\\r\\n    .authenticateUI {\\r\\n        text-align: center\\r\\n    }\\r\\n    #root {\\r\\n        display: flex;\\r\\n        justify-content: center;\\r\\n        align-items: center;\\r\\n    }\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 0px) and (max-width: 450px) {\\r\\n    /* #authenticateUI {\\r\\n        background-color: blue;\\r\\n        width: 100%;\\r\\n    } */\\r\\n    .authenticateUI {\\r\\n        width: 100%;\\r\\n        margin-top: 75px\\r\\n    }\\r\\n    .loginUI {\\r\\n        width: 100%;\\r\\n        top: 0px;\\r\\n        left: 0px;\\r\\n    }\\r\\n    .registerUI {\\r\\n        width: 100%;\\r\\n        top: 0px;\\r\\n        left: 0px;\\r\\n    }\\r\\n    #root {\\r\\n        margin-left: 0px\\r\\n    }\\r\\n}\"","module.exports = \"<div id=\\\"root\\\" class=\\\"row\\\" style=\\\"margin-top:75px;width:100%\\\">\\n  <div class=\\\"col-sm-6\\\" id=\\\"login-image-1\\\" style=\\\"position:relative;height:730px\\\">\\n    <img id=\\\"iphone-image\\\" src=\\\"../../../assets/login.png\\\"\\n      style=\\\"position:absolute;right:0px;top:37px;width:500px\\\">\\n  </div>\\n  <div id=\\\"authenticateUI\\\" class=\\\"col-sm-4 authenticateUI\\\" style=\\\"text-align: center\\\">\\n    <div id=\\\"loginUI\\\" *ngIf=\\\"switchToLoginUI\\\" class=\\\"loginUI\\\">\\n      <form class=\\\"form-group container-fluid\\\">\\n        <img src=\\\"../../assets/logo.png\\\" style=\\\"height:43%;width:43%\\\">\\n        <div style=\\\"font-size:25px;font-weight: 600\\\">Đăng nhập</div>\\n        <input [(ngModel)]=\\\"login.username\\\" type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"email\\\" placeholder=\\\"Phone number, username, or email\\\"\\n          style=\\\"margin-top:27px\\\">\\n        <input [(ngModel)]=\\\"login.password\\\" type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password\\\" placeholder=\\\"Password\\\"\\n          style=\\\"margin-top:10px\\\">\\n        <button (click)=\\\"onLogin()\\\" class=\\\"btn btn-info form-control\\\" style=\\\"margin-top:20px\\\">Đăng nhập</button>\\n        <div style=\\\"margin-top:30px;position:relative;width:100%;height:46px\\\">\\n          <hr style=\\\"width:40%;display:inline-block;position:absolute;right:60%\\\">\\n          <div style=\\\"width:30px;display:inline-block;left:46%;position:absolute\\\">\\n            <h4> OR</h4>\\n          </div>\\n          <hr style=\\\"width:40%;display:inline-block;position:absolute;left:60%\\\">\\n        </div>\\n        <!-- <button (click)=\\\"onLoginFacebook()\\\" class=\\\"btn btn-info form-control\\\" style=\\\"height:47px;margin-top:7%\\\">\\n                  <div style=\\\"margin-top:2%\\\">\\n                      <i style=\\\"display:inline-block;font-size:140%\\\" class=\\\"fa fa-facebook\\\"></i>\\n                      <p style=\\\"display:inline-block;font-size:120%\\\">&nbsp; Log in with Facebook</p>\\n                  </div>\\n              </button> -->\\n        <div style=\\\"text-align:center;margin-top:4%;margin-bottom:-8%\\\">\\n          <p id=\\\"msg-error-login\\\" style=\\\"color:green\\\">\\n\\n          </p>\\n        </div>\\n        <div style=\\\"margin-top:16%\\\">\\n          <a style=\\\"cursor:pointer;text-decoration:none\\\">Quên mật khẩu?</a>\\n        </div>\\n        <div style=\\\"margin-top:10%;margin-left:-31px\\\">\\n          <h5 style=\\\"margin-left:40px;display:inline-block;font: bold 14px/33px Georgia, serif;\\\">Chưa có tài khoản?</h5>\\n          <a  (click)=\\\"openRegisterUI()\\\" style=\\\"display:inline-block;cursor:pointer;text-decoration:none\\\">Đăng ký</a>\\n        </div>\\n      </form>\\n    </div>\\n    <div id=\\\"registerUI\\\" *ngIf=\\\"switchToRegisterUI\\\" class=\\\"registerUI\\\">\\n      <form [formGroup]=\\\"registerForm\\\" class=\\\"form-group container-fluid\\\">\\n        <img src=\\\"../../assets/logo.png\\\" style=\\\"height:43%;width:43%\\\">\\n        <div style=\\\"font-size:25px;font-weight: 600\\\">Đăng ký</div>\\n        <input formControlName=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"Email\\\" style=\\\"margin-top:27px\\\">\\n        <div *ngIf=\\\"registerForm.controls.email.hasError('required')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Bắt buộc điền email </p>\\n        </div>\\n        <div *ngIf=\\\"registerForm.controls.email.hasError('pattern')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Email không hợp lệ. Vui lòng thử lại </p>\\n        </div>\\n        <div *ngIf=\\\"!registerForm.controls.email.hasError('exist')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color: green\\\"> Email chưa được sử dụng </p>\\n        </div>\\n\\n        <div *ngIf=\\\"loading\\\" style=\\\"text-align:center;display: flex;justify-content: center\\\">\\n          <div>\\n            <img style=\\\"float: left ;width:30px;margin-top:-5px\\\" src=\\\"../../../assets/loading.gif\\\">\\n            <p style=\\\"color:rgb(255, 130, 47); float: left;\\\"> Đang kiểm tra </p>\\n          </div>\\n\\n        </div>\\n\\n        <div *ngIf=\\\"registerForm.controls.email.hasError('exist')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Email đã tồn tại. Xin chọn lại </p>\\n        </div>\\n        <input formControlName=\\\"phoneNumber\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Mobile Number\\\" style=\\\"margin-top:27px\\\">\\n        <div *ngIf=\\\"registerForm.controls.phoneNumber.hasError('required')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Bắt buộc điền số điện thoại </p>\\n        </div>\\n        <div *ngIf=\\\"registerForm.controls.phoneNumber.hasError('pattern')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Số điện thoại không hợp lệ. Vui lòng thử lại </p>\\n        </div>\\n        <input formControlName=\\\"username\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Username\\\" style=\\\"margin-top:10px\\\">\\n        <div *ngIf=\\\"registerForm.controls.username.hasError('required')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Bắt buộc điền username </p>\\n        </div>\\n        <input formControlName=\\\"password\\\" type=\\\"password\\\" class=\\\"form-control\\\" placeholder=\\\"Password\\\" style=\\\"margin-top:10px\\\">\\n        <div *ngIf=\\\"registerForm.controls.password.hasError('required')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Bắt buộc điền password </p>\\n        </div>\\n        <div *ngIf=\\\"registerForm.controls.password.hasError('pattern')\\\" style=\\\"text-align:center\\\">\\n          <p style=\\\"color:red\\\"> Password có độ dài tối thiểu 8 ký tự, có chữ hóa, chữ thường và chữ số </p>\\n        </div>\\n        <button id='register-button' (click)=\\\"onRegister()\\\" class=\\\"btn btn-info form-control\\\" style=\\\"margin-top:20px\\\">Đăng ký</button>\\n        <div style=\\\"text-align:center;margin-top:4%;margin-bottom:-8%\\\">\\n          <p id=\\\"msg-error-register\\\" style=\\\"color:red\\\">\\n\\n          </p>\\n        </div>\\n        <div style=\\\"margin-top:10%;text-align:center;font: 16px/28px Georgia, serif;\\\">\\n          Bằng việc đăng ký, bạn đã đồng ý với\\n          <p><a href=\\\"https://help.instagram.com/155833707900388\\\"><strong>Điều khoản & Điều kiện</strong></a></p>\\n        </div>\\n        <div style=\\\"margin-top:10%;margin-left:-31px\\\">\\n          <h5 style=\\\"margin-left:40px;display:inline-block;font: bold 14px/33px Georgia, serif;\\\">Đã có tài khoản?</h5>\\n          <a (click)=\\\"openLoginUI()\\\" style=\\\"display:inline-block;cursor:pointer;text-decoration:none\\\">Đăng nhập</a>\\n        </div>\\n      </form>\\n    </div>\\n\\n  </div>\\n\"","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { AuthenticationService } from '../../services/authentication.service';\r\nimport { FormControl, Validators, AsyncValidator, AsyncValidatorFn, AbstractControl, ValidationErrors, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\r\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\r\n\r\nconst EMAIL_REGEX = /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\r\nconst PASSWORD_REGEX = /(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;\r\nconst PHONENUMBER_REGEX = /(0[3|5|7|8|9])+([0-9]{8})\\b/;\r\n@Component({\r\n  selector: 'app-authentication',\r\n  templateUrl: './authentication.component.html',\r\n  styleUrls: ['./authentication.component.css']\r\n})\r\nexport class AuthenticationComponent implements OnInit {\r\n  login: any = {\r\n    username: '',\r\n    password: ''\r\n  }\r\n  register: any = {\r\n    username: '',\r\n    password: '',\r\n    email: ''\r\n  }\r\n  switchToLoginUI: boolean = true;\r\n  switchToRegisterUI: boolean = false;\r\n  registerForm: FormGroup;\r\n  loading: Boolean = false;\r\n  // emailFormControl = new FormControl('', [Validators.required, Validators.pattern(EMAIL_REGEX)], this.usernameValidator());\r\n  // usernameFormControl = new FormControl('', [Validators.required]);\r\n  // passwordFormControl = new FormControl('', [Validators.required, Validators.pattern(PASSWORD_REGEX)]);\r\n\r\n  usernameValidator(): AsyncValidatorFn {\r\n    return (control: AbstractControl): Observable<ValidationErrors> => {\r\n      this.loading = true;\r\n      return this.authService.validateExist({ email: this.registerForm.controls.email.value }).pipe(map(data => {\r\n        this.loading = false;\r\n        if (data.success) {\r\n          return;\r\n        } else {\r\n          return { 'exist': true }\r\n        }\r\n      }))\r\n    };\r\n  }\r\n  constructor(private authService: AuthenticationService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.authService.logout();\r\n    this.registerForm = new FormGroup({\r\n      email: new FormControl('', [Validators.required, Validators.pattern(EMAIL_REGEX)], this.usernameValidator()),\r\n      username: new FormControl('', [Validators.required]),\r\n      password: new FormControl('', [Validators.required, Validators.pattern(PASSWORD_REGEX)]),\r\n      phoneNumber: new FormControl('',[Validators.required, Validators.pattern(PHONENUMBER_REGEX)])\r\n\r\n    })\r\n  }\r\n\r\n  openRegisterUI() {\r\n    this.switchToLoginUI = false;\r\n    this.switchToRegisterUI = true;\r\n  }\r\n  openLoginUI() {\r\n    this.switchToLoginUI = true;\r\n    this.switchToRegisterUI = false;\r\n  }\r\n\r\n  onLogin() {\r\n    let user = {\r\n      username: this.login.username,\r\n      password: this.login.password\r\n    }\r\n    this.authService.loginUser(user).subscribe(data => {\r\n      this.cdRef.detectChanges();\r\n      if (data.success) {\r\n        this.authService.myID = data._id;\r\n        this.authService.storeToken(data.token);\r\n        let w = window.innerWidth;\r\n        if(w < 900){\r\n          this.router.navigate(['/roomchats'])\r\n        } else {\r\n          this.router.navigate(['/home'])\r\n        }\r\n      } else {\r\n        document.getElementById('msg-error-login').innerHTML = data.msg;\r\n      }\r\n    })\r\n  }\r\n\r\n  get emailForm (){\r\n    return this.registerForm.controls.email.value;\r\n  }\r\n\r\n  get usernameForm (){\r\n    return this.registerForm.controls.username.value;\r\n  }\r\n\r\n  get phoneNumberForm (){\r\n    return this.registerForm.controls.phoneNumber.value;\r\n  }\r\n\r\n  get passwordForm (){\r\n    return this.registerForm.controls.password.value;\r\n  }\r\n\r\n  onRegister() {\r\n    let registerButton = <HTMLInputElement>document.getElementById('register-button');\r\n    registerButton.disabled = true;\r\n    let user = {\r\n      email: this.emailForm,\r\n      username: this.usernameForm,\r\n      phoneNumber: this.phoneNumberForm,\r\n      password: this.passwordForm\r\n    }\r\n    this.authService.registerUser(user).subscribe(data => {\r\n      registerButton.disabled = false;\r\n      if (data.success) {\r\n        this.openLoginUI();\r\n        this.cdRef.detectChanges();\r\n        document.getElementById('msg-error-login').innerHTML = 'Đăng ký thành công. Đăng nhập để tiếp tục';\r\n      } else {\r\n        document.getElementById('msg-error-register').innerHTML = data.msg;\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n\r\n}\r\n","module.exports = \".profile-image {\\r\\n  width: 50px;\\r\\n  height: 60px;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.contact-header {\\r\\n    height: 60px;\\r\\n    padding: 8px;\\r\\n    width: 100%;\\r\\n    border-bottom: solid;\\r\\n    border-color: #e7e7e7;\\r\\n    border-width: thin;\\r\\n  }\\r\\n\\r\\n.contact-header-setting {\\r\\n    width: 32px;\\r\\n    float: left;\\r\\n    height: 100%;\\r\\n  }\\r\\n\\r\\n.contact-header-label {\\r\\n    /* font-size: 16px;\\r\\n      text-align: center;\\r\\n      height: 100%;\\r\\n      flex-basis: 100%; */\\r\\n    font-size: 16px;\\r\\n    font-weight: 500;\\r\\n    overflow: hidden;\\r\\n    text-align: center;\\r\\n    float: left;\\r\\n    margin-left: 32%;\\r\\n    font-family: SFUIText-Regular, Segoe UI, Helvetica Neue, Helvetica, Arial, sans-serif;\\r\\n  }\\r\\n\\r\\n.contact-header-newmessage {\\r\\n    min-width: 32px;\\r\\n    float: right;\\r\\n    height: 100%;\\r\\n    width: 40px;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n\\r\\n.contact-header-next {\\r\\n    min-width: 32px;\\r\\n    float: right;\\r\\n    height: 100%;\\r\\n    width: 40px;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n\\r\\n.contact-search {\\r\\n    width: 100%;\\r\\n    height: 60px;\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n  }\\r\\n\\r\\n.contact-body {\\r\\n    /* padding-left: 10px;\\r\\n      padding-right: 10px; */\\r\\n  }\\r\\n\\r\\n.contact-body :hover {\\r\\n    background-color: #e7e7e7\\r\\n  }\\r\\n\\r\\n@media screen and (max-width:420px) {\\r\\n      \\r\\n  }\\r\\n\\r\\n@media screen and (max-width:910px) {\\r\\n  \\r\\n  \\r\\n  }\\r\\n  \"","module.exports = \"<div class=\\\"container\\\">\\r\\n    <div style=\\\"margin-top:74px\\\">\\r\\n        <div class=\\\"contact-header\\\">\\r\\n          <div class=\\\"contact-header-setting\\\">\\r\\n            <i class=\\\"fas fa-address-book\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\r\\n          </div>\\r\\n          <div class=\\\"contact-header-label\\\" id=\\\"contact-header-label\\\">\\r\\n            <h3 style=\\\"margin-top: 10px\\\">Liên lạc</h3>\\r\\n          </div>\\r\\n          <div id=\\\"contact-header-next\\\" class=\\\"contact-header-next\\\" style=\\\"display: none;\\\">\\r\\n            <i class=\\\"fas fa-chevron-right\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"contact-search\\\">\\r\\n          <input [(ngModel)]=\\\"searchTerm\\\" class=\\\"form-control\\\" style=\\\"width:100%\\\" type=\\\"text\\\" placeholder=\\\"Gõ để tìm liên lạc\\\">\\r\\n        </div>\\r\\n          <table class =\\\"table table-hover table-responsive\\\">\\r\\n            <tbody>\\r\\n                <tr *ngFor=\\\"let contact of contacts| searchContacts: searchTerm;let i = index\\\" >\\r\\n                  \\r\\n                    <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n                        <div style=\\\"width:100%;height:100%;padding:10px\\\">\\r\\n                          <div style=\\\"width:20%;height:100%;float: left;display: flex;justify-content: center;align-items: center;max-width: 50px\\\">\\r\\n                            <img src={{contact.profileImage.lowQuality}} style=\\\"height:75%;border-radius: 50%\\\">\\r\\n                          </div>\\r\\n                          <div style=\\\"width:70%;height:100%;float: left;display: flex;align-items: center\\\">\\r\\n                            <div style=\\\"margin-left:10px\\\">\\r\\n                              {{contact.username}}\\r\\n                            </div>\\r\\n                          </div>\\r\\n                          <button id=\\\"{{contact._id}}4\\\" *ngIf=\\\"contact.notAcceptedFriendFirst\\\"  (click)=\\\"accept(contact,4,i)\\\" type=\\\"button\\\" class=\\\"btn btn-success btn-lg\\\" >Đồng ý</button>\\r\\n                          <button id=\\\"{{contact._id}}3\\\" *ngIf=\\\"contact.notAcceptedFriendSecond\\\"  (click)=\\\"delete(contact,3,i)\\\" type=\\\"button\\\" class=\\\"btn btn-info btn-lg\\\" >Đã yêu cầu</button>\\r\\n                          <button id=\\\"{{contact._id}}2\\\" *ngIf=\\\"contact.acceptedFriend\\\" (click)=\\\"delete(contact,2,i)\\\" type=\\\"button\\\" class=\\\"btn btn-warning btn-lg\\\" >Huỷ kết bạn</button>\\r\\n                          <button id=\\\"{{contact._id}}1\\\" *ngIf=\\\"contact.notFriend\\\" (click)=\\\"add(contact,i)\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-lg\\\">Kết bạn</button>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </tr>\\r\\n            </tbody>\\r\\n          </table>\\r\\n      </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\"","import { Component, OnInit } from \"@angular/core\";\r\nimport { UserService } from \"../../services/user.service\";\r\nimport { FriendService } from \"../../services/friend.service\";\r\nimport { SocketService } from '../../services/socket.service';\r\nimport { NotificationService } from '../../services/notification.service';\r\ndeclare var $: any;\r\n@Component({\r\n  selector: \"app-contacts\",\r\n  templateUrl: \"./contacts.component.html\",\r\n  styleUrls: [\"./contacts.component.css\"]\r\n})\r\nexport class ContactsComponent implements OnInit {\r\n  searchTerm: string = \"\";\r\n  contacts = [];\r\n  notAcceptedFriendsFirst = [];\r\n  notAcceptedFriendsSecond = [];\r\n  acceptedFriends = [];\r\n  myInfo: any = {};\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private friendService: FriendService,\r\n    private socketService: SocketService,\r\n    private notificationService: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.loadContacts();\r\n    this.userService.getMe('low').subscribe(me => {\r\n      if(!me) return;\r\n      if(me.success){\r\n        this.myInfo = me.user;\r\n      }\r\n    })\r\n  }\r\n\r\n  async loadFriends() {\r\n    var data1 = await this.friendService.getFriends(\"true\").toPromise();\r\n    this.acceptedFriends = data1.friends;\r\n    var data2 = await this.friendService.getFriends(\"false\").toPromise();\r\n    this.notAcceptedFriendsFirst = data2.friendsFirst;\r\n    this.notAcceptedFriendsSecond = data2.friendsSecond;\r\n  }\r\n  async loadContacts() {\r\n    await this.loadFriends();\r\n    console.log(this.acceptedFriends);\r\n    var data = await this.userService.getAllUsers().toPromise();\r\n    if (data.success) {\r\n      this.contacts = data.users;\r\n      for (let i = 0; i < this.contacts.length; i++) {\r\n        if (this.acceptedFriends.includes(this.contacts[i]._id))\r\n          this.contacts[i].acceptedFriend = true;\r\n        else if (this.notAcceptedFriendsFirst.includes(this.contacts[i]._id))\r\n          this.contacts[i].notAcceptedFriendFirst = true;\r\n        else if (this.notAcceptedFriendsSecond.includes(this.contacts[i]._id))\r\n          this.contacts[i].notAcceptedFriendSecond = true;\r\n        else this.contacts[i].notFriend = true;\r\n      }\r\n    } else {\r\n    }\r\n  }\r\n\r\n  async delete(user, x, i) {\r\n    var data = await this.friendService.deleteFriend(user._id).toPromise();\r\n    if (data.success) {\r\n      this.contacts[i].notFriend = true;\r\n      this.contacts[i].notAcceptedFriendFirst = false;\r\n      this.contacts[i].notAcceptedFriendSecond = false;\r\n      this.contacts[i].acceptedFriend = false;\r\n      var btn = $(\"#\" + user._id + x);\r\n      console.log(btn);\r\n      btn.removeClass();\r\n      btn.addClass(\"btn btn-lg btn-primary\");\r\n      btn.text(\"Kết bạn\");\r\n    }\r\n  }\r\n\r\n  async accept(user, x, i) {\r\n    var data = await this.friendService.acceptFriend(user._id).toPromise();\r\n    if (data.success) {\r\n      this.contacts[i].notFriend = false;\r\n      this.contacts[i].notAcceptedFriendFirst = false;\r\n      this.contacts[i].notAcceptedFriendSecond = false;\r\n      this.contacts[i].acceptedFriend = true;\r\n      var btn = $(\"#\" + user._id + x);\r\n      console.log(btn);\r\n      btn.removeClass();\r\n      btn.addClass(\"btn btn-lg btn-warning\");\r\n      btn.text(\"Huỷ kết bạn\");\r\n    }\r\n  }\r\n\r\n  async add(user, i) {\r\n    var data = await this.friendService.addFriend(user._id).toPromise();\r\n    console.log(data);\r\n    if (data.success) {\r\n      this.contacts[i].notAcceptedFriendSecond = true;\r\n      this.contacts[i].notAcceptedFriendFirst = false;\r\n      this.contacts[i].notFriend = false;\r\n      this.contacts[i].acceptedFriend = false;\r\n      var btn = $(\"#\" + user._id + \"1\");\r\n      btn.removeClass();\r\n      btn.addClass(\"btn btn-lg btn-info\");\r\n      btn.text(\"Đã gửi lời mời\");\r\n      this.socketService.emitSendFriendRequest(this.myInfo,user._id);\r\n      this.notificationService.createNotifications(user._id,{\r\n        typeNotification: 'friend-request'\r\n      },Date.now()).subscribe(data => {});\r\n    }\r\n  }\r\n}\r\n","module.exports = \".conversation-header {\\r\\n  width: 100%;\\r\\n  height: 60px;\\r\\n  border-bottom: solid;\\r\\n  border-color: #e7e7e7;\\r\\n  border-width: thin;\\r\\n}\\r\\n\\r\\n.conversation-header-username {\\r\\n  float: left;\\r\\n  height: 60px;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-weight: 400;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\n.conversation-header-call {\\r\\n  float: left;\\r\\n  width: 50px;\\r\\n  height: 60px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.conversation-header-info {\\r\\n  float: left;\\r\\n  width: 50px;\\r\\n  height: 50px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.conversation-icon {\\r\\n  float: right;\\r\\n  width: 100px;\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.conversation-body {\\r\\n  width: 100%;\\r\\n  overflow-y: scroll;\\r\\n  overflow-x: hidden;\\r\\n}\\r\\n\\r\\n.conversation-body::-webkit-scrollbar-thumb {\\r\\n  border-radius: 13px;\\r\\n  width: 9px;\\r\\n  background-color: #79879b;\\r\\n}\\r\\n\\r\\n.conversation-body::-webkit-scrollbar {\\r\\n  width: 9px;\\r\\n  border-radius: 13px;\\r\\n  /* height: 8px; */\\r\\n  background-color: #eff1f4;\\r\\n  /* or add it to the track */\\r\\n  /* -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\\r\\n\\tborder-radius: 10px;\\r\\n    background-color: #F5F5F5;\\r\\n    width: 12px;\\r\\n    background-color: #F5F5F5;\\r\\n    height:100%; */\\r\\n}\\r\\n\\r\\n.confirm-message {\\r\\n  border-radius: 20px;\\r\\n  height: 15px;\\r\\n  text-align: center;\\r\\n  font-size: 10px;\\r\\n  float: right;\\r\\n  margin-right: 10px;\\r\\n  border: solid transparent;\\r\\n  background-color: #f1f0f0;\\r\\n}\\r\\n\\r\\n.custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  background-color: rgb(0, 0, 0);\\r\\n  /* Fallback color */\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.modal-options-content:hover {\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n.info-conversation-component {\\r\\n  width: 350px;\\r\\n  float: right;\\r\\n}\\r\\n\\r\\n.loading-messages {\\r\\n  width: 100%;\\r\\n  height: 30px;\\r\\n  position: absolute;\\r\\n  background-color: transparent;\\r\\n  z-index: 2;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-weight: 400;\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n.conversation-header-previous{\\r\\n  float: left;\\r\\n  height: 100%;\\r\\n  width: 40px;\\r\\n  cursor: pointer;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center\\r\\n}\\r\\n\\r\\n@media screen and (max-width:900px) {\\r\\n  #seen-modal{\\r\\n    width: 100%\\r\\n  }\\r\\n  \\r\\n}\\r\\n\"","module.exports = \"<div style=\\\"margin-top:74px\\\">\\n  <div id=\\\"conversation-header\\\" class=\\\"conversation-header\\\">\\n    <div (click)='onClickPreviousNav()' id=\\\"conversation-header-previous\\\" class=\\\"conversation-header-previous\\\" *ngIf='showNavPrevious'>\\n      <i class=\\\"fas fa-chevron-left\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\n    </div>\\n    <div id=\\\"conversation-header-username\\\" class=\\\"conversation-header-username\\\">\\n      <div style=\\\"float:left;width:100%;height: 30px;text-align: center;margin-top: 12px;\\\">\\n        {{roomchatName}}\\n      </div>\\n      <div style=\\\"float:left;width:100%;height: 30px;text-align: center;margin-top: -12px;display: flex;justify-content: center;align-items: center\\\">\\n        <div *ngIf=\\\"isActive\\\" style=\\\"width:8px;height:8px;border:transparent;border-radius: 50%;background-color: springgreen;margin-right:5px\\\">\\n\\n        </div>\\n        <div *ngIf=\\\"isIdle\\\" style=\\\"width:8px;height:8px;border:transparent;border-radius: 50%;background-color: red;margin-right:5px\\\">\\n\\n        </div>\\n        <div *ngIf=\\\"isLoading\\\" style=\\\"font-size:13px;color: rgba(0, 0, 0, .40)\\\">\\n          Đang tải...\\n        </div>\\n        <div *ngIf=\\\"!isLoading\\\" style=\\\"font-size:13px;color: rgba(0, 0, 0, .40)\\\">\\n          {{timeActive | timeAgo : isIdle}}\\n        </div>\\n\\n      </div>\\n      <!-- <div style=\\\"margin-top: 7px\\\">{{roomchatName}}</div> -->\\n    </div>\\n    <div class=\\\"conversation-icon\\\">\\n      <div id=\\\"call-icon\\\" class=\\\"conversation-header-call\\\" (click)=\\\"openCallWindow()\\\">\\n        <i class=\\\"fas fa-phone\\\" style=\\\"font-size:30px;margin-top:6px\\\"></i>\\n      </div>\\n      <div (click)=\\\"showOrHideInfo()\\\" class=\\\"conversation-header-info\\\">\\n        <i class=\\\"fas fa-info-circle\\\" style=\\\"font-size:30px;margin-top:6px;cursor: pointer;\\\"></i>\\n      </div>\\n    </div>\\n\\n  </div>\\n  <div id=\\\"conversation-side\\\" style=\\\"height:auto;display: inline-block\\\">\\n    <div *ngIf=\\\"loadingMessages\\\" id=\\\"loading-messages\\\" class=\\\"loading-messages\\\">\\n      <img src=\\\"../../../assets//loading-1.gif\\\" style=\\\"width:17px\\\">&nbsp;\\n      Đang tải...\\n    </div>\\n    <div id=\\\"conversation-body\\\" class=\\\"conversation-body\\\" (scroll)=\\\"onScrollMessages()\\\">\\n      <div style=\\\"width: 100%;float:left\\\" *ngFor=\\\"let message of messages\\\">\\n        <app-message [roomchatID]=\\\"roomchatID\\\" [previousLastMessageID]=\\\"previousLastMessageID\\\" style=\\\"width: 100%;height: 100%\\\" [message]=\\\"message\\\"\\n          [myID]=\\\"myID\\\" [lastMessageID]=\\\"lastMessageID\\\" [previousUserID]=\\\"previousUserID\\\" [lastUserID]=\\\"lastUserID\\\"></app-message>\\n      </div>\\n      <div class=\\\"confirm-message\\\">\\n        <div *ngIf=\\\"confirmation.sent\\\" style=\\\"margin-top:-2px;width: 40px;\\\" id=\\\"sent-confirmation\\\">\\n          Đã gửi\\n        </div>\\n        <div *ngIf=\\\"confirmation.received\\\" style=\\\"margin-top:-2px;width: 50px;\\\" id=\\\"sent-confirmation\\\">\\n          Đã nhận\\n        </div>\\n        <div *ngIf=\\\"confirmation.sending\\\" style=\\\"margin-top:-2px;width: 52px;\\\" id=\\\"sent-confirmation\\\">\\n          Đang gửi\\n        </div>\\n        <div id=\\\"seen-toggle\\\" (click)=\\\"seeWhoSeen()\\\" *ngIf=\\\"confirmation.seen\\\" style=\\\"margin-top:-2px;width: 52px;cursor: pointer;\\\" id=\\\"sent-confirmation\\\">\\n          Đã xem\\n        </div>\\n      </div>\\n      <div *ngIf=\\\"confirmation.typing\\\" style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;line-height: 1.28;font-weight: 400;margin-top:-2px;width: 80px;height:25px;font-size: 13px;float: left;margin-left: 40px;color: rgba(0, 0, 0, .40)\\\">\\n        Đang nhập...\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height:59px\\\">\\n      <app-input [usersInRoomchat]=\\\"usersInRoomchat\\\"></app-input>\\n    </div>\\n  </div>\\n\\n  <div [hidden]=\\\"!showConversationInfo\\\" id=\\\"info-conversation-component\\\" class=\\\"info-conversation-component\\\">\\n    <app-info-conversation></app-info-conversation>\\n  </div>\\n\\n\\n  <div (clickOutside)=\\\"closeSeenModal($event)\\\" *ngIf=\\\"showSeenModal\\\" id=\\\"seen-modal\\\" class=\\\"custom-modal\\\">\\n    <div class=\\\"custom-modal-content\\\" style=\\\"height: auto\\\">\\n      <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n        <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n          Những người đã xem\\n        </div>\\n      </div>\\n      <div class=\\\"modal-options-content\\\">\\n        <div *ngFor=\\\"let seenUser of infoSeenBy\\\" style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;width:100%;height:50px;cursor: pointer;\\\">\\n          <div style=\\\"width:15%;height:100%;display: flex;justify-content: center;align-items: center\\\">\\n            <img src={{seenUser.profileImage.lowQuality}} style=\\\"border-radius: 50%;width:30%; height:auto;float:left\\\">\\n          </div>\\n          <div style=\\\"margin-top:-30px;width:85%;height:100%;display: flex;align-items: center;float:right\\\">\\n            {{seenUser.username}}\\n          </div>\\n        </div>\\n      </div>\\n      <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n        <button (click)=\\\"closeSeenModal()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n          OK\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import {\r\n  Component,\r\n  OnInit,\r\n  ChangeDetectorRef,\r\n  HostListener,\r\n  OnDestroy,\r\n  AfterViewInit\r\n} from \"@angular/core\";\r\nimport { ComponentCommunicationService } from \"../../services/component-communication.service\";\r\nimport { MessageService } from \"../../services/message.service\";\r\nimport { UserService } from \"../../services/user.service\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\nimport { RoomchatService } from \"../../services/roomchat.service\";\r\nimport { RoomchatUserService } from \"../../services/roomchat-user.service\";\r\nimport { Router, ActivatedRoute, RouterStateSnapshot } from \"@angular/router\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\nconst urlCallVideo = \"http://localhost:3333/services/call?userid=\";\r\n\r\n@Component({\r\n  selector: \"app-conversation\",\r\n  templateUrl: \"./conversation.component.html\",\r\n  styleUrls: [\"./conversation.component.css\"]\r\n})\r\nexport class ConversationComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  roomchatID: string = \"\";\r\n  roomchatName: string = \"\";\r\n  messages = [];\r\n  lastMessageID: string = \"\";\r\n  lastUserID: string = \"\";\r\n  previousLastMessageID: string = \"\"; // tin nhan sau tin nhan cuoi cung\r\n  previousUserID: string = \"\";\r\n  IDSeenBy: Array<string> = [];\r\n  infoSeenBy: Array<any> = [];\r\n  showSeenModal: boolean = false;\r\n  usersInRoomchat: Array<string> = [];\r\n  myID: string = \"\";\r\n  timeActive: number = 0;\r\n  timeDuration: number = 10;\r\n  isActive: boolean = false;\r\n  isIdle: boolean = false;\r\n  moveMouseTime: number = Date.now();\r\n  subParams: Subscription;\r\n  subParentParams: Subscription;\r\n  isLoading: boolean = false;\r\n  confirmation: any = {\r\n    sent: false,\r\n    sending: false,\r\n    received: false,\r\n    seen: false,\r\n    typing: false,\r\n    timeConfirm: Date.now()\r\n  };\r\n  receiveTimestampInterval: any;\r\n  listenToStopTypingInterval: any;\r\n  a: Subscription;\r\n  b: Subscription;\r\n  c: Subscription;\r\n  d: Subscription;\r\n  e: Subscription;\r\n  f: Subscription;\r\n  getUserSubscription: Subscription;\r\n  continueToLoad: boolean = true;\r\n  previousTimeSeq: number = Date.now() + 100000;\r\n  loadingMessages: boolean = false;\r\n  showConversationInfo: boolean = true;\r\n  showNavPrevious: boolean = false;\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onResize(event) {\r\n    let inputHeight = document.getElementById(\"input-component\").clientHeight;\r\n    let conversationHeaderHeight = document.getElementById(\r\n      \"conversation-header\"\r\n    ).clientHeight;\r\n    let navbarHeight = document.getElementById(\"navbar-component\").clientHeight;\r\n    let conversationHeight = window.innerHeight - 190;\r\n    document\r\n      .getElementById(\"conversation-body\")\r\n      .setAttribute(\"style\", \"height: \" + conversationHeight + \"px\");\r\n    let conversationWidth =\r\n      document.getElementById(\"conversation-header\").clientWidth - 110;\r\n    if (this.showNavPrevious) {\r\n      conversationWidth -= 40;\r\n    }\r\n    document\r\n      .getElementById(\"conversation-header-username\")\r\n      .setAttribute(\"style\", \"width: \" + conversationWidth + \"px\");\r\n    if (this.showConversationInfo) {\r\n      console.log(\"input-height: \", inputHeight);\r\n      let conversationSideWidth =\r\n        document.getElementById(\"conversation-header\").clientWidth - 351;\r\n      document.getElementById(\"conversation-side\").style.width =\r\n        conversationSideWidth + \"px\";\r\n    } else {\r\n      let conversationSideWidth = document.getElementById(\"conversation-header\")\r\n        .clientWidth;\r\n      document.getElementById(\"conversation-side\").style.width =\r\n        conversationSideWidth + \"px\";\r\n    }\r\n    document.getElementById(\"input-component\").style.width =\r\n      document.getElementById(\"conversation-side\").clientWidth + \"px\";\r\n    // let w = window.innerWidth;\r\n    // if (w >= 900) {\r\n    //   this.showConversationInfo = true;\r\n    //   let conversationSideWidth = document.getElementById('conversation-header').clientWidth - 351;\r\n    //   document.getElementById('conversation-side').style.width = conversationSideWidth + 'px';\r\n    // } else {\r\n    //   this.showConversationInfo = false;\r\n    //   let conversationSideWidth = document.getElementById('conversation-header').clientWidth;\r\n    //   document.getElementById('conversation-side').style.width = conversationSideWidth + 'px';\r\n    // }\r\n  }\r\n  constructor(\r\n    private componentCommunicationService: ComponentCommunicationService,\r\n    private messageService: MessageService,\r\n    private socketService: SocketService,\r\n    private cdR: ChangeDetectorRef,\r\n    private roomchatUserService: RoomchatUserService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private userService: UserService,\r\n    private roomchatService: RoomchatService\r\n  ) {\r\n    this.router.routeReuseStrategy.shouldReuseRoute = function(){\r\n      return false;\r\n   }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.roomchatID = this.getParams();\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      this.router.navigate([\"conversation\", this.roomchatID]);\r\n    } else {\r\n      this.router.navigate([\"home/conversation\", this.roomchatID]);\r\n    }\r\n    this.listenToStopTypingInterval = this.listenToStopTyping();\r\n    this.isLoading = true;\r\n    this.confirmInit();\r\n    this.loadingMessages = true;\r\n    this.cdR.detectChanges();\r\n    this.adjustHTMLResponsive(w);\r\n    this.a = this.roomchatService\r\n      .getRoomchat(this.roomchatID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          this.loadingMessages = false;\r\n          this.messages = [];\r\n          this.roomchatName = this.processRoomchatName(\r\n            data.roomchat.firstUserInRoomchat.username,\r\n            data.roomchat.numberOfUserInRoomchat - 1,\r\n            data.roomchat.typeRoomchat\r\n          );\r\n          this.IDSeenBy = data.roomchat.roomchat.isSeenBy;\r\n          if (this.IDSeenBy.length !== 0) {\r\n            this.confirmation.seen = true;\r\n          }\r\n          this.myID = data.myID;\r\n          this.socketService.confirmCompleteLoad();\r\n          this.b = this.roomchatUserService\r\n            .getRoomchatUsers(this.roomchatID)\r\n            .subscribe(dataa => {\r\n              if (dataa && dataa.success) {\r\n                this.usersInRoomchat = dataa.roomchatUsers\r\n                  .map(el => el.userID)\r\n                  .filter(el => el !== this.myID);\r\n                if (this.usersInRoomchat.length > 2) {\r\n                  document.getElementById(\"call-icon\").style.opacity = \"0.6\";\r\n                } else {\r\n                  document.getElementById(\"call-icon\").style.cursor = \"pointer\";\r\n                }\r\n              }\r\n            });\r\n          this.componentCommunicationService.setData({\r\n            fromComponent: \"conversation\",\r\n            roomchatID: this.roomchatID\r\n          });\r\n          this.previousTimeSeq = Date.now() + 1000000;\r\n          this.c = this.messageService\r\n            .getMessages(this.roomchatID, this.previousTimeSeq, 20)\r\n            .subscribe(data => {\r\n              if (data.success) {\r\n                let index = 0;\r\n                let previousUserID = \"\";\r\n                let messagesLength = data.messages.length;\r\n                if (messagesLength === 0) return;\r\n                for (let message of data.messages) {\r\n                  this.messages.push({\r\n                    userID: message.userProfile._id,\r\n                    username: message.userProfile.username,\r\n                    _id: message.message._id,\r\n                    content: message.message.content,\r\n                    attach: message.message.attach,\r\n                    fileName: message.message.fileName,\r\n                    fileType: message.message.fileType,\r\n                    profileImage: message.userProfile.profileImage.lowQuality,\r\n                    time: message.message.time,\r\n                    displayLastInfo: false\r\n                  });\r\n                  if (index > 0) {\r\n                    if (message.userProfile._id !== previousUserID) {\r\n                      this.messages[index - 1].displayLastInfo = true;\r\n                    }\r\n                    if (\r\n                      messagesLength - 1 === index &&\r\n                      this.myID !== message.userProfile._id\r\n                    ) {\r\n                      this.messages[index - 1].displayLastInfo = false;\r\n                      this.messages[index].displayLastInfo = true;\r\n                    }\r\n                  }\r\n\r\n                  previousUserID = message.userProfile._id;\r\n                  index++;\r\n                }\r\n                if (\r\n                  this.messages[messagesLength - 1].userID + \"\" === this.myID &&\r\n                  !this.confirmation.seen\r\n                ) {\r\n                  console.log(\"check snt\");\r\n                  this.confirmation.sent = true;\r\n                  this.confirmation.received = false;\r\n                }\r\n                this.previousTimeSeq = this.messages[0].time;\r\n                let scrollElement = document.getElementById(\r\n                  \"conversation-body\"\r\n                );\r\n                this.cdR.detectChanges();\r\n                scrollElement.scrollTop = scrollElement.scrollHeight;\r\n              }\r\n            });\r\n        }\r\n      });\r\n\r\n    this.d = this.componentCommunicationService.getData().subscribe(data => {\r\n      if (!data) return;\r\n      if (data.fromComponent === \"roomchat\") {\r\n        if (data.type === \"confirm-loadroomchats\") {\r\n          this.confirmLoadParams(this.getParams());\r\n        }\r\n      } else if (data.fromComponent === \"input\") {\r\n        if (data.status === \"sending\") {\r\n          this.confirmation.sending = true;\r\n        } else if (data.status === \"sent\") {\r\n          this.confirmation.received = false;\r\n          let contentText = data.contentText;\r\n          let contentFile = data.contentFile;\r\n          let fileType = data.fileType;\r\n          let messageID = data.messageID;\r\n          let fileName = data.fileName;\r\n          let username = data.username;\r\n          this.messages.push({\r\n            userID: this.myID,\r\n            username: username,\r\n            _id: messageID,\r\n            content: contentText,\r\n            fileType: fileType,\r\n            fileName: fileName,\r\n            attach: contentFile,\r\n            profileImage: \"\",\r\n            time: Date.now()\r\n          });\r\n          let scrollElement = document.getElementById(\"conversation-body\");\r\n          this.cdR.detectChanges();\r\n          scrollElement.scrollTop = scrollElement.scrollHeight;\r\n        } else if (data.type === \"adjust-conversation-body\") {\r\n          let conversationHeight =\r\n            document.getElementById(\"conversation-body\").clientHeight - 100;\r\n          document\r\n            .getElementById(\"conversation-body\")\r\n            .setAttribute(\"style\", \"height: \" + conversationHeight + \"px\");\r\n        }\r\n      } else if (data.fromComponent === \"app\" && data.type === \"idle\") {\r\n        if (\r\n          this.usersInRoomchat.length !== 0 &&\r\n          this.usersInRoomchat.includes(data.fromUserID + \"\")\r\n        ) {\r\n          this.isActive = false;\r\n          this.isIdle = true;\r\n        }\r\n      } else if (data.fromComponent === \"app\" && data.type === \"reactive\") {\r\n        if (\r\n          this.usersInRoomchat.length !== 0 &&\r\n          this.usersInRoomchat.includes(data.fromUserID + \"\")\r\n        ) {\r\n          this.isActive = true;\r\n          this.isIdle = false;\r\n        }\r\n      } else if (data.fromComponent === \"app\" && data.type === \"timestamp\") {\r\n        if (\r\n          this.usersInRoomchat.length !== 0 &&\r\n          this.usersInRoomchat.includes(data.fromUserID + \"\")\r\n        ) {\r\n          this.timeActive = data.time;\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"timestamp-on-init\"\r\n      ) {\r\n        console.log(\"dataaa___ \", data);\r\n        let waitForUsersInRoomchat = setInterval(() => {\r\n          if (this.usersInRoomchat.length !== 0) {\r\n            let mostRecentTime = 0;\r\n            for (let userInRoomchat of this.usersInRoomchat) {\r\n              for (let timeActive of data.dataTimeActive) {\r\n                if (userInRoomchat === timeActive._id + \"\") {\r\n                  if (timeActive.timeActive > mostRecentTime) {\r\n                    mostRecentTime = timeActive.timeActive;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            this.timeActive = mostRecentTime;\r\n            this.isLoading = false;\r\n            clearInterval(waitForUsersInRoomchat);\r\n          }\r\n        }, 10);\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"receive-message\"\r\n      ) {\r\n        if (data.data.roomchatID !== this.roomchatID) return;\r\n        if (data.data.type === \"confirm\") {\r\n          this.confirmation.sent = true;\r\n          this.confirmation.sending = false;\r\n        } else if (data.data.type === \"message\") {\r\n          //khi co tin nhan moi den\r\n          this.roomchatService\r\n            .resetSeenUsers(this.roomchatID)\r\n            .subscribe(data => {});\r\n          if (this.messages.length !== 0) {\r\n            this.messages[this.messages.length - 1].displayLastInfo = false;\r\n          }\r\n\r\n          this.confirmation.sent = false;\r\n          this.confirmation.sending = false;\r\n          this.confirmation.received = false;\r\n          this.confirmation.seen = false;\r\n          this.messages.push({\r\n            userID: data.data.fromUserID,\r\n            _id: data.data.messageID,\r\n            username: data.data.username,\r\n            content: data.data.contentText,\r\n            attach: data.data.contentFile,\r\n            fileName: data.data.fileName,\r\n            fileType: data.data.fileType,\r\n            profileImage: data.data.profileImage,\r\n            time: data.data.time,\r\n            displayLastInfo: true\r\n          });\r\n          let scrollElement = document.getElementById(\"conversation-body\");\r\n          this.cdR.detectChanges();\r\n          scrollElement.scrollTop = scrollElement.scrollHeight;\r\n        }\r\n      } else if (data.fromComponent === \"app\" && data.type === \"typing\") {\r\n        if (data.data.roomchatID !== this.roomchatID) return;\r\n        if (data.data.status === \"typing\") {\r\n          this.confirmation.typing = true;\r\n          this.confirmation.timeConfirm = data.data.time;\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"last-message\" &&\r\n        data.type === \"delete-all-messages\"\r\n      ) {\r\n        if (data.roomchatID !== this.roomchatID) return;\r\n        this.messages = [];\r\n        this.e = this.messageService\r\n          .getMessages(this.roomchatID, this.previousTimeSeq, 15)\r\n          .subscribe(data => {\r\n            if (data.success) {\r\n              for (let message of data.messages) {\r\n                this.messages.push({\r\n                  userID: message.userProfile._id,\r\n                  username: message.userProfile.username,\r\n                  _id: message.message._id,\r\n                  content: message.message.content,\r\n                  fileName: message.message.fileName,\r\n                  attach: message.message.attach,\r\n                  fileType: message.message.fileType,\r\n                  profileImage: message.userProfile.profileImage.lowQuality,\r\n                  time: message.message.time\r\n                });\r\n              }\r\n              this.confirmation.sent = false;\r\n              this.confirmation.sending = false;\r\n              this.previousTimeSeq = this.messages[0].time;\r\n              let scrollElement = document.getElementById(\"conversation-body\");\r\n              this.cdR.detectChanges();\r\n              scrollElement.scrollTop = scrollElement.scrollHeight;\r\n            }\r\n          });\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"confirm-received-message\"\r\n      ) {\r\n        if (data.data.roomchatID !== this.roomchatID) return;\r\n        this.confirmation.received = true;\r\n        this.confirmation.sent = false;\r\n        this.confirmation.sending = false;\r\n        this.confirmation.seen = false;\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"confirm-seen-message\"\r\n      ) {\r\n        if (data.data.roomchatID !== this.roomchatID) return;\r\n        if (!this.IDSeenBy.includes(data.data.userID + \"\")) {\r\n          this.IDSeenBy.push(data.data.userID);\r\n          this.roomchatService\r\n            .addSeenUsers(this.roomchatID, data.data.userID)\r\n            .subscribe(data => {\r\n              console.log(\"add_____\", data);\r\n            });\r\n        }\r\n        this.confirmation.received = false;\r\n        this.confirmation.sent = false;\r\n        this.confirmation.sending = false;\r\n        this.confirmation.seen = true;\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"check-valid-seen\"\r\n      ) {\r\n        if (data.data.roomchatID !== this.roomchatID) return;\r\n        let isSentByOther;\r\n        if (this.messages.length !== 0) {\r\n          isSentByOther =\r\n            this.messages[this.messages.length - 1].userID + \"\" !==\r\n            this.myID + \"\";\r\n        } else {\r\n          isSentByOther = false;\r\n        }\r\n        if (isSentByOther) {\r\n          this.componentCommunicationService.setData({\r\n            fromComponent: \"conversation\",\r\n            toComponent: \"app\",\r\n            type: \"is-valid-seen\",\r\n            roomchatID: data.data.roomchatID,\r\n            userID: data.data.userID\r\n          });\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"message\" &&\r\n        data.type === \"delete-one-message\"\r\n      ) {\r\n        let deletedMessageID = data.messageID;\r\n        console.log(\"deref%%%: \", deletedMessageID);\r\n        for (let i = 0; i < this.messages.length; i++) {\r\n          if (this.messages[i]._id === deletedMessageID) {\r\n            this.messages.splice(i, 1);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // this.socketService.receiveMessage(data => {\r\n    //   console.log('data receive: ', data)\r\n    //   if (!data) return;\r\n    //   if (data.type === 'confirm') {\r\n    //     this.confirmation.sent = true;\r\n    //     this.confirmation.sending = false;\r\n    //   } else if (data.type === 'message') {\r\n    //     this.messages.push({\r\n    //       userID: data.fromUserID,\r\n    //       _id: data.messageID,\r\n    //       content: data.contentText,\r\n    //       attach: data.contentFile,\r\n    //       profileImage: data.profileImage,\r\n    //       time: data.time\r\n    //     })\r\n    //     let scrollElement = document.getElementById('conversation-body');\r\n    //     this.cdR.detectChanges();\r\n    //     scrollElement.scrollTop = scrollElement.scrollHeight;\r\n    //   }\r\n    // });\r\n\r\n    // this.socketService.receiveTimestamp().subscribe(data => {\r\n    //   if (!data) return;\r\n    //   this.timeActive = data.time;\r\n    this.receiveTimestampInterval = setInterval(() => {\r\n      if (Math.abs(this.timeActive - Date.now()) < 5000 && !this.isIdle) {\r\n        this.isActive = true;\r\n        this.isIdle = false;\r\n      } else if (Math.abs(this.timeActive - Date.now()) >= 5000) {\r\n        this.isActive = false;\r\n        this.isIdle = false;\r\n      }\r\n    }, 2000);\r\n    console.log(\"run!!\");\r\n  }\r\n\r\n  ngAfterViewInit() {}\r\n\r\n  ngOnDestroy(): void {\r\n    clearInterval(this.receiveTimestampInterval);\r\n    this.a.unsubscribe();\r\n    if (this.b) {\r\n      this.b.unsubscribe();\r\n    }\r\n    if (this.c) {\r\n      this.c.unsubscribe();\r\n    }\r\n\r\n    this.d.unsubscribe();\r\n    if (this.e) {\r\n      this.e.unsubscribe();\r\n    }\r\n    if (this.listenToStopTypingInterval) {\r\n      clearInterval(this.listenToStopTypingInterval);\r\n    }\r\n    // this.f.unsubscribe();\r\n  }\r\n\r\n  confirmInit() {\r\n    this.componentCommunicationService.setData({\r\n      fromComponent: \"conversation\",\r\n      type: \"confirm-init\"\r\n    });\r\n  }\r\n\r\n  confirmLoadParams(roomchatID) {\r\n    this.componentCommunicationService.setData({\r\n      fromComponent: \"conversation\",\r\n      type: \"confirm-loadparams\",\r\n      roomchatID: roomchatID\r\n    });\r\n  }\r\n\r\n  getParams() {\r\n    let url = this.router.routerState.snapshot.url;\r\n    let tempLength = url.split(\"/\").length;\r\n    return url.split(\"/\")[tempLength - 1] + \"\";\r\n  }\r\n\r\n  processRoomchatName(firstUser, numberOfUsers, typeRoomchat) {\r\n    if (typeRoomchat === \"private\") {\r\n      return firstUser;\r\n    } else if (typeRoomchat === \"group\") {\r\n      return firstUser + \" và \" + numberOfUsers + \" người khác\";\r\n    }\r\n  }\r\n\r\n  onClickPreviousNav() {\r\n    return this.router.navigate([\"roomchats\"]);\r\n  }\r\n\r\n  seeWhoSeen() {\r\n    this.showSeenModal = true;\r\n    this.getUserSubscription = this.userService\r\n      .getUsersFromIDs(this.IDSeenBy)\r\n      .subscribe(data => {\r\n        console.log(\"runnn\", data);\r\n        if (data && data.success) {\r\n          this.infoSeenBy = data.users;\r\n          console.log(\"info: \", this.infoSeenBy);\r\n        }\r\n      });\r\n    this.cdR.detectChanges();\r\n  }\r\n\r\n  closeSeenModal($event) {\r\n    if ($event && $event.target.id === \"sent-confirmation\") return;\r\n    this.showSeenModal = false;\r\n  }\r\n\r\n  showOrHideInfo() {\r\n    this.showConversationInfo = !this.showConversationInfo;\r\n    let w = window.innerWidth;\r\n    let infoConvWidth;\r\n    let hideInputComp = false;\r\n    if (w < 900) {\r\n      infoConvWidth = document.getElementById(\"conversation-header\")\r\n        .clientWidth;\r\n      document.getElementById(\"info-conversation-component\").style.width =\r\n        infoConvWidth + \"px\";\r\n    } else {\r\n      infoConvWidth = 351;\r\n      document.getElementById(\"info-conversation-component\").style.width =\r\n        infoConvWidth + \"px\";\r\n    }\r\n    if (this.showConversationInfo) {\r\n      let conversationSideWidth =\r\n        document.getElementById(\"conversation-header\").clientWidth -\r\n        infoConvWidth;\r\n      if (w < 900) {\r\n        hideInputComp = true;\r\n      }\r\n      document.getElementById(\"conversation-side\").style.width =\r\n        conversationSideWidth + \"px\";\r\n    } else {\r\n      let conversationSideWidth = document.getElementById(\"conversation-header\")\r\n        .clientWidth;\r\n      document.getElementById(\"conversation-side\").style.width =\r\n        conversationSideWidth + \"px\";\r\n    }\r\n    this.componentCommunicationService.setData({\r\n      fromComponent: \"conversation\",\r\n      toComponent: \"input\",\r\n      type: \"adjust-input-comp-width\",\r\n      conversationSideWidth:\r\n        document.getElementById(\"conversation-side\").clientWidth + \"px\",\r\n      hide: hideInputComp\r\n    });\r\n  }\r\n\r\n  openCallWindow() {\r\n    if (this.usersInRoomchat.length > 2) return;\r\n    this.componentCommunicationService.setData({\r\n      fromComponent: \"conversation\",\r\n      type: \"call-video\",\r\n      roomchatID: this.roomchatID,\r\n      usersInRoomchat: this.usersInRoomchat.filter(el => el !== this.myID)\r\n    });\r\n  }\r\n\r\n  listenToStopTyping() {\r\n    return setInterval(() => {\r\n      if (Math.abs(this.confirmation.timeConfirm - Date.now()) > 3000) {\r\n        this.confirmation.typing = false;\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  adjustHTMLResponsive(w) {\r\n    if (w < 900) {\r\n      this.showConversationInfo = false;\r\n      this.showNavPrevious = true;\r\n      let conversationSideWidth = document.getElementById(\"conversation-header\")\r\n        .clientWidth;\r\n      document.getElementById(\"conversation-side\").style.width =\r\n        conversationSideWidth + \"px\";\r\n      document.getElementById(\"loading-messages\").style.width =\r\n        conversationSideWidth + \"px\";\r\n      let conversationUsernameWidth = conversationSideWidth - 150;\r\n      document.getElementById(\"conversation-header-username\").style.width =\r\n        conversationUsernameWidth + \"px\";\r\n    } else {\r\n      this.showConversationInfo = true;\r\n      this.showNavPrevious = false;\r\n      let conversationSideWidth =\r\n        document.getElementById(\"conversation-header\").clientWidth - 351;\r\n      document.getElementById(\"conversation-side\").style.width =\r\n        conversationSideWidth + \"px\";\r\n      document.getElementById(\"loading-messages\").style.width =\r\n        conversationSideWidth + \"px\";\r\n      let conversationUsernameWidth =\r\n        document.getElementById(\"conversation-header\").clientWidth - 110;\r\n      document.getElementById(\"conversation-header-username\").style.width =\r\n        conversationUsernameWidth + \"px\";\r\n    }\r\n    //Chinh header username\r\n    let conversationHeight = window.innerHeight - 190;\r\n    document\r\n      .getElementById(\"conversation-body\")\r\n      .setAttribute(\"style\", \"height: \" + conversationHeight + \"px\");\r\n\r\n    //chinh input\r\n    console.log(\r\n      \"^&NJ: \",\r\n      document.getElementById(\"conversation-side\").clientWidth\r\n    );\r\n    document.getElementById(\"input-component\").style.width =\r\n      document.getElementById(\"conversation-side\").clientWidth + \"px\";\r\n    let inputFile = document.getElementById(\"input-file\").clientWidth;\r\n    let inputComponent = document.getElementById(\"input-component\").clientWidth;\r\n    let off = inputComponent - inputFile - 20;\r\n    document.getElementById(\"input-text\").style.width = off + \"px\";\r\n\r\n    //chinh info conversation\r\n    let conversationSideHeight = document.getElementById(\"conversation-side\")\r\n      .clientHeight;\r\n    console.log(\"fggg: \", conversationSideHeight);\r\n    document.getElementById(\"info-conversation-component\").style.height =\r\n      conversationSideHeight + \"px\";\r\n    let infoConversationBodyHeight = conversationSideHeight - 70;\r\n    document.getElementById(\"info-conversation-body\").style.height =\r\n      infoConversationBodyHeight + \"px\";\r\n  }\r\n\r\n  onScrollMessages() {\r\n    let scrollTop = document.getElementById(\"conversation-body\").scrollTop;\r\n    let scrollHeight = document.getElementById(\"conversation-body\")\r\n      .scrollHeight;\r\n    let clientHeight = document.getElementById(\"conversation-body\")\r\n      .clientHeight;\r\n    if (scrollTop < 10 && this.continueToLoad) {\r\n      console.log(\"load new messages\");\r\n      this.continueToLoad = false;\r\n      this.loadingMessages = true;\r\n      this.cdR.detectChanges();\r\n      let conversationSideWidth =\r\n        document.getElementById(\"conversation-header\").clientWidth - 351;\r\n      document.getElementById(\"loading-messages\").style.width =\r\n        conversationSideWidth + \"px\";\r\n      this.c = this.messageService\r\n        .getMessages(this.roomchatID, this.previousTimeSeq, 4)\r\n        .subscribe(data => {\r\n          if (data.success) {\r\n            this.loadingMessages = false;\r\n            this.continueToLoad = true;\r\n            let messagesLength = data.messages.length;\r\n            if (messagesLength === 0) {\r\n              this.continueToLoad = false;\r\n              return;\r\n            }\r\n\r\n            for (let i = messagesLength - 1; i >= 0; i--) {\r\n              let previousMessageID = this.messages[0].userID;\r\n              let message = data.messages[i];\r\n              this.messages.unshift({\r\n                userID: message.userProfile._id,\r\n                username: message.userProfile.username,\r\n                _id: message.message._id,\r\n                content: message.message.content,\r\n                attach: message.message.attach,\r\n                fileName: message.message.fileName,\r\n                fileType: message.message.fileType,\r\n                profileImage: message.userProfile.profileImage.lowQuality,\r\n                time: message.message.time,\r\n                displayLastInfo: false\r\n              });\r\n              if (previousMessageID !== message.userProfile._id) {\r\n                this.messages[0].displayLastInfo = true;\r\n              }\r\n            }\r\n            this.previousTimeSeq = this.messages[0].time;\r\n          }\r\n        });\r\n    }\r\n  }\r\n}\r\n","module.exports = \".roomchat-component{\\r\\n    width: 25%;\\r\\n    float: left;\\r\\n    border-style: solid;\\r\\n    border-color: #e7e7e7;\\r\\n    border-width: thin;\\r\\n    border-left: none;\\r\\n}\\r\\n\\r\\n.conversation-component{\\r\\n    width: 75%;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n\"","module.exports = \"<div id=\\\"home-component\\\" style=\\\"width:100%\\\">\\n  <div id=\\\"roomchat-component\\\" class=\\\"roomchat-component\\\">\\n    <app-roomchat></app-roomchat>\\n  </div>\\n  <div id=\\\"conversation-component\\\" class=\\\"conversation-component\\\">\\n    <router-outlet></router-outlet>\\n    \\n    <!-- <app-conversation ></app-conversation>\\n    <app-new-message></app-new-message> -->\\n    \\n  </div>\\n</div>\\n\"","import { Component, OnInit, AfterViewInit } from '@angular/core';\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit,AfterViewInit {\n  roomchatID: string = '';\n  constructor(private componentCommunicationService: ComponentCommunicationService) { }\n\n  ngOnInit() {\n    // this.componentCommunicationService.getData().subscribe(data => {\n    //   if(!data) return;\n    //   if((data.fromComponent === 'roomchat'|| data.fromComponent === 'conversation') && data.type === 'responsive-show-roomchat'){\n    //     document.getElementById('roomchat-component').style.width = '100%';\n    //     document.getElementById('conversation-component').style.display = 'none';\n    //   } else if((data.fromComponent === 'roomchat'|| data.fromComponent === 'conversation') && data.type === 'responsive-show-roomchat-revert'){\n    //     document.getElementById('roomchat-component').style.display = 'block';\n    //     document.getElementById('roomchat-component').style.width = '25%';\n    //     document.getElementById('conversation-component').style.display = 'block';\n    //     document.getElementById('conversation-component').style.width = '75%';\n    //   } else if((data.fromComponent === 'last-message' || data.fromComponent === 'conversation') && data.type === 'responsive-show-conversation'){\n    //     document.getElementById('conversation-component').style.display = 'block';\n    //     document.getElementById('conversation-component').style.width = '100%';\n    //     document.getElementById('roomchat-component').style.display = 'none';\n    //   }\n    // })\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n\n\n}\n","module.exports = \".custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  /* Fallback color */\\r\\n  background-color: #0e0e0e;\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.assign-admin-options {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.delete-user-from-group-options {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.modal-options-body {\\r\\n  height: 150px;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n/* .modal-options-body :hover {\\r\\n  background-color: #e7e7e7\\r\\n} */\\r\\n\\r\\n.modal-options-content {\\r\\n  height: 70px;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n}\\r\\n\\r\\n.delete-assign-admin-options {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.result-user-search-profileimage {\\r\\n  width: 60px;\\r\\n  height: 40px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  float: left\\r\\n}\\r\\n\\r\\n.result-user-search-username {\\r\\n  height: 40px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.result-user-search {\\r\\n  width: 100%;\\r\\n  height: 240px;\\r\\n  /* padding-left: 10px;\\r\\n  padding-right: 10px; */\\r\\n  overflow-y: auto;\\r\\n  overflow-x: hidden\\r\\n}\\r\\n\\r\\n.picked-user-search {\\r\\n  width: 100%;\\r\\n  height: 240px;\\r\\n  /* padding-left: 10px;\\r\\n  padding-right: 10px; */\\r\\n  overflow-y: auto;\\r\\n  overflow-x: hidden\\r\\n}\\r\\n\\r\\n.search-list-info-comp {\\r\\n  width: 100%;\\r\\n  height: 60px;\\r\\n  /* padding-top: 10px;\\r\\n  padding-bottom: 10px */\\r\\n}\\r\\n\\r\\n.picked-list-info-comp {\\r\\n  width: 100%;\\r\\n  height: 60px;\\r\\n  /* padding-top: 10px;\\r\\n  padding-bottom: 10px */\\r\\n}\\r\\n\\r\\n.search-list-info-comp:hover{\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n.picked-list-info-comp:hover{\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n.loading-photos {\\r\\n  width: 341px;\\r\\n  height: 30px;\\r\\n  position: fixed;\\r\\n  bottom: 0px;\\r\\n  background-color: white;\\r\\n  z-index: 2;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-weight: 400;\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n#info-conversation-body::-webkit-scrollbar-thumb {\\r\\n  border-radius: 13px;\\r\\n  width: 9px;\\r\\n  background-color: #79879b;\\r\\n}\\r\\n\\r\\n#info-conversation-body::-webkit-scrollbar {\\r\\n  width: 9px;\\r\\n  border-radius: 13px;\\r\\n  /* height: 8px; */\\r\\n  background-color: #eff1f4;\\r\\n  /* or add it to the track */\\r\\n  /* -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\\r\\n\\tborder-radius: 10px;\\r\\n    background-color: #F5F5F5;\\r\\n    width: 12px;\\r\\n    background-color: #F5F5F5;\\r\\n    height:100%; */\\r\\n}\\r\\n\"","module.exports = \"<div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n  <div style=\\\"width:100%;height:100%;padding:10px\\\">\\r\\n    <div style=\\\"width:20%;height:100%;float: left;display: flex;justify-content: center;align-items: center;max-width: 50px\\\">\\r\\n      <img src={{profileImage}} style=\\\"height:75%;border-radius: 50%\\\">\\r\\n    </div>\\r\\n    <div style=\\\"width:80%;height:100%;float: left;display: flex;align-items: center\\\">\\r\\n      <div style=\\\"margin-left:10px\\\">\\r\\n        {{roomchatName}}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div id=\\\"info-conversation-body\\\" (scroll)=\\\"onScrollInfoConv()\\\" style=\\\"width:100%;overflow-y: auto;overflow-x: hidden;\\\">\\r\\n  <div style=\\\"width:100%;height:200px;border-bottom: solid thin #e7e7e7\\\">\\r\\n    <div style=\\\"padding:15px;width:100%;height:100%\\\">\\r\\n      <div style=\\\"width:100%;height:40px;\\\">\\r\\n        Tùy chọn\\r\\n      </div>\\r\\n      <div style=\\\"width:100%;height:100%;padding-left: 15px;padding-right: 15px\\\">\\r\\n        <div *ngIf=\\\"!receiveNotification\\\" style=\\\"width:100%;height:50px\\\" (click)=\\\"turnOffNotification()\\\">\\r\\n          <div style=\\\"width:20%;height:100%;float:left;display: flex;justify-content: center;align-items: center\\\">\\r\\n            <i class=\\\"fas fa-bell-slash\\\" style=\\\"font-size: 25px\\\"></i>\\r\\n          </div>\\r\\n          <div style=\\\"width:80%;height:100%;float:left;display: flex;align-items: center\\\">\\r\\n            <div>\\r\\n              Tắt thông báo\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"receiveNotification\\\" style=\\\"width:100%;height:50px\\\" (click)=\\\"turnOnNotification()\\\">\\r\\n          <div style=\\\"width:20%;height:100%;float:left;display: flex;justify-content: center;align-items: center\\\">\\r\\n            <i class=\\\"fas fa-bell\\\" style=\\\"font-size: 25px\\\"></i>\\r\\n          </div>\\r\\n          <div style=\\\"width:80%;height:100%;float:left;display: flex;align-items: center\\\">\\r\\n            <div>\\r\\n              Bật thông báo\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div style=\\\"width:100%;height:auto;border-bottom: solid thin #e7e7e7\\\">\\r\\n    <div style=\\\"padding:15px;width:100%;height:100%\\\">\\r\\n      <div style=\\\"width:100%;height:40px;\\\">\\r\\n        Mọi người\\r\\n      </div>\\r\\n      <div (click)=\\\"onClickAddUsers()\\\" style=\\\"width:100%;height:40px;cursor: pointer;\\\">\\r\\n        <div style=\\\"width:16%;height:100%;display: flex;justify-content: center;align-items: center;float: left;\\\">\\r\\n          <i class=\\\"fas fa-plus\\\" style=\\\"font-size: 26px\\\"></i>\\r\\n        </div>\\r\\n        <div style=\\\"width:80%;height:100%;display: flex;margin-left:10px;align-items: center\\\">\\r\\n          <div>\\r\\n            Thêm người\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div style=\\\"width:100%;height:50px\\\" *ngFor=\\\"let user of usersInRoomchat\\\">\\r\\n        <div style=\\\"width:20%;height:100%;display: flex;justify-content: center;align-items: center;float: left;max-width: 50px\\\">\\r\\n          <img src={{user.profileImage}} style=\\\"width:50%;border-radius: 50%\\\">\\r\\n        </div>\\r\\n        <div style=\\\"cursor: pointer;width:44%;height:100%;display: flex;margin-left:10px;align-items: center;float: left\\\">\\r\\n          <div>\\r\\n            {{user.username}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div style=\\\"font-size:12px;width:23%;height:100%;display: flex;margin-left:10px;align-items: center;float: left\\\">\\r\\n          <div *ngIf=\\\"user.isAdmin\\\">\\r\\n            Quản trị viên\\r\\n          </div>\\r\\n        </div>\\r\\n        <div (click)=\\\"openManageUserGroupModal(user._id)\\\" style=\\\"font-size:12px;width:3%;height:100%;display: flex;margin-left:10px;align-items: center;float: right;cursor: pointer;\\\">\\r\\n          <div>\\r\\n            <i style=\\\"font-size: 16px\\\" class=\\\"fas fa-ellipsis-v\\\"></i>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div style=\\\"width:100%;height:auto;border-bottom: solid thin #e7e7e7\\\">\\r\\n    <div style=\\\"padding:15px;width:100%;height:100%\\\">\\r\\n      <div style=\\\"width:100%;height:40px;\\\">\\r\\n        Files\\r\\n      </div>\\r\\n      <div style=\\\"width:100%;height:50px\\\" *ngFor=\\\"let file of files\\\">\\r\\n        <div style=\\\"width:20%;height:100%;display: flex;justify-content: center;align-items: center;float: left;\\\">\\r\\n          <i class=\\\"fas fa-arrow-circle-down\\\" style=\\\"font-size:20px\\\"></i>\\r\\n        </div>\\r\\n        <div style=\\\"cursor: pointer;width:75%;height:100%;overflow: hidden;text-overflow: ellipsis; display: flex;margin-left:10px;align-items: center;float: left\\\">\\r\\n          <a href={{file.downloadLink}} style=\\\"text-decoration: none\\\">\\r\\n            {{file.fileName}}\\r\\n          </a>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div style=\\\"width:100%;height:auto;border-bottom: solid thin #e7e7e7\\\">\\r\\n    <div style=\\\"padding:15px;width:100%;height:100%\\\">\\r\\n      <div style=\\\"width:100%;height:40px;\\\">\\r\\n        Ảnh\\r\\n      </div>\\r\\n      <div style=\\\"width:33%;height:100px;float: left;\\\" *ngFor=\\\"let image of images;let i = index\\\">\\r\\n        <div (click)=\\\"onClickImage(image.fileID,i)\\\" style=\\\"cursor: pointer;width:100%;height:100%;display: flex;justify-content: center;align-items: center\\\">\\r\\n          <img src={{image.imageSrc}} style=\\\"height:100%;\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"loadingPhotos\\\" id=\\\"loading-photos\\\" class=\\\"loading-photos\\\">\\r\\n      <img src=\\\"../../../assets//loading-1.gif\\\" style=\\\"width:17px\\\">&nbsp;\\r\\n      Đang tải...\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"showManageUserGroup\\\" id=\\\"manage-user-group-modal\\\" class=\\\"custom-modal\\\">\\r\\n  <div id=\\\"custom-modal-content-manage-user-in-group\\\" class=\\\"custom-modal-content\\\" style=\\\"height: 270px;\\\">\\r\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\r\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\r\\n        Quản lý thành viên nhóm chat\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-options-body\\\">\\r\\n      <div class=\\\"assign-admin-options\\\" (click)=\\\"assignAdmin()\\\">\\r\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n        line-height: 1.28;font-size: 17px;font-weight: 500\\\">\\r\\n          Bổ nhiệm làm quản trị viên\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"delete-assign-admin-options\\\" (click)=\\\"deleteAssignAdmin()\\\">\\r\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n        line-height: 1.28;font-size: 17px;font-weight: 500;color:red\\\">\\r\\n          Gỡ vai trò quản trị viên\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"delete-user-from-group-options\\\" (click)=\\\"deleteUserFromGroup()\\\">\\r\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n        line-height: 1.28;font-size: 17px;font-weight: 500\\\">\\r\\n          Xóa khỏi nhóm chat\\r\\n        </div>\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\r\\n      <!-- <button type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\r\\n        Lưu\\r\\n      </button> -->\\r\\n      <button (click)=\\\"closeManageUserGroupModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\r\\n        Hủy\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"showAddUserToGroup\\\" id=\\\"add-user-to-group\\\" class=\\\"custom-modal\\\">\\r\\n  <div id=\\\"custom-modal-content-add-user-to-group\\\" class=\\\"custom-modal-content\\\" style=\\\"height: 420px;\\\">\\r\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\r\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\r\\n        Thêm người vào nhóm chat\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-options-body\\\" style=\\\"height:300px\\\">\\r\\n      <div style=\\\"width:100%;height:60px;padding:10px;border-bottom: solid thin;border-color: #e7e7e7\\\">\\r\\n        <input type=\\\"text\\\" [(ngModel)]=\\\"searchTerm\\\" (ngModelChange)='onSearchUser()' placeholder=\\\"Nhập bạn bè...\\\" style=\\\"height: 100%;width: 100%;outline: none;border:transparent;box-shadow: aqua\\\">\\r\\n      </div>\\r\\n      <div *ngIf=\\\"searchedList.length !== 0\\\" class=\\\"result-user-search\\\" id=\\\"result-user-search\\\">\\r\\n        <div *ngFor='let searchedUser of searchedList' class=\\\"search-list-info-comp\\\" (click)=\\\"onClickSearchResult(searchedUser)\\\">\\r\\n          <div style=\\\"width:100%;height:100%;padding:10px\\\">\\r\\n            <div class=\\\"result-user-search-profileimage\\\">\\r\\n              <img src={{searchedUser.profileImage.lowQuality}} style=\\\"width:30px;border-radius: 50%\\\">\\r\\n            </div>\\r\\n            <div class=\\\"result-user-search-username\\\">\\r\\n              {{searchedUser.username}}\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"searchedList.length === 0\\\" class=\\\"picked-user-search\\\">\\r\\n        <div *ngFor='let pickedUser of pickedUsersToAdd' class=\\\"picked-list-info-comp\\\">\\r\\n          <div style=\\\"width:100%;height:100%;padding:10px\\\">\\r\\n            <div class=\\\"result-user-search-profileimage\\\">\\r\\n              <img src={{pickedUser.profileImage.lowQuality}} style=\\\"width:30px;border-radius: 50%\\\">\\r\\n            </div>\\r\\n            <div class=\\\"result-user-search-username\\\">\\r\\n              {{pickedUser.username}}\\r\\n            </div>\\r\\n            <div style=\\\"width:30px;height:40px;float: right;display: flex;justify-content: center;align-items: center\\\">\\r\\n              <i class=\\\"far fa-check-circle\\\" style=\\\"font-size:25px;\\\"></i>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\r\\n      <button (click)=\\\"addUsersToGroup()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\r\\n        Hoàn tất\\r\\n      </button>\\r\\n      <button (click)=\\\"closeAddUsersModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\r\\n        Hủy\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"custom-modal\\\" *ngIf=\\\"openViewMode\\\">\\r\\n  <div class=\\\"container\\\" style=\\\"display: flex;justify-content: center;align-items: center;height:100%;width:100%\\\">\\r\\n    <img id=\\\"image-in-view-mode\\\" src={{currentPhotoInViewMode}} style=\\\"width:0px\\\">\\r\\n    <i (click)=\\\"openNextPhotoViewMode()\\\" class=\\\"fas fa-chevron-right\\\" style=\\\"font-size:50px;position: absolute;color:wheat;right:0px;cursor: pointer;\\\"></i>\\r\\n    <i (click)=\\\"openPreviousPhotoViewMode()\\\" class=\\\"fas fa-chevron-left\\\" style=\\\"font-size:50px;position: absolute;color:wheat;left:0px;cursor: pointer;\\\"></i>\\r\\n    <i (click)=\\\"closeViewMode()\\\" class=\\\"fas fa-times\\\" style=\\\"font-size:40px;position: absolute;color:red;right:5px;top:5px;cursor: pointer;\\\"></i>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import {\r\n  Component,\r\n  OnInit,\r\n  HostListener,\r\n  ChangeDetectorRef\r\n} from \"@angular/core\";\r\nimport { Router, ActivatedRoute, RouterStateSnapshot } from \"@angular/router\";\r\nimport { Subscription } from \"rxjs\";\r\nimport { RoomchatService } from \"../../services/roomchat.service\";\r\nimport { RoomchatUserService } from \"../../services/roomchat-user.service\";\r\nimport { UserService } from \"../../services/user.service\";\r\nimport { UploadService } from \"../../services/upload.service\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\nimport { ComponentCommunicationService } from \"../../services/component-communication.service\";\r\n\r\n@Component({\r\n  selector: \"app-info-conversation\",\r\n  templateUrl: \"./info-conversation.component.html\",\r\n  styleUrls: [\"./info-conversation.component.css\"]\r\n})\r\nexport class InfoConversationComponent implements OnInit {\r\n  roomchatID: string = \"\";\r\n  roomchatName: string = \"\";\r\n  profileImage: string = \"\";\r\n  usersInRoomchat: Array<any> = [];\r\n  myID: string = \"\";\r\n  pickedUserID: string = \"\";\r\n  showAddUserToGroup: boolean = false;\r\n  showManageUserGroup: boolean = false;\r\n  images = [];\r\n  files = [];\r\n  searchTerm: string = \"\";\r\n  searchedList = [];\r\n  pickedUsersToAdd = [];\r\n  getRoomchatSubscription: Subscription;\r\n  getUsersInRoomchatSubscription: Subscription;\r\n  addUsersToRoomchatSubscription: Subscription;\r\n  getRoleUserInRoomchatSubscription: Subscription;\r\n  continueToLoad: boolean = true;\r\n  previousTimeSeq: number = 0;\r\n  loadingPhotos: boolean = false;\r\n  currentPhotoInViewMode: string = \"\";\r\n  currentPhotoIndexInViewMode: number = 0;\r\n  openViewMode: boolean = false;\r\n  getPhotoViewModeSubscription: Subscription;\r\n  receiveNotification: boolean = false;\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onResize(event) {\r\n    this.adjustHTML();\r\n  }\r\n  constructor(\r\n    private router: Router,\r\n    private roomchatService: RoomchatService,\r\n    private roomchatUserService: RoomchatUserService,\r\n    private userService: UserService,\r\n    private cdRef: ChangeDetectorRef,\r\n    private socketService: SocketService,\r\n    private componentCommunicationService: ComponentCommunicationService,\r\n    private uploadService: UploadService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.roomchatID = this.getParams();\r\n    this.getRoomchatSubscription = this.roomchatService\r\n      .getRoomchat(this.roomchatID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          this.profileImage =\r\n            data.roomchat.firstUserInRoomchat.profileImage.lowQuality;\r\n          this.roomchatName = this.processRoomchatName(\r\n            data.roomchat.firstUserInRoomchat.username,\r\n            data.roomchat.numberOfUserInRoomchat - 1,\r\n            data.roomchat.typeRoomchat\r\n          );\r\n          this.myID = data.myID;\r\n        }\r\n      });\r\n    this.getRoomchatSubscription = this.getUsersInRoomchat();\r\n    this.previousTimeSeq = Date.now() + 100000;\r\n    this.loadingPhotos = true;\r\n    this.uploadService\r\n      .getFiles(this.roomchatID, \"image\", this.previousTimeSeq, 10)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          this.loadingPhotos = false;\r\n          this.images = data.files;\r\n          console.log(\"image array: \", this.images);\r\n          let filesLength = this.images.length;\r\n          if (filesLength === 0) return;\r\n\r\n          this.previousTimeSeq = this.images[filesLength - 1].time;\r\n        }\r\n      });\r\n    this.uploadService\r\n      .getFiles(this.roomchatID, \"application\", 0, 0)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          this.files = data.files;\r\n        }\r\n      });\r\n    this.componentCommunicationService.getData().subscribe(data => {\r\n      if (\r\n        data &&\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"add-users-to-roomchat\"\r\n      ) {\r\n        if (this.roomchatID !== data.roomchatID) return;\r\n        this.usersInRoomchat = [];\r\n        this.getRoomchatSubscription = this.getUsersInRoomchat();\r\n      }\r\n    });\r\n  }\r\n\r\n  getParams() {\r\n    let url = this.router.routerState.snapshot.url;\r\n    let tempLength = url.split(\"/\").length;\r\n    return url.split(\"/\")[tempLength - 1] + \"\";\r\n  }\r\n\r\n  processRoomchatName(firstUser, numberOfUsers, typeRoomchat) {\r\n    if (typeRoomchat === \"private\") {\r\n      return firstUser;\r\n    } else if (typeRoomchat === \"group\") {\r\n      return firstUser + \" và \" + numberOfUsers + \" người khác\";\r\n    }\r\n  }\r\n\r\n  assignAdmin() {\r\n    this.roomchatUserService\r\n      .assignAdmin(this.roomchatID, this.pickedUserID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          for (let user of this.usersInRoomchat) {\r\n            if (user._id === this.pickedUserID) {\r\n              user.isAdmin = true;\r\n              this.showManageUserGroup = false;\r\n              break;\r\n            }\r\n          }\r\n        }else {\r\n          return alert('Error when assigning admin! Maybe you are not permitted')\r\n        }\r\n      });\r\n  }\r\n\r\n  deleteAssignAdmin() {\r\n    this.roomchatUserService\r\n      .deleteAssignAdmin(this.roomchatID, this.pickedUserID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          for (let user of this.usersInRoomchat) {\r\n            if (user._id === this.pickedUserID) {\r\n              user.isAdmin = false;\r\n              this.showManageUserGroup = false;\r\n              break;\r\n            }\r\n          }\r\n        } else {\r\n          return alert('Error when removing assigning admin! Maybe you are not permitted')\r\n        }\r\n      });\r\n  }\r\n\r\n  deleteUserFromGroup() {\r\n    return this.roomchatUserService\r\n      .deleteUserFromRoomchat(this.roomchatID, this.pickedUserID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          this.usersInRoomchat = [];\r\n          this.getUsersInRoomchat();\r\n          this.socketService.emitDeleteUsersFromGroup(\r\n            this.roomchatID,\r\n            this.pickedUserID\r\n          );\r\n          this.closeManageUserGroupModal();\r\n          return alert(\"Delete user in roomchat successfully!\");\r\n        } else {\r\n          this.closeManageUserGroupModal();\r\n          return alert(\"Error occurred when deleting!\");\r\n        }\r\n      });\r\n  }\r\n\r\n  closeManageUserGroupModal() {\r\n    this.showManageUserGroup = false;\r\n    this.pickedUserID = \"\";\r\n  }\r\n\r\n  openManageUserGroupModal(userID: string) {\r\n    this.showManageUserGroup = true;\r\n    this.pickedUserID = userID;\r\n    console.log(\"picked user: \", userID);\r\n    this.cdRef.detectChanges();\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      document.getElementById(\r\n        \"custom-modal-content-manage-user-in-group\"\r\n      ).style.width = \"100%\";\r\n    } else {\r\n      document.getElementById(\r\n        \"custom-modal-content-manage-user-in-group\"\r\n      ).style.width = \"35%\";\r\n    }\r\n  }\r\n\r\n  adjustHTML() {\r\n    let conversationSideHeight = document.getElementById(\"conversation-side\")\r\n      .clientHeight;\r\n    console.log(\"fggg: \", conversationSideHeight);\r\n    document.getElementById(\"info-conversation-component\").style.height =\r\n      conversationSideHeight + \"px\";\r\n    let infoConversationBodyHeight = conversationSideHeight - 70;\r\n    document.getElementById(\"info-conversation-body\").style.height =\r\n      infoConversationBodyHeight + \"px\";\r\n  }\r\n\r\n  onSearchUser() {\r\n    this.userService.searchUsers(this.searchTerm, \"friend\").subscribe(data => {\r\n      if (data && data.success) {\r\n        this.searchedList = data.users;\r\n      }\r\n    });\r\n  }\r\n\r\n  onClickAddUsers() {\r\n    this.showAddUserToGroup = true;\r\n    this.cdRef.detectChanges();\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      document.getElementById(\r\n        \"custom-modal-content-add-user-to-group\"\r\n      ).style.width = \"100%\";\r\n    } else {\r\n      document.getElementById(\r\n        \"custom-modal-content-add-user-to-group\"\r\n      ).style.width = \"35%\";\r\n    }\r\n  }\r\n\r\n  addUsersToGroup() {\r\n    let userIDs = this.pickedUsersToAdd.map(el => el._id);\r\n    this.getUsersIDInRoomchat(userIDsInRoomchat => {\r\n      userIDs = userIDs.filter(el => !userIDsInRoomchat.includes(el));\r\n      this.addUsersToRoomchatSubscription = this.roomchatUserService\r\n        .addUsersToRoomchat(userIDs, this.roomchatID)\r\n        .subscribe(data => {\r\n          if (data && data.success) {\r\n            this.usersInRoomchat = [];\r\n            this.getUsersInRoomchatSubscription = this.getUsersInRoomchat();\r\n            this.addUsersToRoomchatSubscription.unsubscribe();\r\n            this.closeManageUserGroupModal();\r\n            this.closeAddUsersModal();\r\n            this.socketService.emitAddUsersToGroup(this.roomchatID, userIDs);\r\n            this.showManageUserGroup = false;\r\n          } else {\r\n            return alert('Fail when adding new user to roomchat')\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  onClickSearchResult(searchedUser: {}) {\r\n    this.pickedUsersToAdd.push(searchedUser);\r\n    this.searchedList = [];\r\n  }\r\n  closeAddUsersModal() {\r\n    this.searchedList = [];\r\n    this.pickedUsersToAdd = [];\r\n    this.showAddUserToGroup = false;\r\n    if (this.addUsersToRoomchatSubscription) {\r\n      this.addUsersToRoomchatSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  onScrollInfoConv() {\r\n    let scrollTop = document.getElementById(\"info-conversation-body\").scrollTop;\r\n    let scrollHeight = document.getElementById(\"info-conversation-body\")\r\n      .scrollHeight;\r\n    let clientHeight = document.getElementById(\"info-conversation-body\")\r\n      .clientHeight;\r\n    this.loadingPhotos = true;\r\n    if (scrollHeight - 10 < clientHeight + scrollTop && this.continueToLoad) {\r\n      this.continueToLoad = false;\r\n      this.cdRef.detectChanges();\r\n      this.uploadService\r\n        .getFiles(this.roomchatID, \"image\", this.previousTimeSeq, 4)\r\n        .subscribe(data => {\r\n          if (data && data.success) {\r\n            this.loadingPhotos = false;\r\n            this.continueToLoad = true;\r\n            let images = data.files;\r\n            let filesLength = images.length;\r\n            if (filesLength === 0) return;\r\n            this.images = this.images.concat(images);\r\n            this.previousTimeSeq = images[filesLength - 1].time;\r\n            console.log(\r\n              \"time-seq: \",\r\n              this.previousTimeSeq,\r\n              images.map(el => el.time)\r\n            );\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  getUsersInRoomchat() {\r\n    return this.roomchatUserService\r\n      .getRoomchatUsers(this.roomchatID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          let userIDsInRoomchat = data.roomchatUsers.map(el => el.userID);\r\n          let roleUsersInRoomchat = data.roomchatUsers.map(el => el.isAdmin);\r\n          this.userService\r\n            .getUsersFromIDs(userIDsInRoomchat)\r\n            .subscribe(dataa => {\r\n              if (dataa && dataa.success) {\r\n                let index = 0;\r\n                for (let userInRoomchat of dataa.users) {\r\n                  this.usersInRoomchat.push({\r\n                    _id: userInRoomchat._id,\r\n                    username: userInRoomchat.username,\r\n                    profileImage: userInRoomchat.profileImage.lowQuality,\r\n                    isAdmin: roleUsersInRoomchat[index]\r\n                  });\r\n                  index++;\r\n                }\r\n              }\r\n            });\r\n        }\r\n      });\r\n  }\r\n\r\n  getUsersIDInRoomchat(cb) {\r\n    return this.roomchatUserService\r\n      .getRoomchatUsers(this.roomchatID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          let userIDsInRoomchat = data.roomchatUsers.map(el => el.userID);\r\n          return cb(userIDsInRoomchat);\r\n        } else {\r\n          return cb(null);\r\n        }\r\n      });\r\n  }\r\n\r\n  onClickImage(imageID, i) {\r\n    this.openViewMode = true;\r\n    this.currentPhotoIndexInViewMode = i;\r\n    this.cdRef.detectChanges();\r\n    this.showPhotoInViewMode(imageID);\r\n  }\r\n\r\n  showPhotoInViewMode(imageID) {\r\n    this.getPhotoViewModeSubscription = this.uploadService\r\n      .getFile(this.roomchatID, \"image\", imageID)\r\n      .subscribe(data => {\r\n        if (data && data.success) {\r\n          this.currentPhotoInViewMode = data.imageSrc;\r\n          let photoWidth = data.photoInfo.size.width;\r\n          let photoHeight = data.photoInfo.size.height;\r\n          console.log(\"Siz::: \", photoWidth, photoHeight);\r\n          if (photoHeight >= photoWidth) {\r\n            document.getElementById(\"image-in-view-mode\").style.height = \"100%\";\r\n            document.getElementById(\"image-in-view-mode\").style.width = \"auto\";\r\n          } else {\r\n            document.getElementById(\"image-in-view-mode\").style.width = \"100%\";\r\n            document.getElementById(\"image-in-view-mode\").style.height = \"auto\";\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  openNextPhotoViewMode() {\r\n    if (this.currentPhotoIndexInViewMode < this.images.length - 1) {\r\n      this.currentPhotoIndexInViewMode++;\r\n    }\r\n    let nextPhoto = this.images[this.currentPhotoIndexInViewMode];\r\n    if (nextPhoto) {\r\n      let imageID = nextPhoto.fileID;\r\n      this.showPhotoInViewMode(imageID);\r\n    }\r\n  }\r\n\r\n  openPreviousPhotoViewMode() {\r\n    if (this.currentPhotoIndexInViewMode > 0) {\r\n      this.currentPhotoIndexInViewMode--;\r\n    }\r\n    let previousPhoto = this.images[this.currentPhotoIndexInViewMode];\r\n    if (previousPhoto) {\r\n      let imageID = previousPhoto.fileID;\r\n      this.showPhotoInViewMode(imageID);\r\n    }\r\n  }\r\n\r\n  closeViewMode() {\r\n    this.getPhotoViewModeSubscription.unsubscribe();\r\n    this.openViewMode = false;\r\n  }\r\n\r\n  turnOffNotification() {\r\n    this.receiveNotification = true;\r\n    return this.componentCommunicationService.setData({\r\n      fromComponent: \"info-conversation\",\r\n      toComponent: \"navbar\",\r\n      type: \"turn-off-notification\",\r\n      roomchatID: this.roomchatID\r\n    });\r\n  }\r\n\r\n  turnOnNotification() {\r\n    this.receiveNotification = false;\r\n    return this.componentCommunicationService.setData({\r\n      fromComponent: \"info-conversation\",\r\n      toComponent: \"navbar\",\r\n      type: \"turn-on-notification\",\r\n      roomchatID: this.roomchatID\r\n    });\r\n  }\r\n}\r\n","module.exports = \".input-text {\\r\\n  /* width: 58%; */\\r\\n  z-index: 0;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.input-file {\\r\\n  width: 260px;\\r\\n  height: 100%;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.preview-file {\\r\\n  max-width: 100%;\\r\\n  height: 100px;\\r\\n  overflow-x: auto;\\r\\n  overflow-y: hidden;\\r\\n  display: flex\\r\\n}\\r\\n\\r\\n.preview-file::-webkit-scrollbar-thumb {\\r\\n  border-radius: 10px;\\r\\n  width: 5px;\\r\\n  background-color: #79879b;\\r\\n}\\r\\n\\r\\n.preview-file::-webkit-scrollbar {\\r\\n  width: 5px;\\r\\n  border-radius: 10px;\\r\\n  /* height: 8px; */\\r\\n  background-color: #eff1f4;\\r\\n  /* or add it to the track */\\r\\n  /* -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\\r\\n\\tborder-radius: 10px;\\r\\n    background-color: #F5F5F5;\\r\\n    width: 12px;\\r\\n    background-color: #F5F5F5;\\r\\n    height:100%; */\\r\\n}\\r\\n\\r\\n.emoj-modal {\\r\\n  z-index: 10000;\\r\\n  box-shadow: 0 0 10px #9ecaed;\\r\\n  background-color: white;\\r\\n  right: 5px;\\r\\n  position: absolute;\\r\\n  height: 200px;\\r\\n  border-radius: 10px;\\r\\n  border: transparent\\r\\n}\\r\\n\\r\\n.emoj-modal-body {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.emoj-type {\\r\\n  width: 10%;\\r\\n  height: 100%;\\r\\n  float: left;\\r\\n  font-size: 33px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center\\r\\n}\\r\\n\\r\\n.emoj-type:hover {\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n.emoj-detail {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  padding: 10px\\r\\n}\\r\\n\\r\\n#text-area-input::-webkit-scrollbar-thumb {\\r\\n  border-radius: 13px;\\r\\n  width: 9px;\\r\\n  background-color: #79879b;\\r\\n}\\r\\n\\r\\n#text-area-input::-webkit-scrollbar {\\r\\n  width: 9px;\\r\\n  border-radius: 13px;\\r\\n  /* height: 8px; */\\r\\n  background-color: #eff1f4; /* or add it to the track */\\r\\n/* -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\\r\\nborder-radius: 10px;\\r\\n  background-color: #F5F5F5;\\r\\n  width: 12px;\\r\\n  background-color: #F5F5F5;\\r\\n  height:100%; */\\r\\n}\\r\\n\"","module.exports = \"<div id=\\\"input-component\\\" style=\\\"z-index:0;width: 100%;height:auto;padding: 10px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\nline-height: 1.28;position:absolute;\\\">\\n  <div class=\\\"preview-file\\\" id=\\\"preview-file\\\" *ngIf=\\\"this.previewFiles.length !== 0\\\">\\n    <div *ngFor=\\\"let file of previewFiles;let i = index;\\\" style=\\\"width:auto;height:auto\\\">\\n      <div *ngIf=\\\"!file.isImage\\\" style=\\\"background-color: #0084ff;margin-top:8px;max-width:250px;min-width:250px;height:63px;border:transparent;margin-left: 15px;border: solid;border-color: #e7e7e7;border-width: thin;border-radius: 10px\\\">\\n        <div style=\\\"width:25%;height:100%;display: flex;justify-content: center;align-items: center;float: left;\\\">\\n          <i class=\\\"far fa-file\\\" style=\\\"font-size:29px;color:white\\\"></i>\\n        </div>\\n        <div style=\\\"width:75%;height:100%;background-color: white;float: left;\\\">\\n          <div style=\\\"padding:10px;width: 100%;height: 100%;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\\">\\n            <div style=\\\"width:100%;height:50%;font-weight: 600\\\">\\n              {{file.ext}}\\n            </div>\\n            <div style=\\\"width:100%;height:50%;overflow: hidden; text-overflow: ellipsis\\\">\\n              {{file.file.name}}\\n            </div>\\n\\n          </div>\\n        </div>\\n      </div>\\n      <div *ngIf=\\\"file.isImage\\\" style=\\\"margin-left:10px;border:transparent;border-radius: 10px;height:100%;max-width:250px;\\\">\\n        <img src={{file.imageSrc}} style=\\\"height:100%;border-radius: 15px;width:100%\\\">\\n      </div>\\n      <div style=\\\"width:250px;height:20px;float:right\\\">\\n        <ngb-progressbar showValue=\\\"true\\\" type=\\\"success\\\" [value]=\\\"previewFiles[i].percentUpload\\\"></ngb-progressbar>\\n\\n      </div>\\n    </div>\\n\\n  </div>\\n  <div class=\\\"input-text\\\" id=\\\"input-text\\\">\\n    <textarea (click)=\\\"onClick()\\\" (keydown)=\\\"onEnter($event)\\\" [(ngModel)]=\\\"contentText\\\" id=\\\"text-area-input\\\" autofocus\\n      placeholder=\\\"Viết tin nhắn...\\\" (ngModelChange)=\\\"onChangeTextArea($event)\\\" rows=\\\"1\\\" autosize style=\\\"z-index: 0;line-height: 1.85;width:95%;overflow: hidden;outline:0cm;border-color:white;margin-top:7px;margin-left:10px;margin-bottom:3px\\\"></textarea>\\n  </div>\\n  <div class=\\\"input-file\\\" id=\\\"input-file\\\">\\n    <div style=\\\"width:45px;height:100%;float:left;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\n      <label for=\\\"upload-file\\\" style=\\\"margin:0px;cursor: pointer;\\\">\\n        <i class=\\\"far fa-file\\\" style=\\\"font-size:29px\\\"></i>\\n        <input (change)=\\\"showPreviewFiles($event)\\\" type=\\\"file\\\" id=\\\"upload-file\\\" style=\\\"display:none\\\" multiple>\\n      </label>\\n\\n    </div>\\n    <div style=\\\"width:45px;height:100%;float:left;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\n      <label for=\\\"upload-image\\\" style=\\\"margin:0px;cursor: pointer;\\\">\\n        <i class=\\\"far fa-images\\\" style=\\\"font-size:29px\\\"></i>\\n        <input accept=\\\"image/*\\\" (change)=\\\"showPreviewFiles($event)\\\" type=\\\"file\\\" id=\\\"upload-image\\\" style=\\\"display:none\\\"\\n          multiple>\\n      </label>\\n    </div>\\n    <div (click)=\\\"openEmojModal()\\\" style=\\\"width:45px;height:100%;float:left;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\"\\n      id=\\\"emoj-choose-div\\\">\\n      <i class=\\\"far fa-smile\\\" style=\\\"font-size:29px\\\" id=\\\"emoj-choose-icon\\\"></i>\\n    </div>\\n    <div style=\\\"width:45px;height:100%;float:left;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\n      <i class=\\\"far fa-thumbs-up\\\" style=\\\"font-size:29px;\\\"></i>\\n    </div>\\n    <div style=\\\"width:45px;height:100%;float:left;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\n      <i class=\\\"far fa-share-square\\\" style=\\\"font-size:29px;\\\"></i>\\n    </div>\\n  </div>\\n  \\n</div>\\n\\n\\n<div (clickOutside)=\\\"closeEmojModal($event)\\\" id=\\\"emoj-modal\\\" class=\\\"emoj-modal\\\" *ngIf=\\\"showEmojModal\\\">\\n  <div class=\\\"emoj-modal-body\\\" id='emoj-modal-body'>\\n    <div (click)=\\\"onClickEmoj($event)\\\" style=\\\"width:100%;height:70%;border-bottom: solid 1px;overflow-x:hidden;overflow-y: auto\\\">\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-1\\\" style=\\\"display:block\\\">\\n        <div *ngFor=\\\"let emoj of emojList.type1;let i=index\\\" id=\\\"emoj-{{i}}\\\" style=\\\"float:left;font-size:28px;max-width:60px;height:30%\\\">\\n          {{emoj}}\\n        </div>\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-2\\\" style=\\\"display:none\\\">\\n        <div *ngFor=\\\"let emoj of emojList.type2\\\" style=\\\"float:left;font-size:28px;max-width:60px;height:30%\\\">\\n          {{emoj}}\\n        </div>\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-3\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-4\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-5\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-6\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-7\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-8\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-9\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n      <div class=\\\"emoj-detail\\\" id=\\\"emoj-detail-10\\\" style=\\\"display:none\\\">\\n\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height:30%\\\">\\n      <div style=\\\"width:100%;height:100%;cursor: pointer;\\\" (click)=\\\"onClickEmojType($event)\\\">\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-1\\\">\\n          <div id=\\\"emoj-type-1\\\">\\n            😀\\n          </div>\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-2\\\">\\n          <div id=\\\"emoj-type-2\\\">\\n            👶\\n          </div>\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-3\\\">\\n          <div id=\\\"emoj-type-3\\\">\\n            🧥\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-4\\\">\\n          <div id=\\\"emoj-type-4\\\">\\n            👶🏻\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-5\\\">\\n          <div id=\\\"emoj-type-5\\\">\\n            ⚽️\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-6\\\">\\n          <div id=\\\"emoj-type-6\\\">\\n            🚗\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-7\\\">\\n          <div id=\\\"emoj-type-7\\\">\\n            ❤️\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-8\\\">\\n          <div id=\\\"emoj-type-8\\\">\\n            ⌚️\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-9\\\">\\n          <div id=\\\"emoj-type-9\\\">\\n            🐶\\n          </div>\\n\\n        </div>\\n        <div class=\\\"emoj-type\\\" id=\\\"emoj-type-10\\\">\\n          <div id=\\\"emoj-type-10\\\">\\n            🍏\\n          </div>\\n\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, Input, AfterViewInit, HostListener, ViewChild, ChangeDetectorRef, AfterViewChecked, AfterContentChecked } from '@angular/core';\r\nimport { MessageService } from '../../services/message.service';\r\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\r\nimport { SocketService } from '../../services/socket.service';\r\nimport { AuthenticationService } from '../../services/authentication.service';\r\nimport { UserService } from '../../services/user.service';\r\nimport { UploadService } from '../../services/upload.service';\r\nimport { NotificationService } from '../../services/notification.service';\r\nimport { Router, ActivatedRoute, RouterStateSnapshot } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-input',\r\n  templateUrl: './input.component.html',\r\n  styleUrls: ['./input.component.css']\r\n})\r\n\r\nexport class InputComponent implements OnInit, AfterViewInit, AfterContentChecked {\r\n  roomchatID: string;\r\n  myInfo: any = {\r\n    _id: '',\r\n    profileImage: '',\r\n    username: ''\r\n  }\r\n  contentText: string = '';\r\n  heightTextArea: number = 27;\r\n  widthTextArea: number = 0;\r\n  timeTyping: number = 0;\r\n  previewFiles: Array<any> = [];\r\n  tempPreviewFile: Array<File> = [];\r\n  currentIndexPreviewFile: number = 0;\r\n  showEmojModal: boolean = false;\r\n  emojList = {\r\n    type1: ['😀', '😁', '😂', '🤣', '😃', '😄', '😅', '😆', '😉', '😊', '😋', '😎', '😍', '😘'],\r\n    type2: ['👶', '👧', '🧒', '👦', '👩', '🧑', '👨', '👵', '🧓', '👴', '👲', '👳‍', '👳‍', '🧔', '👱‍', '👱‍', '👨‍'],\r\n    type3: ['🧥', '👚', '👕', '👖', '👔', '👗', '👙', '👘', '👠', '👡', '👢', '👞', '👟']\r\n  }\r\n  @Input() usersInRoomchat: Array<any>;\r\n  constructor(private messageService: MessageService,\r\n    private componentCommunicationService: ComponentCommunicationService,\r\n    private socketService: SocketService,\r\n    private authService: AuthenticationService,\r\n    private router: Router,\r\n    private userService: UserService,\r\n    private uploadService: UploadService,\r\n    private notificationService: NotificationService,\r\n    private cdR: ChangeDetectorRef) { }\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize(event) {\r\n    let inputFile = document.getElementById('input-file').clientWidth;\r\n    let inputComponent = document.getElementById('input-component').clientWidth;\r\n    let off = inputComponent - inputFile - 20\r\n    document.getElementById('input-text').style.width = off + 'px';\r\n  }\r\n\r\n\r\n\r\n  ngOnInit() {\r\n    this.roomchatID = this.getParams();\r\n    this.componentCommunicationService.getData().subscribe(data => {\r\n      if (!data) return;\r\n      if (data.type === 'adjust-input-comp-width' && data.fromComponent === 'conversation') {\r\n        if (data.hide) {\r\n          document.getElementById('input-component').style.display = 'none'\r\n        } else {\r\n          document.getElementById('input-component').style.display = 'block';\r\n          document.getElementById('input-component').style.width = data.conversationSideWidth;\r\n          let inputFile = document.getElementById('input-file').clientWidth;\r\n          let inputComponent = document.getElementById('input-component').clientWidth;\r\n          let off = inputComponent - inputFile - 20;\r\n          document.getElementById('input-text').style.width = off + 'px';\r\n        }\r\n      }\r\n    });\r\n    this.userService.getMe('low').subscribe(data => {\r\n      if (data && data.success) {\r\n        this.myInfo._id = data.user._id;\r\n        this.myInfo.profileImage = data.user.profileImage.lowQuality;\r\n        this.myInfo.username = data.user.username;\r\n      }\r\n    });\r\n  }\r\n\r\n  onChangeTextArea(e) {\r\n    this.timeTyping = Date.now();\r\n    if (this.roomchatID) {\r\n      let onTypingInterval = setInterval(() => {\r\n        if (Math.abs(this.timeTyping - Date.now()) < 3000) {\r\n          this.socketService.emitTyping(this.roomchatID, 'typing');\r\n        } else {\r\n          clearInterval(onTypingInterval);\r\n        }\r\n      }, 100)\r\n\r\n    }\r\n    let heightTextArea = document.getElementById('text-area-input').clientHeight;\r\n    let widthTextArea = document.getElementById('input-text').clientWidth;\r\n    if (heightTextArea > 190) {\r\n      let textAreaElement = document.getElementById('text-area-input');\r\n      textAreaElement.style.maxHeight = '230px';\r\n      document.getElementById('text-area-input').style['overflowY'] = 'scroll';\r\n      heightTextArea = document.getElementById('text-area-input').clientHeight;\r\n    } else {\r\n      document.getElementById('text-area-input').style['overflowY'] = 'hidden';\r\n    }\r\n\r\n    let offsetHeight = this.heightTextArea - heightTextArea;\r\n    let offsetWidth = Math.abs(this.widthTextArea - widthTextArea);\r\n    if (offsetHeight !== 0 && offsetWidth === 0) {\r\n      let oldHeight = document.getElementById('conversation-body').style.height;\r\n      let newHeight = parseInt(oldHeight) + offsetHeight;\r\n      document.getElementById('conversation-body').style.height = newHeight + 'px';\r\n    }\r\n    this.widthTextArea = document.getElementById('input-text').clientWidth;\r\n    this.heightTextArea = document.getElementById('text-area-input').clientHeight;\r\n  }\r\n\r\n  onClick() {\r\n    if (this.roomchatID) {\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: 'input',\r\n        toComponent: 'app',\r\n        type: 'confirm-seen-message',\r\n        roomchatID: this.roomchatID,\r\n        userID: this.myInfo._id\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  onEnter($event) {\r\n    if ($event.keyCode === 13) {\r\n      $event.preventDefault();\r\n\r\n      let textAreaElement = <HTMLInputElement>document.getElementById('text-area-input');\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: 'input',\r\n        status: 'sending'\r\n      })\r\n      this.sendMessages(textAreaElement);\r\n\r\n    } else {\r\n      this.showEmojModal = false;\r\n    }\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // console.log('side: ::',document.getElementById('conversation-side').clientWidth)\r\n    // document.getElementById('input-component').style.width = document.getElementById('conversation-side').clientWidth + 'px';\r\n    // let inputFile = document.getElementById('input-file').clientWidth;\r\n    // let inputComponent = document.getElementById('input-component').clientWidth;\r\n    // let off = inputComponent - inputFile - 20;\r\n    // document.getElementById('input-text').style.width = off + 'px';\r\n    // this.widthTextArea = document.getElementById('input-text').clientWidth;\r\n    // this.heightTextArea = document.getElementById('text-area-input').clientHeight;\r\n  }\r\n\r\n  showPreviewFiles($event) {\r\n    let files = $event.target.files;\r\n    let filesLength = files.length;\r\n    if (this.previewFiles.length === 0) {\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: 'input',\r\n        toComponent: 'conversation',\r\n        type: 'adjust-conversation-body'\r\n      });\r\n    }\r\n    for (let i = 0; i < filesLength; i++) {\r\n      let myReader: FileReader = new FileReader();\r\n      let ext = files[i].name.split('.')[files[i].name.split('.').length - 1] + '';\r\n      if (!ext || ext === '') continue;\r\n      let isImage = false;\r\n      if (ext.toLowerCase() + '' === 'png' || ext.toLowerCase() + '' === 'jpeg' || ext.toLowerCase() + '' === 'jpg') {\r\n        isImage = true;\r\n      }\r\n      if (isImage) {\r\n        let imageSrc = undefined;\r\n        // this.tempPreviewFiles.push(files[i]);\r\n        this.tempPreviewFile.push(files[i]);\r\n        myReader.onloadend = (e) => {\r\n          imageSrc = myReader.result;\r\n          this.previewFiles.push({\r\n            file: this.tempPreviewFile[this.currentIndexPreviewFile],\r\n            ext: ext.toUpperCase(),\r\n            imageSrc: imageSrc,\r\n            isImage: isImage,\r\n            idPreviewFile: Date.now(),\r\n            percentUpload: 0\r\n          });\r\n          this.currentIndexPreviewFile++;\r\n          this.cdR.detectChanges();\r\n          document.getElementById('preview-file').style.maxWidth = document.getElementById('input-component').clientWidth + 'px';\r\n        }\r\n        myReader.readAsDataURL(files[i]);\r\n\r\n      } else {\r\n        this.previewFiles.push({\r\n          file: files[i],\r\n          ext: ext.toUpperCase(),\r\n          isImage: isImage,\r\n          idPreviewFile: Date.now(),\r\n          percentUpload: 0\r\n        });\r\n      }\r\n\r\n    }\r\n    this.cdR.detectChanges();\r\n\r\n    let uploadFileEl = <HTMLInputElement>document.getElementById('upload-file');\r\n    let uploadImageEl = <HTMLInputElement>document.getElementById('upload-image');\r\n    uploadFileEl.value = null;\r\n    uploadImageEl.value = null;\r\n    this.currentIndexPreviewFile = 0\r\n\r\n\r\n  }\r\n\r\n  sendMessages(textAreaElement) {\r\n    let contentText = textAreaElement.value;\r\n    let filesLength = this.previewFiles.length;\r\n    if (filesLength === 0 && (contentText !== '' && contentText)) {\r\n\r\n      this.messageService.sendMessage(this.roomchatID, contentText, '', '', '').subscribe(data => {\r\n        this.contentText = '';\r\n        this.resizeInputTextArea(textAreaElement);\r\n        console.log('wEEE: ', data)\r\n        this.socketService.sendMessage({\r\n          fromUserID: data.newMessage.fromUserID,\r\n          type: 'message',\r\n          roomchatID: this.roomchatID,\r\n          messageID: data.newMessage._id,\r\n          username: this.myInfo.username,\r\n          time: data.newMessage.time,\r\n          profileImage: data.userInfo.profileImage.lowQuality,\r\n          contentText: data.newMessage.content,\r\n          fileType: '',\r\n          contentFile: '',\r\n          fileName: ''\r\n        })\r\n        this.sendCompCommunicationData(data, contentText, '');\r\n\r\n        if (this.usersInRoomchat) {\r\n          for (let userID of this.usersInRoomchat) {\r\n            this.socketService.emitNotification(this.roomchatID, {\r\n              type: 'incomming-message',\r\n              detail: {\r\n                typeContent: 'text',\r\n                content: data.newMessage.content,\r\n                fromRoomchatID: this.roomchatID\r\n              },\r\n              fromUserInfo: this.myInfo,\r\n              toUserID: userID,\r\n              time: Date.now()\r\n            });\r\n            this.notificationService.createNotifications(userID, {\r\n              typeContent: 'text',\r\n              typeNotification: 'incomming-message',\r\n              content: data.newMessage.content,\r\n              fromRoomchatID: this.roomchatID\r\n            }, Date.now()).subscribe(data => data)\r\n          }\r\n\r\n        }\r\n      })\r\n    } else if (filesLength !== 0) {\r\n      this.tempPreviewFile = []\r\n      for (let filePreview of this.previewFiles) {\r\n        let formData = new FormData();\r\n        formData.append('file', filePreview.file);\r\n        console.log('files: ', filePreview.file)\r\n        let percentUpload;\r\n        let idPreviewFile;\r\n        this.uploadService.uploadFile(formData, filePreview.idPreviewFile, this.roomchatID).subscribe(dataUpload => {\r\n          if (dataUpload.index) {\r\n            percentUpload = dataUpload.percentDone;\r\n            idPreviewFile = dataUpload.index;\r\n            this.previewFiles.filter(el => el.idPreviewFile + '' === idPreviewFile + '')[0].percentUpload = percentUpload;\r\n          }\r\n          if (dataUpload && dataUpload.success) { //upload xong\r\n            let attach = '';\r\n            let dataFile = '';\r\n            if (dataUpload.fileType + '' === 'image') {\r\n              attach = dataUpload.fileName;\r\n              dataFile = dataUpload.imageSource;\r\n            } else {\r\n              attach = dataUpload.downloadLink;\r\n              dataFile = dataUpload.downloadLink;\r\n            }\r\n            let fileName = dataUpload.originalName\r\n            this.deleteOneFilePreview(idPreviewFile);\r\n            this.messageService.sendMessage(this.roomchatID, contentText, attach, dataUpload.fileType, fileName).subscribe(data => {\r\n              if (data && data.success) {\r\n                this.contentText = '';\r\n                if (this.previewFiles.length === 0) { //da gui het tat ca cac files\r\n                  this.resizeInputTextArea(textAreaElement);\r\n                }\r\n                this.socketService.sendMessage({\r\n                  fromUserID: data.newMessage.fromUserID,\r\n                  type: 'message',\r\n                  roomchatID: this.roomchatID,\r\n                  messageID: data.newMessage._id,\r\n                  time: data.newMessage.time,\r\n                  profileImage: data.userInfo.profileImage.lowQuality,\r\n                  contentText: data.newMessage.content,\r\n                  contentFile: dataFile,\r\n                  fileType: data.file.fileType,\r\n                  fileName: data.file.originalName\r\n                });\r\n                this.currentIndexPreviewFile = 0;\r\n                this.sendCompCommunicationData(data, contentText, dataFile);\r\n                if (this.usersInRoomchat) {\r\n                  for (let userID of this.usersInRoomchat) {\r\n                    this.socketService.emitNotification(this.roomchatID, {\r\n                      type: 'incomming-message',\r\n                      fromUserInfo: this.myInfo,\r\n                      detail: {\r\n                        typeContent: 'file',\r\n                        fromRoomchatID: this.roomchatID\r\n                      },\r\n                      toUserID: userID,\r\n                      time: Date.now()\r\n                    });\r\n                    this.notificationService.createNotifications(userID, {\r\n                      typeContent: 'file',\r\n                      typeNotification: 'incomming-message',\r\n                      fromRoomchatID: this.roomchatID\r\n                    }, Date.now()).subscribe(data => data)\r\n                  }\r\n\r\n                }\r\n\r\n              }\r\n\r\n            })\r\n          }\r\n\r\n        })\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  ngAfterContentChecked() {\r\n  }\r\n\r\n  resizeInputTextArea(textAreaElement: HTMLInputElement) {\r\n    textAreaElement.style.height = '29px';\r\n    this.heightTextArea = document.getElementById('text-area-input').clientHeight;\r\n    document.getElementById('text-area-input').style['overflowY'] = 'hidden';\r\n    let conversationHeight = window.innerHeight - 192;\r\n    document.getElementById('conversation-body').setAttribute('style', 'height: ' + conversationHeight + 'px');\r\n  }\r\n\r\n  sendCompCommunicationData(data, contentText, dataFile) {\r\n    let fileType;\r\n    let fileName;\r\n    if (data.file === null) {\r\n      console.log('log hre')\r\n      fileType = '';\r\n      fileName = '';\r\n    } else {\r\n      console.log('log hre^^^^^', data)\r\n      fileType = data.file.fileType;\r\n      fileName = data.file.originalName;\r\n    }\r\n\r\n    if (this.myInfo._id) {\r\n      this.componentCommunicationService.setData({\r\n        status: 'sent',\r\n        fromComponent: 'input',\r\n        messageID: data.newMessage._id,\r\n        contentText: data.newMessage.content,\r\n        username: this.myInfo.username,\r\n        contentFile: dataFile,\r\n        fileType: fileType,\r\n        fileName: fileName\r\n      });\r\n      let arrangedRoomchat = {\r\n        fromComponent: 'input',\r\n        type: 'arrange-roomchat',\r\n        lastUserID: this.myInfo._id,\r\n        content: contentText,\r\n        roomchatID: this.roomchatID,\r\n        profileImage: this.myInfo.profileImage\r\n      }\r\n      this.componentCommunicationService.setData(arrangedRoomchat);\r\n      this.socketService.emitArrangeRoomchats(arrangedRoomchat);\r\n    }\r\n  }\r\n\r\n  emojModalConfig() {\r\n    let emojEl = document.getElementById('emoj-modal');\r\n    let inputComponentEl = document.getElementById('input-component');\r\n    let offsetWidth = inputComponentEl.clientWidth - 5;\r\n    let offsetHeight = inputComponentEl.clientHeight;\r\n    console.log('bottom: ', emojEl.style.bottom)\r\n    emojEl.style.bottom = offsetHeight + 'px';\r\n    emojEl.style.width = offsetWidth + 'px';\r\n  }\r\n\r\n  onClickEmojType($event) {\r\n    let idEmojType = $event.target.id + '';\r\n    for (let i = 1; i <= 10; i++) {\r\n      let elType = document.getElementById('emoj-type-' + i);\r\n      if (idEmojType === elType.id + '') {\r\n        let elDetail = document.getElementById('emoj-detail-' + i);\r\n        elDetail.style.display = 'block';\r\n        elType.style.backgroundColor = '#e7e7e7'\r\n        for (let j = 1; j <= 10; j++) {\r\n          let elDetailCheck = document.getElementById('emoj-detail-' + j);\r\n          let elTypeOther = document.getElementById('emoj-type-' + j);\r\n          if (i !== j) {\r\n            elTypeOther.style.backgroundColor = 'white'\r\n            elDetailCheck.style.display = 'none';\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onClickEmoj($event) {\r\n    let emojID = $event.target.id + '';\r\n    let getEmojElement = document.getElementById(emojID);\r\n    let emoj = '';\r\n    if (getEmojElement) {\r\n      emoj = getEmojElement.textContent;\r\n    }\r\n    let textAreaElement = <HTMLInputElement>document.getElementById('text-area-input');\r\n    let newValue = textAreaElement.value + emoj;\r\n    textAreaElement.value = newValue;\r\n  }\r\n\r\n  openEmojModal() {\r\n    this.showEmojModal = true;\r\n    this.cdR.detectChanges();\r\n    this.emojModalConfig();\r\n  }\r\n\r\n  closeEmojModal($event) {\r\n    console.log('iddd: ', $event.target.id)\r\n    if ($event.target.id + '' !== 'emoj-choose-icon' && $event.target.id + '' !== 'emoj-choose-div') {\r\n      this.showEmojModal = false;\r\n    }\r\n  }\r\n\r\n  deleteOneFilePreview(idPreviewFile: Number) {\r\n    if (!idPreviewFile) return;\r\n    for (let i = 0; i < this.previewFiles.length; i++) {\r\n      if (this.previewFiles[i].idPreviewFile + '' === idPreviewFile + '') {\r\n        console.log('deleted: ', i)\r\n        return this.previewFiles.splice(i, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  getParams() {\r\n    let url = this.router.routerState.snapshot.url\r\n    let tempLength = url.split('/').length;\r\n    return url.split('/')[tempLength - 1] + '';\r\n  }\r\n\r\n\r\n}\r\n","module.exports = \".profile-image {\\r\\n  width: 50px;\\r\\n  height: 60px;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.message-body {\\r\\n  float: left;\\r\\n  height: 60px;\\r\\n  padding-top: 5px;\\r\\n  padding-bottom: 5px;\\r\\n  padding-left: 10px;\\r\\n  overflow: hidden; \\r\\n  text-overflow: ellipsis\\r\\n}\\r\\n\\r\\n.message-body-username {\\r\\n  text-align: left;\\r\\n  width:100%;\\r\\n  height: 30px;\\r\\n  float: left;\\r\\n  color: rgba(0, 0, 0, 1);\\r\\n  font-size: 15px;\\r\\n  font-weight: 400;\\r\\n  line-height: 1.4;\\r\\n  overflow: hidden;\\r\\n  white-space: nowrap;\\r\\n  text-overflow: ellipsis\\r\\n\\r\\n}\\r\\n\\r\\n.message-body-content {\\r\\n  text-align: left;\\r\\n  width:100%;\\r\\n  height: 30px;\\r\\n  float: left;\\r\\n  color: rgba(153, 153, 153, 1);\\r\\n  font-size: 13px;\\r\\n  font-weight: 400;\\r\\n  text-overflow: ellipsis;\\r\\n  white-space: nowrap;\\r\\n  overflow: hidden; \\r\\n  /* text-overflow: ellipsis */ \\r\\n}\\r\\n\\r\\n.message-body-setting{\\r\\n  float: right;\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  background-color: rgb(0, 0, 0);\\r\\n  /* Fallback color */\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.delete-message-modal-options {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.unread-modal-options {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.modal-options-body {\\r\\n  height: 150px;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.modal-options-body :hover {\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n.modal-options-content{\\r\\n  height: 70px;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n}\\r\\n\\r\\n.delete-roomchat-modal-options{\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n@media screen and (max-width:900px) {\\r\\n  #manage-roomchat-modal-0{\\r\\n    width: 100%\\r\\n  }\\r\\n  #confirm-delete-modal-0{\\r\\n    width: 100%\\r\\n  }\\r\\n  #manage-roomchat-modal-0{\\r\\n    width: 100%\\r\\n  }\\r\\n  #announce-success-delete-allmessage-0{\\r\\n    width: 100%\\r\\n  }\\r\\n}\"","module.exports = \"<div id='root' style=\\\"width:100%; height: 70px\\\">\\n  <div id=\\\"last-message-comp\\\" style=\\\"padding:  10px; width: 100%; height:70px\\\">\\n    <div id=\\\"profile-image\\\" class=\\\"profile-image\\\">\\n      <img style=\\\"border-radius: 50%;width:100%; height:50px\\\" src={{profileImage}}>\\n      <div *ngIf=\\\"isActive\\\" style=\\\"width:8px;height:8px;border:transparent;border-radius: 50%;background-color: springgreen;margin-right:5px\\\">\\n\\n      </div>\\n      <div *ngIf=\\\"idle\\\" style=\\\"width:8px;height:8px;border:transparent;border-radius: 50%;background-color: red;margin-right:5px\\\">\\n\\n      </div>\\n    </div>\\n    <div #messagebody id=\\\"message-body\\\" class=\\\"message-body\\\" (click)=\\\"openConversation()\\\">\\n      <div class=\\\"message-body-username\\\">\\n        {{roomchatName}}\\n      </div>\\n      <div class=\\\"message-body-content\\\">\\n        {{content}}\\n      </div>\\n    </div>\\n    <div (click)=\\\"openManageRoomchat()\\\" id=\\\"message-body-setting\\\" class=\\\"message-body-setting\\\">\\n      <i style=\\\"font-size: 20px\\\" class=\\\"fas fa-ellipsis-v\\\"></i>\\n    </div>\\n  </div>\\n</div>\\n\\n\\n<div *ngIf=\\\"showManageRoomchatModal\\\" id=\\\"manage-roomchat-modal\\\" class=\\\"custom-modal\\\">\\n  <div id=\\\"manage-roomchat-modal-0\\\" class=\\\"custom-modal-content\\\" style=\\\"height: 270px;\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Quản lý cuộc trò chuyện\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-body\\\">\\n      <div class=\\\"delete-message-modal-options\\\" (click)=\\\"showDeleteMessageModalFunc()\\\">\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.28;font-size: 17px;font-weight: 500\\\">\\n          Xóa tất cả tin nhắn\\n        </div>\\n      </div>\\n      <div class=\\\"delete-roomchat-modal-options\\\" (click)=\\\"showDeleteRoomchatModalFunc()\\\">\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.28;font-size: 17px;font-weight: 500;color:red\\\">\\n          Xóa phòng chat\\n        </div>\\n      </div>\\n      <div class=\\\"unread-modal-options\\\" (click)=\\\"markAsUnread()\\\">\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.28;font-size: 17px;font-weight: 500\\\">\\n          Đánh dấu là chưa đọc\\n        </div>\\n\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n      <!-- <button type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n        Lưu\\n      </button> -->\\n      <button (click)=\\\"onClickCancelManageRoomchatModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\n        Hủy\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"showDeleteMessageModal\\\" id=\\\"confirm-delete-modal\\\" class=\\\"custom-modal\\\">\\n  <div id=\\\"confirm-delete-modal-0\\\" class=\\\"custom-modal-content\\\" style=\\\"height: 190px\\\" id=\\\"confirm-delete-modal-0\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Bạn chắc chắn muốn xóa ?\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-content\\\">\\n      <div style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;margin-top:5px;display: flex;justify-content: center;align-items: center\\\">\\n        <div>\\n          Xóa tất cả tin nhắn trong phòng chat, tuy nhiên những người khác vẫn có thể thấy được.\\n\\n        </div>\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n      <button (click)=\\\"deleteAllMessages()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n        OK\\n      </button>\\n      <button (click)=\\\"onClickCancelDeleteRoomchatModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\n        Hủy\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"showDeleteRoomchatModal\\\" id=\\\"confirm-delete-modal\\\" class=\\\"custom-modal\\\">\\n  <div id=\\\"confirm-delete-modal-0\\\" class=\\\"custom-modal-content\\\" style=\\\"height: 190px\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Bạn chắc chắn muốn xóa ?\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-content\\\">\\n      <div style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;display: flex;justify-content: center;align-items: center\\\">\\n        <div>\\n          Để xóa phòng chat này, bạn phải là người tạo phòng chat\\n        </div>\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n      <button (click)=\\\"deleteRoomchat()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n        OK\\n      </button>\\n      <button (click)=\\\"onClickCancelDeleteRoomchatModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\n        Hủy\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"announceModal.deleteAllMessages.show\\\" id=\\\"announce-success-delete-allmessage\\\" class=\\\"custom-modal\\\">\\n  <div id=\\\"announce-success-delete-allmessage-0\\\" class=\\\"custom-modal-content\\\" style=\\\"height: 190px\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div *ngIf=\\\"announceModal.deleteAllMessages.ok\\\" style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Xong\\n      </div>\\n      <div *ngIf=\\\"announceModal.deleteAllMessages.fail\\\" style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Lỗi\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-content\\\">\\n      <div style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;margin-top:5px;display: flex;justify-content: center;align-items: center\\\">\\n        <div *ngIf=\\\"announceModal.deleteAllMessages.ok\\\">\\n          Đã xóa thành công\\n\\n\\n        </div>\\n        <div *ngIf=\\\"announceModal.deleteAllMessages.fail\\\">\\n          Có lỗi xảy ra\\n\\n        </div>\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n      <button (click)=\\\"onClickCancelDeleteRoomchatModal()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n        OK\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<div *ngIf=\\\"announceModal.deleteRoomchat.show\\\" id=\\\"announce-success-delete-roomchat\\\" class=\\\"custom-modal\\\">\\n  <div class=\\\"custom-modal-content\\\" style=\\\"height: 190px\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div *ngIf=\\\"announceModal.deleteRoomchat.ok\\\" style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Xong\\n      </div>\\n      <div *ngIf=\\\"announceModal.deleteRoomchat.fail\\\" style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Lỗi\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-content\\\">\\n      <div style=\\\"font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;margin-top:5px;display: flex;justify-content: center;align-items: center\\\">\\n        <div *ngIf=\\\"announceModal.deleteRoomchat.ok\\\">\\n          Đã xóa thành công\\n\\n        </div>\\n        <div *ngIf=\\\"announceModal.deleteRoomchat.fail\\\">\\n          Bạn không thể xóa cuộc trò chuyện này\\n\\n        </div>\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n      <button (click)=\\\"onClickCancelDeleteRoomchatModal()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n        OK\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, Input, HostListener, ViewChild, ChangeDetectorRef } from '@angular/core';\r\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { RoomchatService } from '../../services/roomchat.service';\r\nimport { RoomchatUserService } from '../../services/roomchat-user.service';\r\nimport { MessageService } from '../../services/message.service';\r\n\r\n@Component({\r\n  selector: 'app-lastmessage',\r\n  templateUrl: './lastmessage.component.html',\r\n  styleUrls: ['./lastmessage.component.css']\r\n})\r\nexport class LastmessageComponent implements OnInit {\r\n  @Input() content: string;\r\n  @Input() profileImage: string;\r\n  @Input() roomchatName: string;\r\n  @Input() timeActive: number;\r\n  @Input() idle: boolean;\r\n  @Input() reactive: boolean;\r\n  @Input() roomchatID: string;\r\n  @Input() myID: string;\r\n  isActive: boolean = false;\r\n  showManageRoomchatModal: boolean = false;\r\n  showDeleteRoomchatModal: boolean = false;\r\n  showDeleteMessageModal: boolean = false;\r\n  announceModal = {\r\n    deleteAllMessages: {\r\n      show: false,\r\n      ok: false,\r\n      fail: false\r\n    },\r\n    deleteRoomchat: {\r\n      show: false,\r\n      ok: false,\r\n      fail: false\r\n    }\r\n  }\r\n  @ViewChild('messagebody') input;\r\n  @HostListener('window:resize', ['$event'])\r\n  onResize(event) {\r\n    if (!document.getElementById('last-message-comp')) return;\r\n    let lastMessageComp = document.getElementById('last-message-comp').clientWidth;\r\n    let lastMessageProfileImage = document.getElementById('profile-image').clientWidth;\r\n    let lastMessageSetting = document.getElementById('message-body-setting').clientWidth;\r\n    let temp = lastMessageComp - (lastMessageProfileImage + lastMessageSetting + 40);\r\n    this.input.nativeElement.style.width = temp + 'px';\r\n  }\r\n\r\n  constructor(private componentCommunicationService: ComponentCommunicationService,\r\n    private router: Router,\r\n    private roomchatService: RoomchatService,\r\n    private roomchatUserService: RoomchatUserService,\r\n    private messageService: MessageService,\r\n    private cdRef: ChangeDetectorRef) { }\r\n\r\n  ngOnInit() {\r\n    if (document.getElementById('last-message-comp')) {\r\n      let lastMessageComp = document.getElementById('last-message-comp').clientWidth;\r\n      let lastMessageProfileImage = document.getElementById('profile-image').clientWidth;\r\n      let lastMessageSetting = document.getElementById('message-body-setting').clientWidth;\r\n      let temp = lastMessageComp - (lastMessageProfileImage + lastMessageSetting + 40);\r\n      this.input.nativeElement.style.width = temp + 'px';\r\n    }\r\n\r\n    setInterval(() => {\r\n      if (Math.abs(this.timeActive - Date.now()) < 5000) {\r\n        this.isActive = true;\r\n      } else {\r\n        if (!this.idle) {\r\n          this.isActive = false;\r\n        }\r\n      }\r\n      if (this.idle) {\r\n        this.isActive = false;\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  openManageRoomchat() {\r\n    this.showManageRoomchatModal = true;\r\n    this.cdRef.detectChanges();\r\n    let w = window.innerWidth;\r\n    if(w < 900){\r\n      document.getElementById('manage-roomchat-modal-0').style.width = '100%'\r\n    } else {\r\n      document.getElementById('manage-roomchat-modal-0').style.width = '35%'\r\n    }\r\n  }\r\n\r\n  onClickCancelManageRoomchatModal() {\r\n    this.showManageRoomchatModal = false;\r\n  }\r\n\r\n  onClickCancelDeleteRoomchatModal() {\r\n    this.showDeleteRoomchatModal = false;\r\n    this.showDeleteMessageModal = false;\r\n    this.announceModal.deleteAllMessages.show = false;\r\n    this.announceModal.deleteAllMessages.ok = false;\r\n    this.announceModal.deleteAllMessages.fail = false;\r\n    this.announceModal.deleteRoomchat.show = false;\r\n    this.announceModal.deleteRoomchat.ok = false;\r\n    this.announceModal.deleteRoomchat.fail = false;\r\n  }\r\n\r\n  openConversation() {\r\n    this.componentCommunicationService.setData({\r\n      fromComponent: 'last-message',\r\n      toComponent: 'roomchat',\r\n      type: 'on-click-lastmessage',\r\n      roomchatID: this.roomchatID\r\n    })\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      this.router.navigate(['/conversation', this.roomchatID]);\r\n    } else {\r\n      this.router.navigate(['/home/conversation', this.roomchatID]);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  showDeleteMessageModalFunc() {\r\n    this.showManageRoomchatModal = false;\r\n    this.showDeleteMessageModal = true;\r\n    this.cdRef.detectChanges();\r\n    let w = window.innerWidth;\r\n    if(w < 900){\r\n      document.getElementById('confirm-delete-modal-0').style.width = '100%'\r\n    } else {\r\n      document.getElementById('confirm-delete-modal-0').style.width = '35%'\r\n    }\r\n  }\r\n\r\n\r\n  showDeleteRoomchatModalFunc() {\r\n    this.showManageRoomchatModal = false;\r\n    this.showDeleteRoomchatModal = true;\r\n    this.cdRef.detectChanges();\r\n    let w = window.innerWidth;\r\n    if(w < 900){\r\n      document.getElementById('confirm-delete-modal-0').style.width = '100%'\r\n    } else {\r\n      document.getElementById('confirm-delete-modal-0').style.width = '35%'\r\n    }\r\n  }\r\n\r\n  deleteAllMessages() {\r\n    this.messageService.updateMessages(this.roomchatID).subscribe(data => {\r\n      if (data && data.success) {\r\n        this.showDeleteMessageModal = false;\r\n        this.announceModal.deleteAllMessages.show = true;\r\n        this.announceModal.deleteAllMessages.ok = true;\r\n        this.componentCommunicationService.setData({\r\n          fromComponent: 'last-message',\r\n          toComponent: 'conversation',\r\n          type: 'delete-all-messages',\r\n          roomchatID: this.roomchatID\r\n        })\r\n      } else {\r\n        this.showDeleteMessageModal = false;\r\n        this.announceModal.deleteAllMessages.show = true;\r\n        this.announceModal.deleteAllMessages.fail = true;\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n\r\n  deleteRoomchat() {\r\n    this.roomchatService.deleteRoomchat(this.roomchatID).subscribe(data => {\r\n      if (data && data.success) {\r\n        this.showDeleteRoomchatModal = false;\r\n        this.announceModal.deleteRoomchat.show = true;\r\n        this.cdRef.detectChanges();\r\n        this.announceModal.deleteRoomchat.ok = true;\r\n        this.componentCommunicationService.setData({\r\n          fromComponent: 'last-message',\r\n          toComponent: 'roomchat',\r\n          type: 'delete-roomchat',\r\n          roomchatID: this.roomchatID\r\n        })\r\n        this.router.navigate(['/home']);\r\n      } else {\r\n        console.log(data)\r\n        this.showDeleteRoomchatModal = false;\r\n        console.log('fail')\r\n        this.announceModal.deleteRoomchat.show = true;\r\n        this.announceModal.deleteRoomchat.fail = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  markAsUnread() {\r\n\r\n  }\r\n}\r\n","module.exports = \".my-message-content {\\r\\n  float: right;\\r\\n  max-width: 50%;\\r\\n  border: solid transparent;\\r\\n  background-color: #0084ff;\\r\\n  border-radius: 14px;\\r\\n  height: 100%;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif\\r\\n}\\r\\n\\r\\n.my-message-profileimage {\\r\\n  float: right;\\r\\n  width: 10px;\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.other-message-content {\\r\\n  float: left;\\r\\n  max-width: 50%;\\r\\n  border: solid transparent;\\r\\n  background-color: #f1f0f0;\\r\\n  border-radius: 14px;\\r\\n  height: 100%;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif\\r\\n}\\r\\n\\r\\n.other-message-profileimage {\\r\\n  float: left;\\r\\n  width: 40px;\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.username-message {\\r\\n  border: none;\\r\\n  background-color: transparent;\\r\\n  border-radius: 0px;\\r\\n  width: 100%;\\r\\n  float: left;\\r\\n  height: 20px;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 13px;\\r\\n  color: rgba(0, 0, 0, .40)\\r\\n}\\r\\n\\r\\n.message-options {\\r\\n  float: right;\\r\\n  width: 40px;\\r\\n  height: 30px;\\r\\n  display: none;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n#my-message:hover .message-options{\\r\\n  display: block\\r\\n}\\r\\n\\r\\n.custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  background-color: rgb(0, 0, 0);\\r\\n  /* Fallback color */\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.delete-message-locally {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.unread-modal-options {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\\r\\n.modal-options-body {\\r\\n  height: 100px;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.modal-options-body :hover {\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n.modal-options-content{\\r\\n  height: 70px;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n}\\r\\n\\r\\n.delete-message-permanently{\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n  height: 50px;\\r\\n  width: 100%\\r\\n}\\r\\n\"","module.exports = \"<div *ngIf=\\\"isMe()\\\" id=\\\"my-message\\\" style=\\\"width:100%;margin-top: 5px\\\">\\n  <div class=\\\"my-message-profileimage\\\">\\n\\n  </div>\\n  <div *ngIf=\\\"message.fileType === 'application'\\\" class=\\\"my-message-content\\\">\\n    <div style=\\\"margin-left: 10px;margin-right:8px;width: 100%;height:100%\\\">\\n      <a href={{message.attach}} style=\\\"color:white\\\" target=\\\"_blank\\\">\\n        <div style=\\\"width:15%;height:30px;float:left;display: flex;justify-content: center;align-items: center\\\">\\n          <i class=\\\"fas fa-arrow-circle-down\\\" style=\\\"font-size:20px\\\"></i>\\n        </div>\\n        <div style=\\\"overflow: hidden;text-overflow: ellipsis;height:22px;line-height: 1.4;font-size:15px;width:85%;height:30px;float:left;display: flex;justify-content: center;align-items: center;overflow: hidden;text-overflow: ellipsis\\\">\\n          <div style=\\\"overflow: hidden;text-overflow: ellipsis;height:20px;\\\">\\n            {{message.fileName}}\\n          </div>\\n        </div>\\n      </a>\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"message.content !== '' && message.fileType === ''\\\" class=\\\"my-message-content\\\">\\n    <div style=\\\"padding: 10px;font-size: 15px; color: white;word-wrap: break-word;line-height: 1.28\\\">\\n      {{message.content}}\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"message.fileType === 'image'\\\" class=\\\"my-message-content\\\" style=\\\"background-color: transparent\\\">\\n    <div *ngIf=\\\"message.content !== ''\\\" class=\\\"my-message-content\\\" style=\\\"padding: 10px;font-size: 15px; color: white;word-wrap: break-word;line-height: 1.28;margin-bottom: 5px\\\">\\n      {{message.content}}\\n    </div>\\n    <div style=\\\"margin-top:5px;width: 100%;height:100%\\\">\\n      <img src={{message.attach}} style=\\\"width:100%;height:100%;border-radius: 14px\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"message-options\\\" (click)=\\\"openMessageOptions()\\\">\\n    <i class=\\\"fas fa-ellipsis-h\\\" style=\\\"font-size: 30px\\\"></i>\\n  </div>\\n\\n</div>\\n\\n<div *ngIf=\\\"!isMe()\\\" id=\\\"other-message\\\" style=\\\"width:100%;margin-top: 5px\\\">\\n  <div class=\\\"other-message-profileimage\\\">\\n    <img *ngIf=\\\"displayLastInfo()\\\" #profileImageMessage src={{message.profileImage}} style=\\\"border-radius: 50%;width:70%; height:28px;margin-top: 15px;margin-left: 5px;\\\">\\n  </div>\\n  <div style=\\\"margin-left:45px\\\">\\n    <!-- <div style=\\\"border:none;background-color: transparent;border-radius: 0px;width:100%;float: left;height:20px\\\">\\n      {{message.username}}\\n    </div> -->\\n    <div class=\\\"other-message-content\\\" *ngIf=\\\"message.content !== ''\\\">\\n      <div style=\\\"padding: 10px;font-size: 15px; color: black;word-wrap: break-word;line-height: 1.28\\\">\\n        {{message.content}}\\n      </div>\\n    </div>\\n\\n    <div *ngIf=\\\"message.fileType === 'image'\\\" style=\\\"width: 100%;height:100%;background-color: transparent;max-width: 50%;\\\">\\n      <img src={{message.attach}} style=\\\"width:100%;height:100%;border-radius: 14px;margin-top:5px\\\">\\n    </div>\\n    <div class=\\\"other-message-content\\\" *ngIf=\\\"message.fileType === 'application'\\\" style=\\\"margin-left: 10px;margin-right:8px;width: 100%;height:100%\\\">\\n      <a href={{message.attach}} style=\\\"color:black\\\" target=\\\"_blank\\\">\\n        <div style=\\\"width:15%;height:30px;float:left;display: flex;justify-content: center;align-items: center\\\">\\n          <i class=\\\"fas fa-arrow-circle-down\\\" style=\\\"font-size:20px\\\"></i>\\n        </div>\\n        <div style=\\\"font-size:15px;width:85%;height:30px;float:left;display: flex;justify-content: center;align-items: center;overflow: hidden;text-overflow: ellipsis\\\">\\n          <div>\\n            report.rar\\n          </div>\\n        </div>\\n      </a>\\n    </div>\\n    <div *ngIf=\\\"displayLastInfo()\\\" class=\\\"username-message\\\">\\n      Gửi từ @{{message.username}}\\n    </div>\\n  </div>\\n</div>\\n\\n\\n<div *ngIf=\\\"openMessageOptionModal\\\" class=\\\"custom-modal\\\">\\n  <div id=\\\"custom-modal-content-open-message-options\\\" class=\\\"custom-modal-content\\\">\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\n        Quản lý tin nhắn\\n      </div>\\n    </div>\\n    <div class=\\\"modal-options-body\\\">\\n      <div class=\\\"delete-message-locally\\\" (click)=\\\"deleteMessageLocally()\\\">\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.28;font-size: 17px;font-weight: 500\\\">\\n          Xóa tin nhắn được lưu trữ trong hộp thư\\n        </div>\\n      </div>\\n      <div class=\\\"delete-message-permanently\\\" (click)=\\\"deleteMessagePermanently()\\\">\\n        <div style=\\\"margin-top:15px;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\n        line-height: 1.28;font-size: 17px;font-weight: 500;color:red\\\">\\n          Xóa vĩnh viễn tin nhắn \\n        </div>\\n      </div>\\n    </div>\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\n      <!-- <button type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\n        Lưu\\n      </button> -->\\n      <button (click)=\\\"closeMessageOptions()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\n        Hủy\\n      </button>\\n    </div>\\n  </div>\\n</div>\"","import { Component, OnInit, Input, OnDestroy, ViewChild, AfterViewInit, AfterContentChecked,ChangeDetectorRef } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\nimport { MessageService } from '../../services/message.service';\n\n@Component({\n  selector: 'app-message',\n  templateUrl: './message.component.html',\n  styleUrls: ['./message.component.css']\n})\nexport class MessageComponent implements OnInit,OnDestroy,AfterContentChecked,AfterViewInit {\n  @Input() message: any;\n  @Input() lastMessageID: string;\n  @Input() lastUserID: string;\n  @Input() previousLastMessageID: string;\n  @Input() previousUserID: string;\n  @Input() myID: string;\n  @Input() roomchatID: string;\n  communicationSubscription: Subscription;\n  @ViewChild('profileImageMessage') profileImageMessage;\n  @ViewChild('usernameMessage') usernameMessage;\n  openMessageOptionModal: boolean = false;\n  constructor(private componentCommunicationService: ComponentCommunicationService,\n              private cdRef: ChangeDetectorRef,\n              private messageService: MessageService) { }\n\n  ngOnInit() {\n    console.log('boolean: ',this.message.displayLastInfo)\n  }\n\n  ngOnDestroy(){\n\n  }\n\n  ngAfterViewInit(): void {\n    // if(this.lastMessageID + '' === this.message._id + '' && (this.myID !== this.message.userID) && this.message.userID === this.lastUserID){\n    //   this.profileImageMessage.nativeElement.style.display = 'block';\n    //   this.usernameMessage.nativeElement.style.display = 'block';\n    // }\n    \n  }\n\n  ngAfterContentChecked(): void {\n    // if(this.message._id + '' === this.previousLastMessageID + '' && this.message.userID === this.previousUserID){\n    //   if(this.profileImageMessage && this.usernameMessage){\n    //     this.profileImageMessage.nativeElement.style.display = 'none';\n    //     this.usernameMessage.nativeElement.style.display = 'none';\n    //   }\n    // }\n  }\n\n  isMe(){\n    return this.myID === this.message.userID + '';\n  }\n\n  displayLastInfo(){\n    return this.message.displayLastInfo\n  }\n\n  openMessageOptions(){\n    this.openMessageOptionModal = true\n    this.cdRef.detectChanges();\n    let w = window.innerWidth;\n    if(w < 900){\n      document.getElementById('custom-modal-content-open-message-options').style.width = '100%'\n    } else {\n      document.getElementById('custom-modal-content-open-message-options').style.width = '35%'\n    }\n  }\n\n  deleteMessageLocally(){\n    this.messageService.updateOneMessage(this.message._id).subscribe(data => {\n      if(data && data.success){\n        this.componentCommunicationService.setData({\n          fromComponent: 'message',\n          toComponent: 'conversation',\n          type: 'delete-one-message',\n          messageID: this.message._id\n        });\n        this.closeMessageOptions();\n      }\n    })\n  }\n\n  deleteMessagePermanently(){\n    this.messageService.deleteOneMessage(this.message._id).subscribe(data => {\n      console.log('delete vinh vien; ',data)\n      if(data && data.success){\n        \n        this.componentCommunicationService.setData({\n          fromComponent: 'message',\n          toComponent: 'conversation',\n          type: 'delete-one-message',\n          messageID: this.message._id\n        });\n        this.closeMessageOptions();\n      }\n    })\n  }\n\n  closeMessageOptions(){\n    this.openMessageOptionModal = false;\n  }\n}\n","module.exports = \".navbar-search {\\r\\n  position: absolute;\\r\\n  /* margin-top: 15px; */\\r\\n  left: 30%;\\r\\n  width: 280px;\\r\\n}\\r\\n\\r\\n.navbar-search-results {\\r\\n  position: relative;\\r\\n  background-color: white;\\r\\n  box-shadow: 0 0 10px #9ecaed;\\r\\n  border-top: none;\\r\\n  height: auto;\\r\\n  /* z-index: -1; */\\r\\n}\\r\\n\\r\\n.navbar-search-results-each {\\r\\n  height: 40px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.navbar-search-results-each:hover {\\r\\n  background-color: #f8f8f8;\\r\\n}\\r\\n\\r\\n.navbar-custom-brand {\\r\\n  position: absolute;\\r\\n  height: 100%;\\r\\n  width: 100px;\\r\\n  margin-top: -31px;\\r\\n  margin-left: 20px;\\r\\n}\\r\\n\\r\\n.navbar-icon {\\r\\n  position: absolute;\\r\\n  right: 0px;\\r\\n  width: 272px;\\r\\n  height: 36px;\\r\\n}\\r\\n\\r\\n.navbar-custom-image {\\r\\n  width: 100%;\\r\\n  height: auto;\\r\\n}\\r\\n\\r\\n.navbar-custom {\\r\\n  position: relative;\\r\\n  /* margin: 18px; */\\r\\n  margin-top: 18px;\\r\\n  padding: 0px;\\r\\n  height: 36px;\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 768px) {\\r\\n  .navbar-search {\\r\\n    display: none\\r\\n  }\\r\\n}\\r\\n\\r\\n@media screen and (max-width: 350px) {\\r\\n  .navbar-custom-brand {\\r\\n    display: none\\r\\n  }\\r\\n}\\r\\n\\r\\n.notification {\\r\\n  position: absolute;\\r\\n  height: 300px;\\r\\n  width: 560px;\\r\\n  z-index: 10000;\\r\\n  right: 20px;\\r\\n  box-shadow: 0 0 10px #9ecaed;\\r\\n  background-color: white;\\r\\n  border-radius: 10px;\\r\\n}\\r\\n\\r\\n.notification-body {\\r\\n  width: 560px;\\r\\n  height: 300px;\\r\\n  overflow-y: auto;\\r\\n}\\r\\n\\r\\n.notification-profilephoto {\\r\\n  width: 15%;\\r\\n  float: left;\\r\\n  height: 50px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center\\r\\n}\\r\\n\\r\\n.notification-content {\\r\\n  width: 85%;\\r\\n  height: 50px;\\r\\n  float: left;\\r\\n  /* display: flex;\\r\\n    align-items: center; */\\r\\n  border-bottom: 1px solid #fafafa\\r\\n}\\r\\n\\r\\n.notification-body-each {\\r\\n  height: 50px;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.notification-body-each:hover {\\r\\n  background-color: #D0F9F7\\r\\n}\\r\\n\\r\\n.loader-notification {\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center\\r\\n}\\r\\n\\r\\n.notification-body::-webkit-scrollbar-thumb {\\r\\n  border-radius: 13px;\\r\\n  width: 9px;\\r\\n  background-color: #79879b;\\r\\n}\\r\\n\\r\\n.notification-body::-webkit-scrollbar {\\r\\n  width: 9px;\\r\\n  border-radius: 13px;\\r\\n  /* height: 8px; */\\r\\n  background-color: #eff1f4;\\r\\n  /* or add it to the track */\\r\\n  /* -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\\r\\n      border-radius: 10px;\\r\\n      background-color: #F5F5F5;\\r\\n      width: 12px;\\r\\n      background-color: #F5F5F5;\\r\\n      height:100%; */\\r\\n}\\r\\n\\r\\n.custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  background-color: rgb(0, 0, 0);\\r\\n  /* Fallback color */\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.modal-options-content{\\r\\n  height: 70px;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n}\"","module.exports = \"<nav *ngIf='showNavbarComp' id=\\\"navbar-component\\\" class=\\\"navbar navbar-default navbar-fixed-top\\\" style=\\\"height:75px;padding:0px;margin:0px;z-index:0\\\">\\r\\n  <div class=\\\"container navbar-custom\\\">\\r\\n    <div class=\\\"navbar-custom-brand\\\">\\r\\n      <img href=\\\"#\\\" src=\\\"../../assets/logo.png\\\" class=\\\"navbar-custom-image\\\">\\r\\n    </div>\\r\\n    <div *ngIf=\\\"authService.loggedIn()\\\" class=\\\"navbar-icon\\\">\\r\\n      <div (click)=\\\"openNotificationModal()\\\" style=\\\"float:left;width:68px;height:36px;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\r\\n        <a>\\r\\n          <i id=\\\"notification-icon\\\" class=\\\"fas fa-globe-africa\\\" style=\\\"font-size:170%;margin-top:6px\\\"></i>\\r\\n        </a>\\r\\n        <div id=\\\"count-notification-icon\\\" style=\\\"background-color:red;font-weight: 600;font-size: 12px;color: white;border-radius: 7px;margin-top: -13px;margin-left: -6px\\\">\\r\\n          {{numberOfUnreadNotifications}}\\r\\n        </div>\\r\\n      </div>\\r\\n      <div style=\\\"float:left;width:68px;height:36px;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\r\\n        <a (click)=\\\"onClickNavigateToHome()\\\">\\r\\n          <i class=\\\"fas fa-home\\\" style=\\\"font-size:170%;margin-top:6px\\\"></i>\\r\\n        </a>\\r\\n      </div>\\r\\n      <div style=\\\"float:left;width:68px;height:36px;display: flex;align-items: center;justify-content: center;cursor: pointer;\\\">\\r\\n        <a routerLink=\\\"/contacts\\\" routerLinkActive=\\\"active\\\">\\r\\n          <i class=\\\"fas fa-users\\\" style=\\\"font-size:185%;margin-top:6px\\\"></i>\\r\\n        </a>\\r\\n      </div>\\r\\n\\r\\n      <div style=\\\"float:left;width:68px;height:36px;display: flex;align-items: center;justify-content: center;cursor:pointer\\\">\\r\\n        <a routerLink=\\\"/profile\\\" routerLinkActive=\\\"active\\\">\\r\\n          <i class=\\\"fas fa-user-circle\\\" style=\\\"font-size:170%;margin-top:6px\\\"></i>\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n  </div>\\r\\n</nav>\\r\\n<!-- <div class=\\\"container\\\" style=\\\"position:relative;cursor:pointer;\\\" *ngIf=\\\"openNotification\\\" (clickOutside)=\\\"closeNotification($event)\\\">\\r\\n  <div class=\\\"notification\\\" style=\\\"margin-top:84px\\\">\\r\\n    <div class=\\\"notification-body\\\" id='notification-body' (scroll)=\\\"onScrolNotificationPopover()\\\">\\r\\n      <div *ngFor=\\\"let notification of notifications\\\" (click)=\\\"onClickNotification(notification)\\\" class=\\\"notification-body-each\\\">\\r\\n        <div class=\\\"notification-profilephoto\\\">\\r\\n          <img src={{notification.fromUser.profileImage}} style=\\\"width:40px;border-radius: 50%\\\">\\r\\n        </div>\\r\\n        <div class=\\\"notification-content\\\" [style.font-weight]=\\\"notification.isSeen ? '' : '600'\\\">\\r\\n          {{notification.content}}\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf='!loadNotificationComplete' id='loader-notification' class=\\\"loader-notification\\\">\\r\\n        <img style=\\\"height:25px\\\" src='../../../assets/loader-notification.gif'>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div> -->\\r\\n\\r\\n<div (clickOutside)=\\\"closeNotificationPopover($event)\\\" class=\\\"container\\\" style=\\\"position:relative;cursor:pointer;\\\"\\r\\n  *ngIf=\\\"openNotification\\\" (clickOutside)=\\\"closeNotification($event)\\\">\\r\\n  <div class=\\\"notification\\\" style=\\\"margin-top:84px\\\">\\r\\n    <div class=\\\"notification-body\\\" id='notification-body' (scroll)=\\\"onScrolNotificationPopover()\\\">\\r\\n      <div *ngFor=\\\"let notification of notifications\\\" (click)=\\\"onClickNotification(notification)\\\" class=\\\"notification-body-each\\\">\\r\\n        <div class=\\\"notification-profilephoto\\\">\\r\\n          <img src={{notification.profileImage}} style=\\\"width:40px;border-radius: 50%\\\">\\r\\n        </div>\\r\\n        <div class=\\\"notification-content\\\">\\r\\n          <div style=\\\"width:100%;height:25px;font-weight: 600\\\">\\r\\n            @{{notification.username}}\\r\\n          </div>\\r\\n          <div style=\\\"width:100%;height:25px\\\">\\r\\n            <div *ngIf=\\\"notification.type === 'incomming-message'\\\" style=\\\"font-weight: 400;text-overflow: ellipsis;overflow: hidden;white-space: nowrap\\\">\\r\\n              <div [style.font-weight]=\\\"notification.seen ? '' : '600'\\\">\\r\\n                Tin nhắn mới: {{notification.content}}\\r\\n              </div>\\r\\n\\r\\n            </div>\\r\\n            <div *ngIf=\\\"notification.type === 'friend-request'\\\" style=\\\"font-weight: 400;text-overflow: ellipsis;overflow: hidden;white-space: nowrap\\\">\\r\\n              <div [style.font-weight]=\\\"notification.seen ? '' : '600'\\\">\\r\\n                Lời mời kết bạn: {{notification.content}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div *ngIf='loadingNotifications' id='loader-notification' class=\\\"loader-notification\\\">\\r\\n        <img style=\\\"height:25px\\\" src='../../../assets/loading.gif'>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<div *ngIf=\\\"showAcceptFriendModal\\\" id=\\\"accept-friend-modal\\\" class=\\\"custom-modal\\\">\\r\\n  <div class=\\\"custom-modal-content\\\" style=\\\"height: 130px\\\">\\r\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\r\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\r\\n        Lời mời kết bạn từ @{{friendRequestInfo.fromUserUsername}}\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-options-content\\\">\\r\\n      <div style=\\\"width:100%;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n        line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px;display: flex;justify-content: center;align-items: center\\\">\\r\\n        <div style=\\\"width:50%;height:100%;float: left;display: flex;justify-content: center;align-items: center\\\">\\r\\n          <button (click)=\\\"acceptFriend()\\\" class=\\\"btn btn-primary\\\">Chấp nhận</button>\\r\\n        </div>\\r\\n        <div (click)=\\\"closeConfirmAcceptFriend()\\\" style=\\\"width:50%;height:100%;float: left;display: flex;justify-content: center;align-items: center\\\">\\r\\n          <button class=\\\"btn btn-danger\\\">Bỏ qua</button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <!-- <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\r\\n      <button (click)=\\\"deleteRoomchat()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\r\\n        OK\\r\\n      </button>\\r\\n      <button (click)=\\\"onClickCancelDeleteRoomchatModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\r\\n        Hủy\\r\\n      </button>\\r\\n    </div> -->\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { AuthenticationService } from '../../services/authentication.service';\nimport { FriendService } from '../../services/friend.service';\nimport { Router } from '@angular/router';\n@Component({\n  selector: 'app-navbar',\n  templateUrl: './navbar.component.html',\n  styleUrls: ['./navbar.component.css']\n})\nexport class NavbarComponent implements OnInit {\n  notifications: Array<any> = [];\n  numberOfUnreadNotifications: number = 0;\n  showNavbarComp: boolean = true;\n  openNotification: boolean = false;\n  loadNotificationComplete: boolean = true;\n  continueToLoad: boolean = true;\n  previousTimeSeq: number = 0;\n  loadingNotifications: boolean = false;\n  roomchatNotifications: Array<string> = [];\n  showAcceptFriendModal: boolean = false;\n  friendRequestInfo = {\n    fromUserID: '',\n    fromUserUsername: '',\n    destUserID: ''\n  }\n  constructor(private componentCommunicationService: ComponentCommunicationService,\n    private cdRef: ChangeDetectorRef,\n    private router: Router,\n    private authService: AuthenticationService,\n    private friendService: FriendService,\n    private notificationService: NotificationService) { }\n\n  ngOnInit() {\n    this.authService.getTokenStatus().subscribe(data => {\n      if (data) {\n        if (data.isAdded) {\n          this.notificationService.getNumberOfUnreadNotifications().subscribe(data => {\n            if (data && data.success) {\n              this.numberOfUnreadNotifications = data.numberOfUnreadNotifications;\n            }\n          })\n        }\n      }\n    })\n    this.componentCommunicationService.getData().subscribe(data => {\n      if (data && data.fromComponent === 'answer' && data.type === 'hide-navbar') {\n        this.showNavbarComp = false;\n      } else if (data && data.fromComponent === 'app' && data.type === 'receive-notification') {\n        let notification = this.processNotificationObject(data.notification);\n        if (!this.roomchatNotifications.includes(notification.fromRoomchatID)) {\n          this.notifications.unshift(notification);\n          this.numberOfUnreadNotifications++;\n        }\n\n      } else if (data && data.fromComponent === 'info-conversation' && data.type === 'turn-off-notification') {\n        this.roomchatNotifications.push(data.roomchatID)\n        console.log('LOG-off: ',this.roomchatNotifications)\n      } else if (data && data.fromComponent === 'info-conversation' && data.type === 'turn-on-notification') {\n        for(let i = 0;i < this.roomchatNotifications.length; i++){\n          if(this.roomchatNotifications[i] === data.roomchatID){\n            this.roomchatNotifications.splice(i,1);\n            break;\n          }\n        }\n      } else if (data && data.fromComponent === 'app' && data.type === 'friend-request'){\n        let preNotification = {\n          detail: {},\n          fromUserInfo: data.data.fromUserInfo,\n          toUserID: data.data.destUserID,\n          time: 0,\n          seen: false,\n          type:'friend-request'\n        }\n        let finalNotification = this.processNotificationObject(preNotification);\n        this.notifications.unshift(finalNotification)\n        this.numberOfUnreadNotifications++;\n      }\n    })\n  }\n\n  closeNotification($event) {\n\n  }\n\n  openNotificationModal() {\n    this.openNotification = true;\n    this.cdRef.detectChanges();\n    this.loadingNotifications = true;\n    if (!this.authService.loggedIn()) return;\n    this.previousTimeSeq = Date.now() + 100000;\n    this.notifications = [];\n    this.notificationService.getNotifications(this.previousTimeSeq, 10).subscribe(data => {\n      if (data && data.success) {\n        this.loadingNotifications = false;\n        if (data.notifications.length === 0) return;\n        for (let notificationObj of data.notifications) {\n          let preNotification = {\n            detail: notificationObj.notification.detail,\n            fromUserInfo: notificationObj.fromUserInfo,\n            toUserID: notificationObj.notification.toUserID,\n            time: notificationObj.notification.time,\n            seen: notificationObj.notification.seen,\n            type: notificationObj.notification.detail.typeNotification\n          }\n          preNotification.fromUserInfo.profileImage = preNotification.fromUserInfo.profileImage.lowQuality;\n          let finalNotification = this.processNotificationObject(preNotification);\n          this.notifications.push(finalNotification)\n        }\n        this.numberOfUnreadNotifications = this.notifications.filter(el => !el.seen).length;\n        this.previousTimeSeq = this.notifications[this.notifications.length - 1].time;\n\n      }\n    })\n  }\n\n  onClickNotification(notification) {\n    let typeNotification = notification.type;\n    let fromRoomchatID = notification.fromRoomchatID;\n    this.openNotification = false;\n    if (typeNotification === 'incomming-message') {\n      if (this.getCurrentDevice() === 'desktop') {\n        this.componentCommunicationService.setData({\n          fromComponent: 'navbar',\n          toComponent: 'roomchat',\n          type: 'on-click-lastmessage',\n          roomchatID: notification.fromRoomchatID\n        })\n        return this.router.navigate(['home/conversation', fromRoomchatID])\n      } else if (this.getCurrentDevice() === 'mobile') {\n        console.log('mobile')\n        return this.router.navigate(['conversation', fromRoomchatID])\n      }\n\n    } else if(typeNotification === 'friend-request'){\n      this.friendRequestInfo = {\n        fromUserID: notification.fromUserID,\n        fromUserUsername: notification.username,\n        destUserID: notification.toUserID\n      }\n      this.showAcceptFriendModal = true;\n    }\n  }\n\n  onClickNavigateToHome(){\n    return this.router.navigate([\"home\"]);\n  }\n\n  processNotificationObject(notificationObject) {\n    let typeNotification = notificationObject.type;\n    let fromUserInfo = notificationObject.fromUserInfo;\n    let toUserID = notificationObject.toUserID;\n    let time = notificationObject.time;\n    let detail = notificationObject.detail;\n    if (typeNotification === 'incomming-message') {\n      let content = '';\n      if (detail && detail !== {} && detail.typeContent === 'text') {\n        content = detail.content;\n      } else if (detail && detail !== {} && detail.typeContent === 'file') {\n        content = fromUserInfo.username + ' đã gửi ảnh cho bạn'\n      }\n      return {\n        content: content,\n        username: fromUserInfo.username,\n        fromUserID: fromUserInfo._id,\n        type: 'incomming-message',\n        fromRoomchatID: detail.fromRoomchatID,\n        time: time,\n        seen: notificationObject.seen,\n        toUserID: toUserID,\n        profileImage: fromUserInfo.profileImage\n      }\n    } else if(typeNotification === 'friend-request') {\n      return {\n        content: '@'+fromUserInfo.username+' vừa gửi lời mới kết bạn, ấn để xem',\n        type: 'friend-request',\n        username: fromUserInfo.username,\n        fromUserID: fromUserInfo._id,\n        profileImage: fromUserInfo.profileImage,\n        time: time,\n        toUserID: toUserID,\n        seen: notificationObject.seen\n      }\n    }\n  }\n\n  onScrolNotificationPopover() {\n    let scrollTop = document.getElementById('notification-body').scrollTop;\n    let scrollHeight = document.getElementById('notification-body').scrollHeight;\n    let clientHeight = document.getElementById('notification-body').clientHeight;\n    if (\n      scrollHeight - 10 < clientHeight + scrollTop &&\n      this.continueToLoad\n    ) {\n      this.continueToLoad = false;\n      this.loadingNotifications = true;\n      this.cdRef.detectChanges();\n      this.notificationService.getNotifications(this.previousTimeSeq, 10).subscribe(data => {\n        if (data && data.success) {\n          this.loadingNotifications = false;\n          this.continueToLoad = true;\n          this.numberOfUnreadNotifications = data.numberOfUnreadNotifications;\n          if (data.notifications.length === 0) {\n            this.continueToLoad = false;\n            this.loadingNotifications = false;\n            return;\n          }\n          for (let notificationObj of data.notifications) {\n            let preNotification = {\n              detail: notificationObj.notification.detail,\n              fromUserInfo: notificationObj.fromUserInfo,\n              toUserID: notificationObj.notification.toUserID,\n              time: notificationObj.notification.time,\n              seen: notificationObj.notification.seen,\n              type: notificationObj.notification.detail.typeNotification\n            }\n            preNotification.fromUserInfo.profileImage = preNotification.fromUserInfo.profileImage.lowQuality;\n            let finalNotification = this.processNotificationObject(preNotification);\n            this.notifications.push(finalNotification)\n\n          }\n          this.previousTimeSeq = this.notifications[this.notifications.length - 1].time;\n        }\n      })\n    }\n  }\n\n  acceptFriend(){\n    return this.friendService.acceptFriend(this.friendRequestInfo.fromUserID).subscribe(data => {\n      if(data && data.success){\n        this.showAcceptFriendModal = false;\n        return alert(\"Accepted @\" + this.friendRequestInfo.fromUserUsername + \"'s friend request successfully!\" )\n      } else {\n        this.showAcceptFriendModal = false;\n        return alert(\"Error when accepting @\" + this.friendRequestInfo.fromUserUsername + \"'s friend request!\" )\n      }\n    })\n  }\n\n  closeConfirmAcceptFriend(){\n    return this.showAcceptFriendModal = false;\n  }\n\n  closeNotificationPopover($event) {\n    let excludeID = $event.target.id;\n    if (excludeID === 'notification-icon' || excludeID === 'count-notification-icon') return;\n    this.openNotification = false\n    if (this.notifications.length === 0) return;\n    this.notificationService.updateNotifications(Date.now() + 1000, this.notifications[this.notifications.length - 1].time - 1).subscribe(data => {\n      this.notificationService.getNumberOfUnreadNotifications().subscribe(data => {\n        if (data && data.success) {\n          this.numberOfUnreadNotifications = data.numberOfUnreadNotifications;\n        }\n      })\n    })\n  }\n\n  getCurrentDevice() {\n    let w = window.innerWidth;\n    if (w < 900) {\n      return 'mobile'\n    } else {\n      return 'desktop'\n    }\n  }\n\n\n}\n","module.exports = \".newmessage-header {\\r\\n  width: 100%;\\r\\n  height: 60px;\\r\\n  border-bottom: solid;\\r\\n  border-color: #e7e7e7;\\r\\n  border-width: thin;\\r\\n}\\r\\n\\r\\n.newmessage-header-label {\\r\\n  height: 60px;\\r\\n  padding-left: 8px;\\r\\n  padding-top: 8px;\\r\\n  float: left;\\r\\n  padding-bottom: 8px;\\r\\n  width: 50px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.newmessage-body {\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.newmessage-header-search {\\r\\n  height: 100%;\\r\\n  float: left;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  padding: 10px;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  line-height: 1.28\\r\\n}\\r\\n\\r\\n.newmessage-search-result {\\r\\n  position: relative;\\r\\n  background-color: white;\\r\\n  box-shadow: 0 0 10px #9ecaed;\\r\\n  border-top: none;\\r\\n  top: 60px;\\r\\n  width: 50%;\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.newmessage-search-results-each {\\r\\n  height: 50px;\\r\\n  width: 100%;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.newmessage-search-results-each-username {\\r\\n  height: 50px;\\r\\n  position: absolute;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n  float: right;\\r\\n  left: 60px;\\r\\n}\\r\\n\\r\\n.newmessage-tags {\\r\\n  width: 100%;\\r\\n  height: auto;\\r\\n  float: left;\\r\\n  border-bottom: solid;\\r\\n  border-color: #e7e7e7;\\r\\n  border-width: thin;\\r\\n}\\r\\n\\r\\n.newmessage-header-previous {\\r\\n  float: left;\\r\\n  height: 100%;\\r\\n  width: 40px;\\r\\n  cursor: pointer;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center\\r\\n}\\r\\n\"","module.exports = \"<div style=\\\"margin-top:74px\\\">\\n  <div id=\\\"newmessage-header\\\" class=\\\"newmessage-header\\\">\\n    <div (click)='onClickPreviousNav()' id=\\\"newmessage-header-previous\\\" class=\\\"newmessage-header-previous\\\" *ngIf='showNavPrevious'>\\n      <i class=\\\"fas fa-chevron-left\\\" style=\\\"font-size:30px;\\\"></i>\\n    </div>\\n    <div class=\\\"newmessage-header-label\\\">\\n      Đến:\\n    </div>\\n    <div id=\\\"newmessage-header-search\\\" style=\\\"padding-left: 0px;\\\" class=\\\"newmessage-header-search\\\">\\n      <input type=\\\"text\\\" [(ngModel)]=\\\"searchTerm\\\" (ngModelChange)='onSearchUser()' placeholder=\\\"Nhập bạn bè...\\\" style=\\\"height: 100%;width: 100%;outline: none;border:transparent\\\">\\n    </div>\\n    <div (click)=\\\"createConversation()\\\" style=\\\"float:left;width:40px;height:100%;padding-top:8px;padding-right:8px;padding-bottom: 8px;display: flex;justify-content: center;align-items: center;cursor: pointer\\\">\\n      <i class=\\\"fas fa-plus\\\" style=\\\"font-size:20px\\\"></i>\\n    </div>\\n    <div class=\\\"newmessage-tags\\\" id=\\\"newmessage-tags\\\" *ngIf=\\\"taggedUsers.length !== 0\\\">\\n      <div *ngFor='let taggedUser of taggedUsers' style=\\\"width:auto;height:50px;float: left;display: block\\\">\\n        <div style=\\\"float:left;height:50px;text-align: center\\\">\\n          <div style=\\\"margin-left:10px;margin-top: 6px;font-weight: 600;background-color: palegreen;padding: 8px;border: transparent;border-radius: 15px;float:left\\\">\\n            {{taggedUser.username}}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"searchedList.length !== 0\\\" class=\\\"newmessage-search-result\\\" id=\\\"newmessage-search-result\\\">\\n      <div id=\\\"newmessage-search-results-each\\\" name=\\\"newmessage-search-results\\\" *ngFor='let searchedUser of searchedList'\\n        class=\\\"newmessage-search-results-each\\\" (click)=\\\"onClickSearchResult(searchedUser.username, searchedUser._id)\\\">\\n        <div id=\\\"newmessage-search-results-each-image\\\" name=\\\"newmessage-search-results\\\" style=\\\"width: 60px;height:50px;position: absolute;display:flex;justify-content: center;align-items: center;float:left\\\">\\n          <img id=\\\"newmessage-search-results\\\" name=\\\"newmessage-search-results\\\" src={{searchedUser.profileImage.lowQuality}}\\n            style=\\\"width:30px;border-radius: 50%\\\">\\n        </div>\\n        <div id=\\\"newmessage-search-results-each-username\\\" name=\\\"newmessage-search-results\\\" class=\\\"newmessage-search-results-each-username\\\">\\n          {{searchedUser.username}}\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div id=\\\"newmessage-body\\\" class=\\\"newmessage-body\\\">\\n\\n  </div>\\n</div>\\n\"","import {\r\n  Component,\r\n  OnInit,\r\n  HostListener,\r\n  ChangeDetectorRef\r\n} from \"@angular/core\";\r\nimport { UserService } from \"../../services/user.service\";\r\nimport { RoomchatService } from \"../../services/roomchat.service\";\r\nimport { RoomchatUserService } from \"../../services/roomchat-user.service\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\nimport { ComponentCommunicationService } from \"../../services/component-communication.service\";\r\n\r\n@Component({\r\n  selector: \"app-new-message\",\r\n  templateUrl: \"./new-message.component.html\",\r\n  styleUrls: [\"./new-message.component.css\"]\r\n})\r\nexport class NewMessageComponent implements OnInit {\r\n  searchTerm: string = \"\";\r\n  searchedList: Array<any> = [];\r\n  taggedUsers: Array<any> = [];\r\n  showResult: boolean = false;\r\n  myID: string = \"\";\r\n  showNavPrevious: boolean = false;\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onResize(event) {\r\n    this.adjust();\r\n  }\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private cdR: ChangeDetectorRef,\r\n    private roomchatService: RoomchatService,\r\n    private roomchatUserService: RoomchatUserService,\r\n    private socketService: SocketService,\r\n    private componentCommunicationService: ComponentCommunicationService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      this.router.navigate([\"newmessage\"]);\r\n    } else {\r\n      this.router.navigate([\"home/newmessage\"]);\r\n    }\r\n    this.adjust();\r\n\r\n    this.userService.getMe(\"low\").subscribe(data => {\r\n      if (data && data.success) {\r\n        this.myID = data.user._id;\r\n      }\r\n    });\r\n  }\r\n\r\n  adjust() {\r\n    let newMessageHeight = window.innerHeight - 185;\r\n    let inputNewMessageWidth =\r\n      document.getElementById(\"newmessage-header\").clientWidth - 92;\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      inputNewMessageWidth = inputNewMessageWidth - 40;\r\n      this.showNavPrevious = true;\r\n    } else {\r\n      this.showNavPrevious = false;\r\n    }\r\n    document.getElementById(\"newmessage-header-search\").style.width =\r\n      inputNewMessageWidth + \"px\";\r\n    document\r\n      .getElementById(\"newmessage-body\")\r\n      .setAttribute(\"style\", \"height: \" + newMessageHeight + \"px\");\r\n  }\r\n\r\n  onSearchUser() {\r\n    this.userService.searchUsers(this.searchTerm, \"friend\").subscribe(data => {\r\n      if (data && data.success) {\r\n        this.searchedList = data.users;\r\n        this.cdR.detectChanges();\r\n        let a = document.getElementById(\"newmessage-search-result\");\r\n        if (document.getElementById(\"newmessage-tags\")) {\r\n          let b = document.getElementById(\"newmessage-tags\").clientHeight + 60;\r\n          this.cdR.detectChanges();\r\n          a.style.top = b + \"px\";\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onClickPreviousNav() {\r\n    return this.router.navigate([\"roomchats\"]);\r\n  }\r\n\r\n  onClickSearchResult(username, userID) {\r\n    let userIDs = this.taggedUsers.map(el => el.userID);\r\n    if (!userIDs.includes(userID)) {\r\n      this.taggedUsers.push({\r\n        username: username,\r\n        userID: userID\r\n      });\r\n    }\r\n\r\n    this.searchedList = [];\r\n  }\r\n\r\n  createConversation() {\r\n    if (this.taggedUsers.length === 0) return;\r\n    let nameConversation = \"\";\r\n    if (this.taggedUsers.length <= 2) {\r\n      let head = this.taggedUsers\r\n        .slice(0, 2)\r\n        .map(el => el.username)\r\n        .join(\" và \")\r\n        .trim();\r\n      console.log(\"head: \", this.taggedUsers.slice(0, 2).join(\" và \"));\r\n      nameConversation = head;\r\n    } else {\r\n      let head = this.taggedUsers\r\n        .slice(0, 2)\r\n        .map(el => el.username)\r\n        .join(\", \")\r\n        .trim();\r\n      let offset = this.taggedUsers.length - 2;\r\n      nameConversation = head + \" và \" + offset + \" người khác\";\r\n    }\r\n    let userIDs = this.taggedUsers.map(el => el.userID);\r\n    this.roomchatService.checkDuplicateRoomchat(userIDs).subscribe(dataa => {\r\n      if (dataa && dataa.success) {\r\n        if (dataa.duplicate === true) {\r\n          let w = window.innerWidth;\r\n          if (w < 900) {\r\n            this.router.navigate([\"/conversation\", dataa.roomchatID]);\r\n          } else {\r\n            this.router.navigate([\"/home/conversation\", dataa.roomchatID]);\r\n          }\r\n        } else {\r\n          this.roomchatService\r\n            .createRoomchat(nameConversation)\r\n            .subscribe(data => {\r\n              if (data && data.success) {\r\n                let roomchatID = data.roomchat._id;\r\n                this.roomchatUserService\r\n                  .addUsersToRoomchat(userIDs, roomchatID)\r\n                  .subscribe(data => {\r\n                    if (data && data.success) {\r\n                      this.socketService.createRoomchat(\r\n                        userIDs,\r\n                        roomchatID,\r\n                        this.myID + \"_user\"\r\n                      );\r\n                      let w = window.innerWidth;\r\n                      if (w < 900) {\r\n                        this.router.navigate([\"/conversation\", roomchatID]);\r\n                      } else {\r\n                        this.router.navigate([\r\n                          \"/home/conversation\",\r\n                          roomchatID\r\n                        ]);\r\n                      }\r\n                      this.componentCommunicationService.setData({\r\n                        fromComponent: \"new\",\r\n                        toComponent: \"roomchat\",\r\n                        type: \"reload-component\"\r\n                      });\r\n                    }\r\n                  });\r\n              }\r\n            });\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = \".profile-image {\\r\\n  width: 50px;\\r\\n  height: 60px;\\r\\n  float: left;\\r\\n}\\r\\n\\r\\n.contact-header {\\r\\n  height: 60px;\\r\\n  padding: 8px;\\r\\n  width: 100%;\\r\\n  border-bottom: solid;\\r\\n  border-color: #e7e7e7;\\r\\n  border-width: thin;\\r\\n}\\r\\n\\r\\n.contact-header-label {\\r\\n  font-size: 22px;\\r\\n  font-weight: 500;\\r\\n  overflow: hidden;\\r\\n  text-align: center;\\r\\n  vertical-align: middle;\\r\\n  float: left;\\r\\n  margin-left: 40%;\\r\\n  font-family: SFUIText-Regular, Segoe UI, Helvetica Neue, Helvetica, Arial, sans-serif;\\r\\n}\\r\\n\\r\\n.contact-header-newmessage {\\r\\n  min-width: 32px;\\r\\n  float: right;\\r\\n  height: 100%;\\r\\n  width: 40px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.contact-header-next {\\r\\n  min-width: 32px;\\r\\n  float: right;\\r\\n  height: 100%;\\r\\n  width: 40px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.contact-search {\\r\\n  width: 100%;\\r\\n  height: 60px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n.contact-body {\\r\\n  /* padding-left: 10px;\\r\\n        padding-right: 10px; */\\r\\n}\\r\\n\\r\\n.contact-body :hover {\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n@media screen and (max-width:420px) {}\\r\\n\\r\\n@media screen and (max-width:910px) {}\\r\\n\\r\\n.custom-modal {\\r\\n  display: block;\\r\\n  /* Hidden by default */\\r\\n  position: fixed;\\r\\n  /* Stay in place */\\r\\n  z-index: 10;\\r\\n  /* Sit on top */\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  /* Full width */\\r\\n  height: 100%;\\r\\n  /* Full height */\\r\\n  background-color: rgb(0, 0, 0);\\r\\n  /* Fallback color */\\r\\n  background-color: rgba(0, 0, 0, 0.4);\\r\\n  /* Black w/ opacity */\\r\\n  /* overflow: auto; */\\r\\n}\\r\\n\\r\\n.custom-modal-content {\\r\\n  background-color: #fefefe;\\r\\n  margin: auto;\\r\\n  margin-top: 5%;\\r\\n  border: 1px solid #888;\\r\\n  width: 35%;\\r\\n  height: 220px;\\r\\n  border-radius: 10px;\\r\\n  overflow: hidden;\\r\\n  font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n  line-height: 1.28;\\r\\n  font-size: 17px;\\r\\n  font-weight: 500\\r\\n    /* Could be more or less, depending on screen size */\\r\\n}\\r\\n\\r\\n.modal-options-content {\\r\\n  height: 70px;\\r\\n  width: 100%;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-content: center;\\r\\n}\\r\\n\"","module.exports = \"<div class=\\\"container\\\">\\r\\n  <div style=\\\"margin-top:74px\\\">\\r\\n    <div class=\\\"contact-header\\\">\\r\\n      <div class=\\\"contact-header-label\\\" style=\\\"margin-top: 10px\\\" id=\\\"contact-header-label\\\">\\r\\n        <i style=\\\"font-size: 110%\\\" class=\\\"fas fa-info-circle\\\"></i>\\r\\n        Thông tin cá nhân\\r\\n      </div>\\r\\n      <div id=\\\"contact-header-next\\\" class=\\\"contact-header-next\\\" style=\\\"display: none;\\\">\\r\\n        <i class=\\\"fas fa-chevron-right\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col col-md-4 col-lg-4\\\">\\r\\n      <img style=\\\"width: 100%\\\" src=\\\"{{avtSrc}}\\\">\\r\\n      <a style=\\\"text-decoration: none;cursor: pointer\\\" (click)=\\\"openModifyUserProfileModal()\\\">\\r\\n        <i class=\\\"fas fa-user-edit\\\"></i>\\r\\n        Chỉnh sửa\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"col col-md-8 col-lg-8\\\">\\r\\n      <table class=\\\"table table-hover table-responsive\\\">\\r\\n        <tbody>\\r\\n          <tr>\\r\\n            <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n              <div style=\\\"width:70%;font-size:20px;height:100%;margin-left:20px;float: left;display: flex;align-items: center\\\">\\r\\n                <i class=\\\"fas fa-envelope\\\" style=\\\"margin-right:10px\\\"></i> {{email}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n              <div style=\\\"width:70%;font-size:20px;height:100%;margin-left:22px;float: left;display: flex;align-items: center\\\">\\r\\n                <i class=\\\"fas fa-user\\\" style=\\\"margin-right:10px\\\"></i> {{username}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n              <div style=\\\"width:70%;font-size:20px;height:100%;margin-left:20px;float: left;display: flex;align-items: center\\\">\\r\\n                <i class=\\\"fas fa-phone\\\" style=\\\"margin-right:10px\\\"></i> {{phoneNumber}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n              <div style=\\\"width:70%;font-size:20px;height:100%;margin-left:16px;float: left;display: flex;align-items: center\\\">\\r\\n                <i class=\\\"fa fa-users\\\" style=\\\"margin-right:10px\\\"></i> {{class}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n              <div style=\\\"width:70%;font-size:20px;height:100%;margin-left:20px;float: left;display: flex;align-items: center\\\">\\r\\n                <i class=\\\"fa fa-graduation-cap\\\" style=\\\"margin-right:10px\\\"></i> {{grade}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <div style=\\\"width:100%;height:70px;border-bottom: solid thin #e7e7e7;\\\">\\r\\n              <div style=\\\"width:70%;font-size:20px;height:100%;margin-left:20px;float: left;display: flex;align-items: center\\\">\\r\\n                <i class=\\\"fa fa-graduation-cap\\\" style=\\\"margin-right:10px\\\"></i> {{mssv}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </tr>\\r\\n        </tbody>\\r\\n      </table>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div *ngIf=\\\"showModifyUserProfile\\\" id=\\\"modify-user-profile-modal\\\" class=\\\"custom-modal\\\">\\r\\n  <div class=\\\"custom-modal-content\\\" style=\\\"height: 444px;width: 45%\\\">\\r\\n    <div style=\\\"background-color: #e7e7e7;border-bottom:1px solid;border-color:#e7e7e7;padding-top:0px;display: flex;align-content: center;width: 100%;height: 57px\\\">\\r\\n      <div style=\\\"margin-left:10px;margin-top:14px;font-size: 20px\\\">\\r\\n        Cập nhật thông tin cá nhân\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"modal-options-content\\\" style=\\\"height: 323px;\\\">\\r\\n      <div style=\\\"width:100%;font-family: Helvetica Neue, Segoe UI, Helvetica, Arial, sans-serif;\\r\\n          line-height: 1.50;font-size: 17px;font-weight: 500;text-align: center;padding: 10px\\\">\\r\\n        <form style=\\\"width:100%\\\">\\r\\n          <div class=\\\"form-group row\\\">\\r\\n            <label for=\\\"email\\\" class=\\\"col-sm-2 col-form-label\\\">Email</label>\\r\\n            <div class=\\\"col-sm-10\\\">\\r\\n              <input disabled type=\\\"email\\\" [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"email\\\"  class=\\\"form-control\\\" id=\\\"email\\\" placeholder=\\\"Email\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"form-group row\\\">\\r\\n            <label for=\\\"username\\\" class=\\\"col-sm-2 col-form-label\\\">Username</label>\\r\\n            <div class=\\\"col-sm-10\\\">\\r\\n              <input type=\\\"text\\\" class=\\\"form-control\\\" [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"username\\\" id=\\\"email\\\" placeholder=\\\"Username\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"form-group row\\\">\\r\\n            <label for=\\\"phoneNumber\\\" class=\\\"col-sm-2 col-form-label\\\">Phone Number</label>\\r\\n            <div class=\\\"col-sm-10\\\">\\r\\n              <input type=\\\"text\\\" class=\\\"form-control\\\" [ngModelOptions]=\\\"{standalone: true}\\\"  [(ngModel)]=\\\"phoneNumber\\\" id=\\\"phoneNumber\\\" placeholder=\\\"Phone Number\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"form-group row\\\">\\r\\n            <label for=\\\"mssv\\\" class=\\\"col-sm-2 col-form-label\\\">MSSV</label>\\r\\n            <div class=\\\"col-sm-10\\\">\\r\\n              <input type=\\\"text\\\" class=\\\"form-control\\\" [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"mssv\\\" id=\\\"mssv\\\" placeholder=\\\"MSSV\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"form-group row\\\">\\r\\n            <label for=\\\"class\\\" class=\\\"col-sm-2 col-form-label\\\">Lớp</label>\\r\\n            <div class=\\\"col-sm-10\\\">\\r\\n              <input type=\\\"text\\\" class=\\\"form-control\\\" [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"class\\\" id=\\\"class\\\" placeholder=\\\"Class\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"form-group row\\\">\\r\\n            <label for=\\\"grade\\\" class=\\\"col-sm-2 col-form-label\\\">Khóa</label>\\r\\n            <div class=\\\"col-sm-10\\\">\\r\\n              <input type=\\\"text\\\" class=\\\"form-control\\\" [ngModelOptions]=\\\"{standalone: true}\\\" [(ngModel)]=\\\"grade\\\" id=\\\"grade\\\" placeholder=\\\"grade\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n        </form>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div style=\\\"width:100%;height: 61px;border-top:1px solid;border-color:#e7e7e7;\\\">\\r\\n      <button (click)=\\\"updateProfile()\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px\\\">\\r\\n        Lưu\\r\\n      </button>\\r\\n      <button (click)=\\\"closeModifyUserProfileModal()\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" style=\\\"float:right;width:80px;height: 40px;margin:10px;margin-right:10px\\\">\\r\\n        Hủy\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","import { Component, OnInit } from '@angular/core';\r\nimport { UserService } from '../../services/user.service';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  username : String;\r\n  phoneNumber: String;\r\n  email : String;\r\n  avtSrc : String;\r\n  class : String;\r\n  grade : String;\r\n  mssv: String;\r\n  showModifyUserProfile: boolean = false;\r\n  constructor(private userService: UserService) { }\r\n\r\n  ngOnInit() {\r\n    this.loadProfile();\r\n  }\r\n\r\n  async loadProfile(){\r\n    var data = await this.userService.getMe(\"low\").toPromise();\r\n    if((!data) || !data.success){\r\n      return alert('Error happenned! Load fail')\r\n    }\r\n    this.username = data.user.username;\r\n    this.phoneNumber = data.user.phoneNumber;\r\n    this.email = data.user.email;\r\n    this.avtSrc = data.user.profileImage.lowQuality;\r\n    this.class = data.user.detail.class || '';\r\n    this.grade = data.user.detail.grade || '';\r\n    this.mssv = data.user.detail.mssv || '';\r\n  }\r\n\r\n  openModifyUserProfileModal(){\r\n    return this.showModifyUserProfile = true\r\n  }\r\n\r\n  closeModifyUserProfileModal(){\r\n    return this.showModifyUserProfile = false;\r\n  }\r\n\r\n  updateProfile(){\r\n    return this.userService.updateUserProfile({\r\n      username: this.username,\r\n      phoneNumber: this.phoneNumber,\r\n      \"detail.mssv\": this.mssv,\r\n      \"detail.grade\": this.grade,\r\n      \"detail.class\": this.class\r\n    }).subscribe(data => {\r\n      if(data && data.success){\r\n        alert('Update profile successfully!')\r\n      }\r\n      this.closeModifyUserProfileModal();\r\n    })\r\n  }\r\n\r\n\r\n}\r\n","module.exports = \".roomchat-header {\\r\\n  height: 60px;\\r\\n  padding: 8px;\\r\\n  width: 100%;\\r\\n  border-bottom: solid;\\r\\n  border-color: #e7e7e7;\\r\\n  border-width: thin;\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-header-setting {\\r\\n  width: 32px;\\r\\n  float: left;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-header-label {\\r\\n  /* font-size: 16px;\\r\\n    text-align: center;\\r\\n    height: 100%;\\r\\n    flex-basis: 100%; */\\r\\n  font-size: 16px;\\r\\n  font-weight: 500;\\r\\n  overflow: hidden;\\r\\n  text-align: center;\\r\\n  float: left;\\r\\n  margin-left: 32%;\\r\\n  font-family: SFUIText-Regular, Segoe UI, Helvetica Neue, Helvetica, Arial, sans-serif;\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-header-newmessage {\\r\\n  min-width: 32px;\\r\\n  float: right;\\r\\n  height: 100%;\\r\\n  width: 40px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-header-next {\\r\\n  min-width: 32px;\\r\\n  float: right;\\r\\n  height: 100%;\\r\\n  width: 40px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-search {\\r\\n  padding: 10px;\\r\\n  width: 100%;\\r\\n  height: 60px;\\r\\n  display: flex;\\r\\n  justify-content: center;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-body {\\r\\n  /* padding-left: 10px;\\r\\n    padding-right: 10px; */\\r\\n}\\r\\n\\r\\n\\r\\n.roomchat-body :hover {\\r\\n  background-color: #e7e7e7\\r\\n}\\r\\n\\r\\n\\r\\n@media screen and (max-width:420px) {\\r\\n    \\r\\n}\\r\\n\\r\\n\\r\\n@media screen and (max-width:910px) {\\r\\n\\r\\n\\r\\n}\\r\\n\"","module.exports = \"<div style=\\\"margin-top:74px\\\">\\n  <div class=\\\"roomchat-header\\\">\\n    <div class=\\\"roomchat-header-setting\\\">\\n      <i class=\\\"fas fa-cog\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\n    </div>\\n    <div class=\\\"roomchat-header-label\\\" id=\\\"roomchat-header-label\\\">\\n      <div style=\\\"margin-top: 10px\\\">Tin nhắn</div>\\n    </div>\\n    <div id=\\\"roomchat-header-next\\\" class=\\\"roomchat-header-next\\\" style=\\\"display: none;\\\">\\n      <i class=\\\"fas fa-chevron-right\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\n    </div>\\n    <div (click)=\\\"createRoomchat()\\\" class=\\\"roomchat-header-newmessage\\\">\\n      <i class=\\\"far fa-envelope\\\" style=\\\"font-size:30px;margin-top:8px\\\"></i>\\n    </div>\\n  </div>\\n  <div class=\\\"roomchat-search\\\">\\n    <input [(ngModel)]=\\\"searchTerm\\\" class=\\\"form-control\\\" style=\\\"width:100%\\\" type=\\\"text\\\" placeholder=\\\"Tìm kiếm trên HustMess\\\">\\n  </div>\\n  <div class=\\\"roomchat-body\\\" id=\\\"roomchat-body\\\">\\n    <div style=\\\"cursor: pointer\\\" *ngFor=\\\"let roomchat of roomchats| searchRoomchat: searchTerm;let i = index\\\" id={{roomchat._id}}>\\n      <app-lastmessage [myID]=\\\"myID\\\" [roomchatID]=\\\"roomchat._id\\\" [reactive]=\\\"roomchat.reactive\\\" [idle]=\\\"roomchat.idle\\\"\\n        [timeActive]=\\\"roomchat.timeActive\\\" [content]='roomchat.content' [profileImage]='roomchat.profileImage'\\n        [roomchatName]='roomchat.roomchatName'></app-lastmessage>\\n    </div>\\n\\n  </div>\\n</div>\\n\\n\\n<!-- <div popover=\\\"content to be shown in the popover\\\"\\n     popoverTitle=\\\"Popover header\\\"\\n     popoverPlacement=\\\"top\\\"\\n     [popoverOnHover]=\\\"false\\\"\\n     [popoverCloseOnClickOutside]=\\\"true\\\"\\n     [popoverCloseOnMouseOutside]=\\\"false\\\"\\n     [popoverDisabled]=\\\"false\\\"\\n     [popoverAnimation]=\\\"true\\\"\\n     [popoverDismissTimeout]=\\\"1000\\\">\\n    element on which this popover is applied.\\n</div> -->\\n\"","import {\r\n  Component,\r\n  OnInit,\r\n  HostListener,\r\n  ChangeDetectorRef,\r\n  ViewChild,\r\n  AfterViewInit\r\n} from \"@angular/core\";\r\nimport { RoomchatService } from \"../../services/roomchat.service\";\r\nimport { ComponentCommunicationService } from \"../../services/component-communication.service\";\r\nimport { SocketService } from \"../../services/socket.service\";\r\nimport { FriendService } from \"../../services/friend.service\";\r\nimport { Router, ActivatedRoute } from \"@angular/router\";\r\nimport { Subscription } from \"rxjs\";\r\n\r\n@Component({\r\n  selector: \"app-roomchat\",\r\n  templateUrl: \"./roomchat.component.html\",\r\n  styleUrls: [\"./roomchat.component.css\"]\r\n})\r\nexport class RoomchatComponent implements OnInit, AfterViewInit {\r\n  searchTerm: string = \"\";\r\n  myID: string = \"\";\r\n  roomchats = [];\r\n  showManageRoomchatModal: boolean = false;\r\n  url: string = \"\";\r\n  insertRoomchatViaSocket: Subscription;\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onResize(event) {\r\n    this.adjust();\r\n    if (this.url === \"/home\") {\r\n      this.listenResponsive();\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    private roomchatService: RoomchatService,\r\n    private componentCommunicationService: ComponentCommunicationService,\r\n    private socketService: SocketService,\r\n    private friendService: FriendService,\r\n    private router: Router,\r\n    private cdR: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngAfterViewInit() {\r\n    if (this.url === \"/home\") {\r\n      console.log(\"reeeeeeeeeee\");\r\n      this.listenResponsive();\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      this.router.navigate([\"roomchats\"]);\r\n    } else {\r\n      this.router.navigate([\"home\"]);\r\n    }\r\n    this.confirmInit();\r\n    this.url = this.router.routerState.snapshot.url;\r\n\r\n    this.loadRoomchats();\r\n\r\n    this.componentCommunicationService.getData().subscribe(data => {\r\n      if (!data) return;\r\n      if (data.fromComponent === \"app\" && data.type === \"timestamp\") {\r\n        for (let roomchat of this.roomchats) {\r\n          if (roomchat.lastUserID === data.fromUserID + \"\") {\r\n            roomchat.timeActive = data.time;\r\n            // break;\r\n          }\r\n        }\r\n      } else if (data.fromComponent === \"app\" && data.type === \"idle\") {\r\n        for (let roomchat of this.roomchats) {\r\n          if (roomchat.lastUserID === data.fromUserID + \"\") {\r\n            roomchat.idle = true;\r\n            roomchat.reactive = false;\r\n            // break;\r\n          }\r\n        }\r\n      } else if (data.fromComponent === \"app\" && data.type === \"reactive\") {\r\n        for (let roomchat of this.roomchats) {\r\n          if (roomchat.lastUserID === data.fromUserID + \"\") {\r\n            roomchat.idle = false;\r\n            roomchat.reactive = true;\r\n            // break;\r\n          }\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"timestamp-on-init\"\r\n      ) {\r\n        for (let roomchat of this.roomchats) {\r\n          for (let timeActive of data.dataTimeActive) {\r\n            if (roomchat.lastUserID === timeActive._id + \"\") {\r\n              roomchat.timeActive = timeActive.timeActive;\r\n              // break;\r\n            }\r\n          }\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"input\" &&\r\n        data.type === \"arrange-roomchat\"\r\n      ) {\r\n        this.arrangeRoomchats({\r\n          lastUserID: data.lastUserID,\r\n          content: data.content,\r\n          roomchatID: data.roomchatID,\r\n          profileImage: data.profileImage\r\n        });\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"arrange-roomchat\"\r\n      ) {\r\n        this.arrangeRoomchats({\r\n          lastUserID: data.arrangedRoomchat.lastUserID,\r\n          content: data.arrangedRoomchat.content,\r\n          roomchatID: data.arrangedRoomchat.roomchatID,\r\n          profileImage: data.arrangedRoomchat.profileImage\r\n        });\r\n        if (document.getElementById(data.arrangedRoomchat.roomchatID)) {\r\n          document.getElementById(\r\n            data.arrangedRoomchat.roomchatID\r\n          ).style.backgroundColor = \"#e7e7e7\";\r\n        }\r\n        for (let roomchat of this.roomchats) {\r\n          if (roomchat._id === data.arrangedRoomchat.roomchatID) continue;\r\n          let el = document.getElementById(roomchat._id);\r\n          if (el && el.style.backgroundColor === \"rgb(231, 231, 231)\") {\r\n            el.style.backgroundColor = \"white\";\r\n            break;\r\n          }\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"conversation\" &&\r\n        data.type === \"confirm-loadparams\"\r\n      ) {\r\n        this.cdR.detectChanges();\r\n        if (document.getElementById(data.roomchatID)) {\r\n          document.getElementById(data.roomchatID).style.backgroundColor =\r\n            \"#e7e7e7\";\r\n        }\r\n      } else if (\r\n        (data.fromComponent === \"last-message\" ||\r\n          data.fromComponent === \"navbar\") &&\r\n        data.type === \"on-click-lastmessage\"\r\n      ) {\r\n        if (!data.roomchatID) return;\r\n        if (document.getElementById(data.roomchatID)) {\r\n          document.getElementById(data.roomchatID).style.backgroundColor =\r\n            \"#e7e7e7\";\r\n        }\r\n        for (let roomchat of this.roomchats) {\r\n          if (roomchat._id === data.roomchatID) continue;\r\n          let el = document.getElementById(roomchat._id);\r\n          if (el && el.style.backgroundColor === \"rgb(231, 231, 231)\") {\r\n            el.style.backgroundColor = \"white\";\r\n            break;\r\n          }\r\n        }\r\n      } else if (\r\n        data.fromComponent === \"last-message\" &&\r\n        data.type === \"delete-roomchat\"\r\n      ) {\r\n        let index = 0;\r\n        for (let roomchat of this.roomchats) {\r\n          if (roomchat._id === data.roomchatID) {\r\n            this.roomchats.splice(index, 1);\r\n            break;\r\n          }\r\n          index++;\r\n        }\r\n        this.router.navigate([\"/home/conversation\", this.roomchats[0]._id]);\r\n        this.socketService.deleteRoomchat(data.roomchatID);\r\n      } else if (\r\n        data.fromComponent === \"app\" &&\r\n        data.type === \"create-roomchat\"\r\n      ) {\r\n        this.insertRoomchatViaSocket = this.roomchatService\r\n          .getRoomchat(data.roomchatID)\r\n          .subscribe(dataa => {\r\n            if (dataa && dataa.success) {\r\n              this.roomchats.push({\r\n                lastUserID: dataa.roomchat.firstUserInRoomchat._id + \"\",\r\n                lastUserName: dataa.roomchat.firstUserInRoomchat.username,\r\n                profileImage:\r\n                  dataa.roomchat.firstUserInRoomchat.profileImage.lowQuality,\r\n                content: dataa.roomchat.roomchat.lastMessage.content,\r\n                _id: dataa.roomchat.roomchat._id,\r\n                roomchatName: this.processRoomchatName(\r\n                  dataa.roomchat.firstUserInRoomchat.username,\r\n                  dataa.roomchat.numberOfUserInRoomchat,\r\n                  dataa.roomchat.typeRoomchat\r\n                ),\r\n                timeActive: 0,\r\n                idle: false,\r\n                reactive: false\r\n              });\r\n            }\r\n          });\r\n      } else if (\r\n        (data.fromComponent === \"conversation\" ||\r\n          data.fromComponent === \"new\") &&\r\n        data.type === \"reload-component\"\r\n      ) {\r\n        this.roomchats = [];\r\n        this.loadRoomchats();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  createRoomchat() {\r\n    let w = window.innerWidth;\r\n    if (w < 900) {\r\n      this.router.navigate([\"/newmessage\"]);\r\n    } else {\r\n      this.router.navigate([\"/home/newmessage\"]);\r\n    }\r\n  }\r\n\r\n  confirmInit() {\r\n    this.componentCommunicationService.setData({\r\n      fromComponent: \"conversation\",\r\n      type: \"confirm-init\"\r\n    });\r\n  }\r\n\r\n  arrangeRoomchats(newRoomchat: any) {\r\n    let index = 0;\r\n    for (let roomchat of this.roomchats) {\r\n      if (roomchat._id === newRoomchat.roomchatID) {\r\n        let oldRoomchat = roomchat;\r\n        this.roomchats.splice(index, 1);\r\n        oldRoomchat.lastUserID = newRoomchat.lastUserID;\r\n        oldRoomchat.profileImage = newRoomchat.profileImage;\r\n        oldRoomchat.content = newRoomchat.content;\r\n        console.log(\"room_: \", oldRoomchat);\r\n        this.roomchats.unshift(oldRoomchat);\r\n        break;\r\n      }\r\n      index++;\r\n    }\r\n  }\r\n\r\n  adjust() {\r\n    if (!document.getElementById(\"last-message-comp\")) return;\r\n    let lastMessageComp = document.getElementById(\"last-message-comp\")\r\n      .clientWidth;\r\n    let lastMessageProfileImage = document.getElementById(\"profile-image\")\r\n      .clientWidth;\r\n    let lastMessageSetting = document.getElementById(\"message-body-setting\")\r\n      .clientWidth;\r\n    let temp =\r\n      lastMessageComp - (lastMessageProfileImage + lastMessageSetting + 30);\r\n    document.getElementById(\"message-body\").style.width = temp + \"px\";\r\n  }\r\n\r\n  processRoomchatName(firstUser, numberOfUsers, typeRoomchat) {\r\n    if (typeRoomchat === \"private\") {\r\n      return firstUser;\r\n    } else if (typeRoomchat === \"group\") {\r\n      return firstUser + \" và \" + numberOfUsers + \" người khác\";\r\n    }\r\n  }\r\n\r\n  listenResponsive() {\r\n    let width = window.innerWidth;\r\n    if (width < 900) {\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"roomchat\",\r\n        toComponent: \"home\",\r\n        type: \"responsive-show-roomchat\"\r\n      });\r\n      document.getElementById(\"roomchat-header-label\").style.display = \"none\";\r\n      document.getElementById(\"roomchat-header-next\").style.display = \"block\";\r\n    } else {\r\n      this.componentCommunicationService.setData({\r\n        fromComponent: \"roomchat\",\r\n        toComponent: \"home\",\r\n        type: \"responsive-show-roomchat-revert\"\r\n      });\r\n      document.getElementById(\"roomchat-header-label\").style.display = \"block\";\r\n      document.getElementById(\"roomchat-header-next\").style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  loadRoomchats() {\r\n    this.roomchatService.getRoomchats().subscribe(data => {\r\n      if (data.success) {\r\n        this.myID = data.myID;\r\n        for (let roomchat of data.roomchats) {\r\n          this.socketService.joinRoomchat(roomchat.roomchat._id);\r\n          this.roomchats.push({\r\n            lastUserID: roomchat.firstUserInRoomchat._id + \"\",\r\n            lastUserName: roomchat.firstUserInRoomchat.username,\r\n            profileImage: roomchat.firstUserInRoomchat.profileImage.lowQuality,\r\n            content: roomchat.roomchat.lastMessage.content,\r\n            _id: roomchat.roomchat._id,\r\n            roomchatName: this.processRoomchatName(\r\n              roomchat.firstUserInRoomchat.username,\r\n              roomchat.numberOfUserInRoomchat,\r\n              roomchat.typeRoomchat\r\n            ),\r\n            timeActive: 0,\r\n            idle: false,\r\n            reactive: false\r\n          });\r\n        }\r\n        if (this.roomchats[0]) {\r\n          this.componentCommunicationService.setData({\r\n            fromComponent: \"roomchat\",\r\n            toComponent: \"conversation\",\r\n            type: \"confirm-loadroomchats\",\r\n            roomchatID: this.roomchats[0]._id\r\n          });\r\n        }\r\n        if (this.roomchats.length !== 0) {\r\n          let windowWidth = window.innerWidth;\r\n          console.log(\"hceck url: \", this.router.routerState.snapshot.url);\r\n          if (this.url === \"/home\" || this.url === \"/home/roomchats\") {\r\n            if (windowWidth >= 900) {\r\n              this.router.navigate([\r\n                \"/home/conversation\",\r\n                this.roomchats[0]._id\r\n              ]);\r\n              this.cdR.detectChanges();\r\n              document.getElementById(\r\n                this.roomchats[0]._id\r\n              ).style.backgroundColor = \"#e7e7e7\";\r\n            } else {\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = \"\"","module.exports = \"<div style=\\\"width:100%;display: flex;justify-content: center;align-items: center\\\">\\n  <video id=\\\"big-stream\\\" controls></video>\\n</div>\\n<div style=\\\"width:25%;height:300px;position: fixed;bottom:100px\\\">\\n  <video id=\\\"small-stream\\\" width=\\\"100%\\\" controls></video>\\n</div>\\n<div (click)='close()' style=\\\"position:fixed;bottom:20px;width:100%;height:100px;display: flex;justify-content: center;align-items: center\\\">\\n  <i class=\\\"fas fa-phone\\\" style=\\\"font-size: 40px;color:red\\\"></i>\\n</div>\\n\"","import { Component, OnInit, AfterViewInit, ChangeDetectorRef } from '@angular/core';\nimport { ComponentCommunicationService } from '../../services/component-communication.service';\nimport { Subscription } from 'rxjs';\nimport { Router, ActivatedRoute, RouterStateSnapshot } from '@angular/router';\n// import * as Peer from 'peerjs';\nimport * as Peer from 'peerjs';\nimport { UserService } from 'src/app/services/user.service';\nimport { SocketService } from '../../services/socket.service';\nimport { RoomchatUserService } from '../../services/roomchat-user.service';\n\n@Component({\n  selector: 'app-services',\n  templateUrl: './services.component.html',\n  styleUrls: ['./services.component.css']\n})\nexport class ServicesComponent implements OnInit, AfterViewInit {\n  getDataSub: Subscription;\n  peer: Peer;\n  roomchatID: string = '';\n  userID: string = '';\n  peerIDs: Array<any> = [];\n  getUsersInRoomchatSub: Subscription;\n  getUsersDetailSub: Subscription;\n  othersStream: Array<any> = [];\n  constructor(private communicationComponentService: ComponentCommunicationService,\n    private userService: UserService,\n    private cdRef: ChangeDetectorRef,\n    private socketService: SocketService,\n    private roomchatUserService: RoomchatUserService,\n    private router: Router) { }\n\n  ngOnInit() {\n    this.roomchatID = this.getParams().params;\n    this.userID = this.getParams().query;\n    this.peer = new Peer({\n      path: '/peerjs',\n      host: 'hustmess-peer-server.herokuapp.com',\n      port: 443,\n      secure: true\n    });\n    let bigStream = <HTMLVideoElement>document.getElementById('big-stream');\n    bigStream.height = window.innerHeight ;\n    let bigVideoWidth = bigStream.clientWidth;\n\n    this.getUsersInRoomchatSub = this.roomchatUserService.getRoomchatUsers(this.roomchatID).subscribe(dataa => {\n      if (dataa && dataa.success) {\n        let usersInRoomchat = dataa.roomchatUsers.map(el => el.userID);\n        this.getUsersDetailSub = this.userService.getUsersFromIDs(usersInRoomchat).subscribe(data => {\n          if (data && data.success) {\n            let users = data.users;\n            users.forEach(el => {\n              if (this.userID !== el._id) {\n                let userDetail = el.detail;\n                if (userDetail && userDetail.peerID && userDetail.peerID !== '') {\n                  this.peerIDs.push({\n                    userID: el._id,\n                    peerID: userDetail.peerID\n                  })\n                }\n              }\n            })\n            if (this.peerIDs.length === 1) {\n              this.othersStream.push('');\n              this.cdRef.detectChanges();\n              this.openStream().then(stream => {\n                let call = this.peer.call(this.peerIDs[0].peerID + '', stream);\n                call.on('stream', remoteStream => { \n                  let bigVideoEl = <HTMLVideoElement>document.getElementById('big-stream');\n                  let smallStream = <HTMLVideoElement>document.getElementById('small-stream');\n                  bigVideoEl.srcObject = remoteStream;\n                  bigVideoEl.play();\n                  smallStream.srcObject = stream;\n                  smallStream.play();\n                });\n\n\n              });\n            } else {\n\n            }\n            // this.openStream().then(stream => {\n            //   for (let peerID of this.peerIDs) {\n            //     let call = this.peer.call(peerID.peerID + '', stream);\n            //     call.on('stream', remoteStream => {\n            //       console.log('check strea: ', remoteStream)\n            //       let videoEl = <HTMLVideoElement>document.getElementById('localStream');\n            //       videoEl.srcObject = remoteStream;\n            //       videoEl.play();\n            //     });\n            //   }\n\n            // });\n            //call thoi!\n          }\n        })\n      }\n    })\n\n\n    // this.peer.on('open', id => {\n    //   this.socketService.emitPeerID(id, this.roomchatID, this.userID);\n    // })\n\n\n\n    // this.openStream().then(stream => {\n    //   this.userService.getUser('low', this.userID).subscribe(user => {\n    //     if (user && user.success) {\n    //       console.log('RTT')\n    //       let peerID = user.user.detail.peerID;\n    //       let videoEl = <HTMLVideoElement>document.getElementById('localStream');\n    //       videoEl.srcObject = stream;\n    //       videoEl.play();\n    //       let call = this.peer.call(peerID, stream);\n    //       call.on('stream', remoteStream => {\n\n    //       });\n    //     }\n    //   })\n    // })\n\n  }\n\n  close(){\n    window.close();\n  }\n\n  openStream() {\n    const config = {\n      audio: true,\n      video: true\n    };\n    return navigator.mediaDevices.getUserMedia(config);\n  }\n\n  getParams() {\n    let url = this.router.routerState.snapshot.url.split('?');\n    let tempLength = url[0].split('/').length;\n    return {\n      params: url[0].split('/')[tempLength - 1] + '',\n      query: url[1].replace('userid=', '')\n    }\n  }\n\n  ngAfterViewInit() {\n    this.communicationComponentService.setData({\n      fromComponent: 'answer',\n      toComponent: 'navbar',\n      type: 'hide-navbar'\n    })\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { AuthenticationService } from '../services/authentication.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n  constructor(private authService: AuthenticationService, private router: Router) {\n\n  }\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n\n    if (this.authService.loggedIn()) {\n      console.log('Guard:ok')\n      return true;\n    } else {\n      console.log('Guard:ok___')\n      this.router.navigate(['/authenticate']);\n      return false;\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'searchContacts'\r\n})\r\nexport class SearchContactsPipe implements PipeTransform {\r\n\r\n  transform(contacts: any, term: string): any {\r\n    if (!contacts) return [];\r\n    if (!term) return contacts;\r\n    if (term == '' || term == null) return [];\r\n    return contacts.filter(contact => {\r\n      return contact.username.includes(term);\r\n    })\r\n  }\r\n\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'searchRoomchat'\r\n})\r\nexport class SearchRoomchatPipe implements PipeTransform {\r\n\r\n  transform(roomchats: any, term: string): any {\r\n    // console.log(\"RRRRR: \",roomchats)\r\n    if (!roomchats) return [];\r\n    if (!term) return roomchats;\r\n    if (term == '' || term == null) return [];\r\n    return roomchats.filter(roomchat => {\r\n      return roomchat.roomchatName.includes(term);\r\n    })\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Location } from '@angular/common';\nimport { Router } from '@angular/router';\nimport { Http, Headers, URLSearchParams } from '@angular/http';\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport {DOMAIN} from '../../../src/domain';\n \n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthenticationService {\n  myID: string;\n  authToken: string;\n  code: string;\n  private tokenStatus: BehaviorSubject<any> = new BehaviorSubject(null);\n  constructor(private http: Http, private location: Location, private router: Router) {\n    if (this.loggedIn()) {\n      this.tokenStatus.next({\n        isAdded: true\n      })\n    } else {\n      this.tokenStatus.next({\n        isAdded: false\n      })\n    }\n  }\n  registerUser(user) {\n    let headers = new Headers();\n    console.log('auth', user)\n    headers.append('Content-Type', 'application/json');\n    return this.http.post(DOMAIN + 'register', user, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  loginUser(user) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    return this.http.post(DOMAIN + 'login', user, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  validateExist(info: any) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    return this.http.post(DOMAIN + 'validate', info, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n\n\n  storeToken(token: string) {\n    localStorage.setItem('id_token', token);\n    if (this.loggedIn()) {\n      this.tokenStatus.next({\n        isAdded: true\n      })\n    } else {\n      this.tokenStatus.next({\n        isAdded: false\n      })\n    }\n\n  }\n\n  getTokenStatus(){\n    return this.tokenStatus.asObservable();\n  }\n\n  loadToken() {\n    const token = localStorage.getItem('id_token');\n    this.authToken = token;\n  }\n\n  loggedIn() {\n    return tokenNotExpired(null, localStorage.getItem(\"id_token\"))\n  }\n\n  logout() {\n    localStorage.setItem('isLoggedIn', 'false');\n    this.authToken = null;\n    localStorage.clear();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {BehaviorSubject} from 'rxjs/BehaviorSubject';\nimport { Observable} from 'rxjs/Observable';\n\n@Injectable()\nexport class ComponentCommunicationService {\n  private data: BehaviorSubject<any> = new BehaviorSubject(null);\n  constructor() { }\n\n  public setData(data: any) {\n    this.data.next(data);\n  }\n\n  public getData(): Observable<any>{\n    return this.data.asObservable();\n  }\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Http, Headers, URLSearchParams } from '@angular/http';\r\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\r\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\r\nimport { tokenNotExpired } from 'angular2-jwt';\r\nimport { AuthenticationService } from './authentication.service';\r\nimport {DOMAIN} from '../../../src/domain';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FriendService {\r\n\r\n  constructor(private http: Http, private authService: AuthenticationService) { }\r\n\r\n  getFriends(approved: string) {\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'friend/many?approved=' + approved, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  addFriend(id){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    var user = { \"secondUser\" : id};\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.post(DOMAIN + 'friend/', user , { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  acceptFriend(id){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    console.log(id);\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.put(DOMAIN + \"friend?id=\"+ id, {\"approved\" : true}  , { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  deleteFriend(id){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.delete(DOMAIN + 'friend?firstuser='+id, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Http, Headers, URLSearchParams } from '@angular/http';\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport { AuthenticationService } from './authentication.service';\nimport {DOMAIN} from '../../../src/domain';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MessageService {\n\n  constructor(private http: Http, private router: Router, private authService: AuthenticationService) { }\n\n  getMessages(roomchatID: string, timeSeq: number, limit: number) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'message/many?roomchatid=' + roomchatID + '&time=' + timeSeq + '&limit=' + limit, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  sendMessage(roomchatID, content, attach, fileType, fileName) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let body = {\n      roomChatID: roomchatID,\n      content: content,\n      attach: attach,\n      fileType: fileType,\n      fileName: fileName\n    }\n    return this.http.post(DOMAIN + 'message', body, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  updateMessages(roomchatID) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.put(DOMAIN + 'message/many?roomchatid=' + roomchatID, {}, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  deleteOneMessage(messageID) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.delete(DOMAIN + 'message?messageid=' + messageID, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  updateOneMessage(messageID) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.put(DOMAIN + 'message?messageid=' + messageID, {}, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Http, Headers, URLSearchParams } from '@angular/http';\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport { AuthenticationService } from './authentication.service';\nimport {DOMAIN} from '../../../src/domain';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotificationService {\n\n  constructor(private http: Http, private authService: AuthenticationService) { }\n  getNotifications(timeSeq: number, limit: number) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'notification/many?time=' + timeSeq + '&limit=' + limit, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  getNumberOfUnreadNotifications() {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'notification/many/count', { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  updateNotifications(topTime: number,bottomTime: number){ \n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let body = {\n      topTime: topTime,\n      bottomTime: bottomTime\n    }\n    return this.http.put(DOMAIN + 'notification/',body, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  createNotifications(toUserID: string,detail: any,time: number){ \n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let body = {\n      toUserID: toUserID,\n      detail: detail,\n      time: time\n    }\n    return this.http.post(DOMAIN + 'notification/',body, { headers: headers }).pipe(map(res => res.json()));\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Http, Headers, URLSearchParams } from '@angular/http';\r\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\r\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\r\nimport { tokenNotExpired } from 'angular2-jwt';\r\nimport { AuthenticationService } from './authentication.service';\r\nimport {DOMAIN} from '../../../src/domain';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RoomchatUserService {\r\n\r\n  constructor(private http: Http, private authService: AuthenticationService) { }\r\n  getRoomchatUsers(roomchatID) {\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'roomchatuser/many?roomchatid=' + roomchatID, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  addUsersToRoomchat(userIds, roomchatID) {\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    let body = {\r\n      userIDs: userIds,\r\n      roomChatID: roomchatID\r\n    }\r\n    return this.http.post(DOMAIN + 'roomchatuser', body, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  deleteUserFromRoomchat(roomchatID, userID) {\r\n    console.log('delete user_',roomchatID,userID)\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.delete(DOMAIN + 'roomchatuser?roomchatid=' + roomchatID + '&userid=' + userID, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  assignAdmin(roomchatID: string, userID: string) {\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.put(DOMAIN + 'roomchatuser?roomchatid=' + roomchatID + '&userid=' + userID + '&type=assign-admin', {}, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  deleteAssignAdmin(roomchatID: string, userID: string) {\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.put(DOMAIN + 'roomchatuser?roomchatid=' + roomchatID + '&userid=' + userID + '&type=delete-assign-admin', {}, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Http, Headers, URLSearchParams } from '@angular/http';\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport { AuthenticationService} from './authentication.service';\nimport {DOMAIN} from '../../../src/domain';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RoomchatService {\n\n  constructor(private http: Http, private router: Router, private authService: AuthenticationService) { }\n\n  createRoomchat(name: string){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    console.log('name_',name)\n    let body = {\n      name: name\n    }\n    return this.http.post(DOMAIN + 'roomchat',body, { headers: headers}).pipe(map(res => res.json()));\n  }\n\n  checkDuplicateRoomchat(userIDs){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let body = {\n      userIDs: userIDs\n    }\n    return this.http.post(DOMAIN + 'roomchat/checkduplicate',body, { headers: headers}).pipe(map(res => res.json()));\n  }\n\n  getRoomchats(){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'roomchat/many', { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  getRoomchat(roomchatID){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'roomchat/one?roomchatid=' + roomchatID, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  deleteRoomchat(roomchatID){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.delete(DOMAIN + 'roomchat?roomchatid=' + roomchatID, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  addSeenUsers(roomchatID,userID){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let body = {\n      $push: {\n        isSeenBy: userID\n      }\n    }\n    return this.http.put(DOMAIN + 'roomchat?roomchatid=' + roomchatID,body, { headers: headers}).pipe(map(res => res.json()));\n  }\n\n  resetSeenUsers(roomchatID){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let body = {\n      isSeenBy: []\n    }\n    return this.http.put(DOMAIN + 'roomchat?roomchatid=' + roomchatID,body, { headers: headers}).pipe(map(res => res.json()));\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport * as io from 'socket.io-client';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SocketService {\r\n  constructor() {\r\n    this.socket = io(this.url)\r\n  }\r\n  private url = 'https://hustmess-server.herokuapp.com';\r\n  private socket;\r\n\r\n\r\n  sendUserID(userID, roomchatID) {\r\n    this.socket.emit('send-userid', {\r\n      userID: userID,\r\n      roomchatID: roomchatID\r\n    })\r\n  }\r\n\r\n  emitIdle(roomchatID, userID) {\r\n    this.socket.emit('idle-status', {\r\n      roomchatID: roomchatID,\r\n      userID: userID\r\n    })\r\n  }\r\n\r\n  emitReceiveMessage(roomchatID){\r\n    this.socket.emit('confirm-received-message',{\r\n      roomchatID: roomchatID\r\n    })\r\n  }\r\n\r\n  emitSeenMessage(roomchatID,userID){\r\n    this.socket.emit('confirm-seen-message',{\r\n      roomchatID: roomchatID,\r\n      userID: userID\r\n    })\r\n  }\r\n\r\n  confirmReceiveMessage(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('confirm-received-message', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  receiveJoinRoomchatConfirm(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('join-roomchat', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  confirmSeenMessage(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('confirm-seen-message', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  receiveIdle() {\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('idle-status', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  reActive(roomchatID, userID) {\r\n    this.socket.emit('reactive-status', {\r\n      roomchatID: roomchatID,\r\n      userID: userID\r\n    })\r\n  }\r\n\r\n  receiveReactive() {\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('reactive-status', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  // reconnect(){\r\n  //   this.socket = io(this.url);\r\n  // }\r\n\r\n  // onDisconnect(){\r\n  //   let observable = new Observable<any>(observer => {\r\n  //     this.socket.on('disconnect', (data) => {\r\n  //       observer.next(data);\r\n  //     });\r\n  //     return () => {\r\n  //       this.socket.disconnect();\r\n  //     };\r\n  //   })\r\n  //   return observable;\r\n  // }\r\n\r\n  deleteRoomchat(roomchatID) {\r\n    this.socket.emit('delete-roomchat', { roomchatID: roomchatID })\r\n  }\r\n\r\n  confirmCompleteLoad() {\r\n    this.socket.emit('complete-load-component', {})\r\n  }\r\n\r\n  emitTyping(roomchatID, status) {\r\n    this.socket.emit('typing', {\r\n      roomchatID: roomchatID,\r\n      status: status\r\n    })\r\n  }\r\n\r\n  receiveTyping(cb) {\r\n    return this.socket.on('receive-typing', data => {\r\n      return cb(data);\r\n    });\r\n    // let observable = new Observable<any>(observer => {\r\n    //   this.socket.on('receive-typing', (data) => {\r\n    //     observer.next(data);\r\n    //   });\r\n    //   return () => {\r\n    //     this.socket.disconnect();\r\n    //   };\r\n    // })\r\n    // return observable;\r\n  }\r\n\r\n  receiveConfirmConnect() {\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('confirm-connect', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  joinRoomchat(roomchatID) {\r\n    this.socket.emit('join-roomchat', {\r\n      roomchatID: roomchatID\r\n    })\r\n  }\r\n\r\n  leaveRoomchat(roomchatID){\r\n    this.socket.emit('leave-roomchat',{\r\n      roomchatID: roomchatID\r\n    })\r\n  }\r\n\r\n\r\n  createRoomchat(userIDs,roomchatID,userZone){\r\n    this.socket.emit('create-roomchat',{\r\n      userIDs: userIDs,\r\n      roomchatID: roomchatID,\r\n      userZone: userZone\r\n    })\r\n  }\r\n\r\n  sendMessage(messageObj) {\r\n    this.socket.emit('send-message', messageObj);\r\n  }\r\n\r\n  receiveMessage(cb) {\r\n    return this.socket.on('receive-message', data => {\r\n      return cb(data);\r\n    });\r\n    // let observable = new Observable<any>(observer => {\r\n    //   this.socket.on('receive-message', (data) => {\r\n    //     observer.next(data);\r\n    //   });\r\n    //   return () => {\r\n    //     this.socket.disconnect();\r\n    //   };\r\n    // })\r\n    // return observable;\r\n\r\n  }\r\n\r\n  receiveCreateRoomchat(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('create-roomchat', (data) => {\r\n        console.log('receive')\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n\r\n  receiveTimestamp() {\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('receive-timestamp', (data) => {\r\n        console.log('receive')\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  receiveOpenCallConfirm(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('open-call-confirm', (data) => {\r\n        console.log('receive')\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  emitCall(username,userID,roomchatID){\r\n    this.socket.emit('call-request',{\r\n      username: username,\r\n      userID: userID,\r\n      roomchatID\r\n    })\r\n  }\r\n\r\n  emitNotification(roomchatID,notificationObject){\r\n    this.socket.emit('notification',{\r\n      roomchatID: roomchatID,\r\n      notification: notificationObject\r\n    })\r\n  }\r\n\r\n  emitAcceptCallStatus(accept: boolean,roomchatID: string, userID: string){\r\n    this.socket.emit('peerID',{\r\n      accept: accept,\r\n      userID: userID,\r\n      roomchatID: roomchatID\r\n    })\r\n  }\r\n\r\n  emitOpenCallConfirm(roomchatID){\r\n    this.socket.emit('open-call-confirm',{\r\n      confirm: true,\r\n      roomchatID: roomchatID\r\n    })\r\n  }\r\n\r\n  emitSendFriendRequest(fromUserInfo,destUserID){\r\n    this.socket.emit('friend-request',{\r\n      destUserID: destUserID,\r\n      fromUserInfo: fromUserInfo\r\n    })\r\n  }\r\n\r\n  receiveFriendRequest(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('friend-request', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n\r\n\r\n  emitAddUsersToGroup(roomchatID: string,addedUserID: Array<string>){\r\n    this.socket.emit('add-users-to-roomchat',{\r\n      roomchatID: roomchatID,\r\n      addedUserID: addedUserID\r\n    })\r\n  }\r\n\r\n\r\n  emitDeleteUsersFromGroup(roomchatID: string,deletedUserID: string){\r\n    this.socket.emit('delete-user-from-roomchat',{\r\n      roomchatID: roomchatID,\r\n      deletedUserID: deletedUserID\r\n    })\r\n  }\r\n\r\n  receiveDeleteUsersFromGroup(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('delete-user-from-roomchat', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n\r\n  receiveAddUsersToGroup(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('add-users-to-roomchat', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  receivePeerID(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('peerID', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  receiveNotification(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('notification', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  receiveCallRequest(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('call-request', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n\r\n  emitArrangeRoomchats(arrangedRoomchat){\r\n    return this.socket.emit('arrange-roomchats',arrangedRoomchat)\r\n  }\r\n\r\n  receiveArrangeRoomchats(){\r\n    let observable = new Observable<any>(observer => {\r\n      this.socket.on('arrange-roomchats', (data) => {\r\n        observer.next(data);\r\n      });\r\n      return () => {\r\n        this.socket.disconnect();\r\n      };\r\n    })\r\n    return observable;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HttpRequest, HttpHeaders, HttpClient, HttpEvent, HttpEventType, HttpParams } from '@angular/common/http';\nimport { Http, Headers, URLSearchParams } from '@angular/http';\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\nimport { tokenNotExpired } from 'angular2-jwt';\nimport { AuthenticationService } from './authentication.service';\nimport {DOMAIN} from '../../../src/domain';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UploadService {\n\n  constructor(private http: Http, private authService: AuthenticationService, private httpClient: HttpClient) { }\n  uploadFile(formData: FormData, i: Number, roomchatID: string) {\n    let headers = new Headers();\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    let req = new HttpRequest('POST', DOMAIN + 'uploads/files', formData, {\n      reportProgress: true,\n      headers: new HttpHeaders().set('Authorization', this.authService.authToken),\n      params: new HttpParams().set('roomchatid', roomchatID)\n    });\n    return this.httpClient.request(req).pipe(map(event => this.getEventMessage(event, i)));\n    // return this.http.post(DOMAIN + 'uploads/files', formData, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  getEventMessage(event: HttpEvent<any>, index: Number) {\n    switch (event.type) {\n      case HttpEventType.Sent:\n        return 0;\n\n      case HttpEventType.UploadProgress:\n        // Compute and show the % done:\n        const percentDone = Math.round(100 * event.loaded / event.total);\n        console.log('index', index)\n        return {\n          percentDone: percentDone,\n          index: index\n        }\n      case HttpEventType.Response:\n        return event.body;\n      default:\n        return 0;\n    }\n  }\n\n  getFiles(roomchatID: string, typeFile: string, timeSeq: number, limit: number) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'files/many?roomchatid=' + roomchatID + '&type=' + typeFile + '&time=' + timeSeq + '&limit=' + limit, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n  getFile(roomchatID: string, typeFile: string, fileID: number) {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/json');\n    this.authService.loadToken();\n    headers.append('Authorization', this.authService.authToken);\n    return this.http.get(DOMAIN + 'files?roomchatid=' + roomchatID + '&type=' + typeFile + '&id=' + fileID, { headers: headers }).pipe(map(res => res.json()));\n  }\n\n}\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Http, Headers, URLSearchParams } from '@angular/http';\r\nimport { Observable, Subject, ReplaySubject, from, of, range } from 'rxjs';\r\nimport { map, filter, switchMap, catchError } from 'rxjs/operators';\r\nimport { tokenNotExpired } from 'angular2-jwt';\r\nimport { AuthenticationService } from './authentication.service';\r\nimport {DOMAIN} from '../../../src/domain';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserService {\r\n\r\n  constructor(private http: Http, private authService: AuthenticationService) { }\r\n\r\n  getUsers(quality: string) { // get my friends\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'user/many?quality=' + quality , { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  getAllUsers(){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'user/all',{ headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  searchUsers(searchTerm: string,typeUser: string){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'user/search/friends?termsearch=' + searchTerm +'&typeuser=' + typeUser, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  getUser(quality: string,userID: string){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'user/one?quality=' + quality +'&userid=' + userID, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  getMe(quality: string){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.get(DOMAIN + 'user/me?quality=' + quality, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  getUsersFromIDs(IDs: Array<string>){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    let body = {\r\n      userIDs: IDs\r\n    }\r\n    return this.http.post(DOMAIN + 'user/many',body, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  updatePeerIDUser(peerID){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    let body = {\r\n      \"detail.peerID\": peerID\r\n    }\r\n    return this.http.put(DOMAIN + 'user',body, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n\r\n  updateUserProfile(profile){\r\n    let headers = new Headers();\r\n    headers.append('Content-Type', 'application/json');\r\n    this.authService.loadToken();\r\n    headers.append('Authorization', this.authService.authToken);\r\n    return this.http.put(DOMAIN + 'user',profile, { headers: headers }).pipe(map(res => res.json()));\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'timeAgo',\n  pure: false\n})\nexport class TimeAgoPipe implements PipeTransform {\n\n  transform(value: any, isIdle: boolean): any {\n    let d = new Date(value);\n    let now = new Date();\n    let seconds = Math.round(Math.abs((now.getTime() - d.getTime()) / 1000));\n    let timeToUpdate = (Number.isNaN(seconds)) ? 1000 : this.getSecondsUntilUpdate(seconds) * 1000;\n    let minutes = Math.round(Math.abs(seconds / 60));\n    let hours = Math.round(Math.abs(minutes / 60));\n    let days = Math.round(Math.abs(hours / 24));\n    let months = Math.round(Math.abs(days / 30.416));\n    let years = Math.round(Math.abs(days / 365));\n    if (Number.isNaN(seconds)) {\n      return '';\n    } else if (isIdle) {\n      return 'Đang bận'\n    }  else if (seconds <= 6) {\n      return 'Đang hoạt động';\n    } else if (seconds <= 90) {\n      return 'Hoạt động 1 phút trước';\n    } else if (minutes <= 45) {\n      return 'Hoạt động ' + minutes + ' phút trước';\n    } else if (minutes <= 90) {\n      return 'Hoạt động 1 giờ trước';\n    } else if (hours <= 22) {\n      return 'Hoạt động ' + hours + ' giờ trước';\n    } else if (hours <= 36) {\n      return 'Hoạt động 1 ngày trước';\n    } else if (days <= 25) {\n      return 'Hoạt động ' + days + ' ngày trước';\n    } else if (days <= 45) {\n      return 'Hoạt động 1 tháng trước';\n    } else if (days <= 345) {\n      return 'Hoạt động ' + days + ' tháng trước';\n    } else if (days <= 545) {\n      return 'Hoạt động 1 năm trước';\n    } else {\n      // (days > 545)\n      return years + ' years ago';\n    }\n  }\n\n  getSecondsUntilUpdate(seconds) {\n    let min = 60;\n    let hr = min * 60;\n    let day = hr * 24;\n    if (seconds < min) {\n      // less than 1 min, update every 2 secs\n      return 2;\n    } else if (seconds < hr) {\n      // less than an hour, update every 30 secs\n      return 30;\n    } else if (seconds < day) {\n      // less then a day, update every 5 mins\n      return 300;\n    } else {\n      // update every hour\n      return 3600;\n    }\n  };\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'timeago'\n})\nexport class TimeagoPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    let d = new Date(value);\n    let now = new Date();\n    let seconds = Math.round(Math.abs((now.getTime() - d.getTime()) / 1000));\n    console.log('second: ',seconds)\n    let timeToUpdate = (Number.isNaN(seconds)) ? 1000 : this.getSecondsUntilUpdate(seconds) * 1000;\n    let minutes = Math.round(Math.abs(seconds / 60));\n    let hours = Math.round(Math.abs(minutes / 60));\n    let days = Math.round(Math.abs(hours / 24));\n    let months = Math.round(Math.abs(days / 30.416));\n    let years = Math.round(Math.abs(days / 365));\n    if (Number.isNaN(seconds)) {\n      return;\n    }\n    else if (seconds <= 45) {\n      return 'Đang hoạt động';\n    }\n    else if (seconds <= 90) {\n      return 'Hoạt động 1 phút trước';\n    }\n    else if (minutes <= 45) {\n      return 'Hoạt động ' + minutes + ' phút trước';\n    }\n    else if (minutes <= 90) {\n      return 'Hoạt động 1 giờ trước';\n    }\n    else if (hours <= 22) {\n      return 'Hoạt động ' + hours + ' giờ trước';\n    }\n    else if (hours <= 36) {\n      return 'Hoạt động 1 ngày trước';\n    }\n    else if (days <= 25) {\n      return 'Hoạt động ' + days + ' ngày trước';\n    }\n    else if (days <= 45) {\n      return 'Hoạt động 1 tháng trước';\n    }\n    else if (days <= 345) {\n      return 'Hoạt động ' + days + ' tháng trước';\n    }\n    else if (days <= 545) {\n      return 'Hoạt động 1 năm trước';\n    }\n    else {\n      // (days > 545)\n      return years + ' years ago';\n    }\n  }\n\n  getSecondsUntilUpdate = function (seconds) {\n    var  min = 60;\n    var  hr = min * 60;\n    var  day = hr * 24;\n    if (seconds < min) {\n      // less than 1 min, update every 2 secs\n      return 2;\n    }\n    else if (seconds < hr) {\n      // less than an hour, update every 30 secs\n      return 30;\n    }\n    else if (seconds < day) {\n      // less then a day, update every 5 mins\n      return 300;\n    }\n    else {\n      // update every hour\n      return 3600;\n    }\n  };\n\n}\n","export const DOMAIN = 'https://hustmess-server.herokuapp.com/'","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n","/* (ignored) */"],"sourceRoot":""}